import{d as L,q as T,v as N,r as b,s as w,S as n,b as D,aT as I,o as E,j as g,B as r,u as s,F as U,k as a,a3 as A,D as p,J as d,K as m,L as C,M as B,I as G,t as v,aw as F,_ as q}from"./index.5d30604a.js";const P={id:"wrap"},R={class:"tl1 tl2 tl3",summary:"Alarms"},$={class:"first-th"},z=L({__name:"MapAlarmsGrid",setup(H){const y=T(),k=N(()=>y.getters["mapModule/getAlarms"]),c=[{id:1,option:"Not Selected"},{id:2,option:"Acknowledge"},{id:3,option:"Unacknowledge"},{id:4,option:"Escalate"},{id:5,option:"Clear"}],S=b(c[0]),_=b(!1),i=b({}),V=N(()=>{let e=!1;for(const o in i.value)if(i.value[o]){e=!0;break}return!_.value&&!e}),M=e=>{i.value[e.id]=!i.value[e.id]},O=async()=>{let e;switch(S.value.option){case c[0].option:break;case c[1].option:{e={ack:!0};break}case c[2].option:{e={ack:!1};break}case c[3].option:{e={escalate:!0};break}case c[4].option:{e={clear:!0};break}}const o=k.value.filter(f=>_.value||i.value[f.id]),h=[];o.forEach(f=>{const x=y.dispatch("mapModule/modifyAlarm",{pathVariable:f.id,queryParameters:e});h.push(x)}),(await Promise.all(h)).forEach(f=>{}),y.dispatch("mapModule/getAlarms"),_.value=!1,i.value={}},l=w({id:n.DESCENDING,severity:n.NONE,nodeLabel:n.NONE,uei:n.NONE,count:n.NONE,lastEventTime:n.NONE,logMessage:n.NONE}),u=e=>{for(const o in l)l[o]=n.NONE;l[`${e.property}`]=e.value,y.dispatch("mapModule/setAlarmSortObject",e)};return D(()=>{const e=document.getElementById("wrap"),o=document.querySelector("thead");e&&o&&e.addEventListener("scroll",function(){let h="translate(0,"+this.scrollTop+"px)";o.style.transform=h})}),(e,o)=>{const h=I("date");return E(),g(C,null,[r(s(U),{class:"select-ack",name:"alarmOptions",id:"alarmOptions",modelValue:S.value,"onUpdate:modelValue":[o[0]||(o[0]=t=>S.value=t),O],disabled:s(V),options:c,"text-prop":"option",label:"Alarm Action"},null,8,["modelValue","disabled"]),a("div",P,[a("table",R,[a("thead",null,[a("tr",null,[a("th",$,[r(s(A),{modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=t=>_.value=t),label:"All"},null,8,["modelValue"])]),r(s(m),{scope:"col",property:"id",sort:l.id,onSortChanged:u},{default:p(()=>[d("ID")]),_:1},8,["sort"]),r(s(m),{scope:"col",property:"severity",sort:l.severity,onSortChanged:u},{default:p(()=>[d("SEVERITY")]),_:1},8,["sort"]),r(s(m),{scope:"col",property:"nodeLabel",sort:l.nodeLabel,onSortChanged:u},{default:p(()=>[d("NODE LABEL")]),_:1},8,["sort"]),r(s(m),{scope:"col",property:"uei",sort:l.uei,onSortChanged:u},{default:p(()=>[d("UEI")]),_:1},8,["sort"]),r(s(m),{scope:"col",property:"count",sort:l.count,onSortChanged:u},{default:p(()=>[d("COUNT")]),_:1},8,["sort"]),r(s(m),{scope:"col",property:"lastEvent",sort:l.lastEventTime,onSortChanged:u},{default:p(()=>[d("LAST EVENT")]),_:1},8,["sort"]),r(s(m),{scope:"col",property:"logMessage",sort:l.logMessage,onSortChanged:u},{default:p(()=>[d("LOG MESSAGE")]),_:1},8,["sort"])])]),a("tbody",null,[(E(!0),g(C,null,B(s(k),t=>(E(),g("tr",{key:t.id},[a("td",{class:G([t.severity,"first-td"])},[r(s(A),{"onUpdate:modelValue":f=>M(t),modelValue:_.value||i.value[t.id],label:"Alarm"},null,8,["onUpdate:modelValue","modelValue"])],2),a("td",null,v(t.id),1),a("td",null,v(t.severity),1),a("td",null,v(t.nodeLabel),1),a("td",null,v(t.uei),1),a("td",null,v(t.count),1),F((E(),g("td",null,[d(v(t.lastEventTime),1)])),[[h]]),a("td",null,v(t.logMessage),1)]))),128))])])])],64)}}});const K=q(z,[["__scopeId","data-v-3a61d680"]]);export{K as default};
