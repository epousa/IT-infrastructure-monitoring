import{o as u,j as c,k as f,d as q,ad as M,ae as ee,af as te,X as ue,z as se,a4 as he,ag as de,ah as ce,ai as pe,aj as fe,O as S,ak as W,al as ge,N as me,am as ve,an as we,ao as p,ap as Ce,Z as H,Y as ye,aq as Ie,v as Y,ar as be,as as Re,r as P,$ as $e,at as ke,a1 as Se,au as _e,s as ie,t as b,f as C,A as d,c as w,D as g,M as x,L as V,B as m,E as Z,I as _,Q as G,J as re,a2 as K,av as J,aw as B,ax as E,ay as le,p as Le,l as Pe}from"./index.5d30604a.js";var Ve=(e,t)=>{const s=e.__vccOpts||e;for(const[i,h]of t)s[i]=h;return s};const qe={},Ae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Te=f("path",{d:"M12,10a1,1,0,0,0-1,1v5a1,1,0,0,0,2,0V11A1,1,0,0,0,12,10Z"},null,-1),xe=f("rect",{x:"11",y:"7",width:"2",height:"2",rx:"0.65"},null,-1),Fe=f("path",{d:"M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z"},null,-1),De=[Te,xe,Fe];function Be(e,t){return u(),c("svg",Ae,De)}var Ee=Ve(qe,[["render",Be]]),Me=Object.defineProperty,Ne=Object.defineProperties,Oe=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,X=(e,t,s)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,v=(e,t)=>{for(var s in t||(t={}))je.call(t,s)&&X(e,s,t[s]);if(Q)for(var s of Q(t))We.call(t,s)&&X(e,s,t[s]);return e},He=(e,t)=>Ne(e,Oe(t)),N={highlight:{type:String,default:"off",validator(e){return["off","ignore-case"].indexOf(e)!==-1}}},z={query:{type:String}},L=(e,t)=>{const s=e.__vccOpts||e;for(const[i,h]of t)s[i]=h;return s};const Ke=q({mixins:[],props:v(v({text:{type:String,required:!0}},N),z),computed:{index(){if(this.query&&this.query.length===0)return-1;if(this.query&&this.highlight)switch(this.highlight.toLowerCase()){case"ignore-case":return this.text.toLowerCase().indexOf(this.query.toLowerCase());default:return-1}return-1},beginning(){return this.index===-1?this.text:this.text.slice(0,this.index)},highlighted(){if(!(this.index===-1||!this.query))return this.text.slice(this.index,this.index+this.query.length)},end(){if(!(this.index===-1||!this.query))return this.text.slice(this.index+this.query.length)}}}),Ge={key:0,class:"highlight"},Ze={key:1};function ze(e,t,s,i,h,n){return u(),c("span",null,[f("span",null,b(e.beginning),1),e.highlighted?(u(),c("span",Ge,b(e.highlighted),1)):C("",!0),e.end?(u(),c("span",Ze,b(e.end),1)):C("",!0)])}var ae=L(Ke,[["render",ze],["__scopeId","data-v-8abe2492"]]);const Ue=q({emits:["select","deselect"],props:v(v({activeId:{type:String,required:!0},activeIndex:{type:Number,required:!0},items:{type:Array,required:!0},value:{type:[Array,Object],default:()=>[]},textProp:{type:String,default:"_text"},single:{type:Boolean,default:!1},newLabel:{type:String,default:"new"}},N),z),watch:{activeIndex(e){e>-1&&this.$nextTick(()=>{const t=Array.prototype.slice.call(this.$el.querySelectorAll("li"))[e],s=this.$refs.list;M(t,s.$el)})}},methods:{isSelected(e){const t=this.value;return t&&t.length?t.some(i=>i[this.textProp]===e[this.textProp]):this.value[this.textProp]===e[this.textProp]},isActive(e){return this.activeIndex===e},getId(e){return e===this.activeIndex?this.activeId:null},select(e){this.$emit(this.isSelected(e)?"deselect":"select",e)}},components:{FeatherList:ee,FeatherListItem:te,Highlighter:ae}}),Ye={key:0,class:"autocomplete-item-new-label"};function Je(e,t,s,i,h,n){const l=d("Highlighter"),r=d("FeatherListItem"),o=d("FeatherList");return u(),w(o,{class:"feather-autocomplete-results-list",tabindex:"-1","aria-hidden":"false",role:"listbox","aria-multiselectable":e.single?"false":"true",ref:"list"},{default:g(()=>[(u(!0),c(V,null,x(e.items,(a,y)=>(u(),c(V,{key:a[e.textProp]},[m(r,{"as-li":"",id:e.getId(y),tabindex:"-1",role:"option",class:"result-item hover","aria-selected":e.isSelected(a),highlighted:e.isActive(y),selected:e.isSelected(a),onClick:Z(I=>e.select(a),["stop"])},{default:g(()=>[m(l,{highlight:e.highlight,query:e.query,text:a[e.textProp]},null,8,["highlight","query","text"]),a._new?(u(),c("span",Ye,b(e.newLabel),1)):C("",!0)]),_:2},1032,["id","aria-selected","highlighted","selected","onClick"]),e.items.length!==1&&a._new?(u(),c("li",{role:"presentation",key:a[e.textProp]+"hr",class:"hr"})):C("",!0)],64))),128))]),_:1},8,["aria-multiselectable"])}var Qe=L(Ue,[["render",Je],["__scopeId","data-v-f623434a"]]);const Xe=q({emits:["select"],props:v(v({activeId:{type:String,required:!0},activeRow:{type:Number,required:!0},activeCol:{type:Number,required:!0},items:{type:Array,required:!0},value:{type:[Array,Object],default:()=>[]},textProp:{type:String,default:"_text"},single:{type:Boolean,default:!1},config:{type:Array,required:!0}},N),z),watch:{activeRow(e){e>-1&&this.$nextTick(()=>{const t=Array.prototype.slice.call(this.$el.querySelectorAll("tr"))[e+1],s=this.$refs.grid;M(t,s)})}},computed:{cls(){return this.config.map((e,t)=>e.align&&e.align.toLowerCase()==="right"?`tr${t+1}`:e.align&&e.align.toLowerCase()==="center"?`tc${t+1}`:`tl${t+1}`)}},methods:{isSelected(e){const t=this.value;return this.value&&this.value.length?t.some(i=>i[this.textProp]===e[this.textProp]):this.value[this.textProp]===e[this.textProp]},isActive(e){return this.activeRow===e},isActiveCell(e,t){return this.activeRow===e&&this.activeCol===t},getId(e,t){return e===this.activeRow&&this.activeCol===t?this.activeId:""},select(e){this.$emit("select",e)}},components:{Highlighter:ae}}),et={class:"feather-autocomplete-results-grid",ref:"grid"},tt=["aria-multiselectable"],st={role:"row"},it=["aria-selected","onClick"],rt=["id","aria-selected"],lt={key:1};function at(e,t,s,i,h,n){const l=d("Highlighter");return u(),c("div",et,[f("table",{class:_(["feather-autocomplete-results-grid-container",e.cls]),tabindex:"-1","aria-hidden":"false",role:"grid","aria-multiselectable":e.single?"false":"true"},[f("thead",null,[f("tr",st,[(u(!0),c(V,null,x(e.config,r=>(u(),c("th",{key:r.title},b(r.title),1))),128))])]),f("tbody",null,[(u(!0),c(V,null,x(e.items,(r,o)=>(u(),c("tr",{role:"row",key:r[e.textProp],"aria-selected":e.isSelected(r),class:_({focus:e.isActive(o),selected:e.isSelected(r)}),onClick:Z(a=>e.select(r),["stop"])},[(u(!0),c(V,null,x(e.config,(a,y)=>(u(),c("td",{key:r[e.textProp]+a.prop,id:e.getId(o,y),"aria-selected":e.isSelected(r),class:_({"focus-cell":e.isActiveCell(o,y)})},[a.prop===e.textProp?(u(),w(l,{key:0,highlight:e.highlight,query:e.query,text:r[a.prop]},null,8,["highlight","query","text"])):(u(),c("p",lt,b(r[a.prop]),1))],10,rt))),128))],10,it))),128))])],10,tt)],512)}var nt=L(Xe,[["render",at],["__scopeId","data-v-58c88fd1"]]);const ot=q({components:{FeatherList:ee,FeatherListItem:te}});function ut(e,t,s,i,h,n){const l=d("FeatherListItem"),r=d("FeatherList");return u(),w(r,{class:"result-list"},{default:g(()=>[m(l,{"as-li":""},{default:g(()=>[G(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}var ht=L(ot,[["render",ut],["__scopeId","data-v-06b752c6"]]);const dt=q({name:"Chip",emits:["delete"],props:{focused:{type:Boolean,default:!1},removeLabel:{type:String,required:!0},text:{type:String},disabled:{type:Boolean},pre:{type:Object}},computed:{showPreIcon(){return this.pre&&this.pre.icon&&this.pre.title}},methods:{handleClick(){this.$emit("delete")}},components:{FeatherIcon:se,Cancel:he,BaseChip:de,BaseChipLabel:ce,BaseChipPreIcon:pe}});function ct(e,t,s,i,h,n){const l=d("FeatherIcon"),r=d("BaseChipPreIcon"),o=d("BaseChipLabel"),a=d("Cancel"),y=d("BaseChip");return u(),w(y,{class:_(["focus autocomplete-chip",{focused:e.focused}]),condensed:"",disabled:e.disabled},{default:g(()=>[e.showPreIcon?(u(),w(r,{key:0},{default:g(()=>{var I,k;return[m(l,{icon:(I=e.pre)==null?void 0:I.icon,title:(k=e.pre)==null?void 0:k.title},null,8,["icon","title"])]}),_:1})):C("",!0),m(o,null,{default:g(()=>[re(b(e.text),1)]),_:1}),e.disabled?C("",!0):(u(),c("span",{key:1,class:"chip-delete",onClick:t[0]||(t[0]=Z((...I)=>e.handleClick&&e.handleClick(...I),["stop"]))},[m(l,{class:"delete-icon",flex:"",title:e.removeLabel},{default:g(()=>[m(a)]),_:1},8,["title"])]))]),_:1},8,["class","disabled"])}var pt=L(dt,[["render",ct],["__scopeId","data-v-e0fc6ac0"]]);const ft={},gt=e=>(Le("data-v-aa720e06"),e=e(),Pe(),e),mt={class:"spinner-container"},vt=gt(()=>f("svg",{class:"spinner",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg"},[f("circle",{class:"path",fill:"none","stroke-width":"6","stroke-linecap":"round",cx:"33",cy:"33",r:"30"})],-1)),wt=[vt];function Ct(e,t){return u(),c("div",mt,wt)}var yt=L(ft,[["render",Ct],["__scopeId","data-v-aa720e06"]]),O=(e=>(e.multi="multi",e.single="single",e))(O||{});const ne={noResults:"No results found",minChar:"Enter ${min} characters to search",clear:"Clear value",selectionLimit:"Selection limit reached",new:"New",remove:"Remove"},It=v(v(v({id:{type:String},modelValue:{type:[Array,Object]},results:{type:Array,default:()=>[]},textProp:{type:String,default:"_text"},loading:{type:Boolean,default:!1},minChar:{type:Number,default:0},allowNew:{type:Boolean,default:!1},selectionLimit:{type:Number},newMatcher:{type:Function,default:(e,t,s)=>e[s.textProp].toString().toLowerCase()===t.toLowerCase()},type:{type:String,required:!0,validator:e=>!!O[e]},labels:{type:Object,default:()=>ne},gridConfig:{type:Array},schema:{type:Object,required:!1}},N),ue),fe),bt={"update:modelValue":e=>!0,new:e=>!0,search:e=>!0},Rt=(e,t,s,i)=>{if(s.toLowerCase()===O.multi){const n=e.modelValue,l=r=>{e.selectionLimit.value&&r.length>=e.selectionLimit.value?e.selectionLimitReached.value=!0:e.selectionLimitReached.value=!1};return{getInitialText(){return""},handleModelValueChange(r){r&&r.length&&l(r)},hasValue(){return!!(n.value&&n.value.length)},selectItem(r){if(n.value&&n.value.filter(a=>a[e.textProp.value]===r[e.textProp.value]).length)return;const o=n.value?[...n.value,r]:[r];i("update:modelValue",o),l(o)},removeItem(r){const o=n.value.findIndex(a=>{if(r[e.textProp.value]===a[e.textProp.value])return!0});debugger;if(o>-1){const a=n.value.slice(0);a.splice(o,1),i("update:modelValue",a),l(a),e.input.value.focus()}},clickedItem(){e.query.value="",e.emitSearch()},handleInputBlur(){}}}const h=e.modelValue;return{getInitialText(){return h.value?h.value[e.textProp.value]:""},handleModelValueChange(){e.query.value=this.getInitialText()},hasValue(){return!!h.value},selectItem(n){t.active.row=-1,e.forceCloseResults.value=!0,n&&n._new&&e.allowNew?i("new",n._new):i("update:modelValue",n)},removeItem(){},clickedItem(){e.forceCloseResults.value=!0},handleInputBlur(){if(t.active.row>-1){const n=e.internalResults.value[t.active.row];n&&n._new&&e.allowNew?i("new",n._new):i("update:modelValue",n)}}}},$t=()=>{const e=ie({row:-1}),t=n=>{le(()=>{e.row=n})},s=(n,l)=>{if(n.keyCode===p.DOWN){if(n.preventDefault(),e.row===-1)i(),t(0);else if(e.row+1<=l.length-1){const r=e.row;i(),t(r+1)}return!0}if(n.keyCode===p.UP){if(n.preventDefault(),e.row===0)i();else if(e.row>0){const r=e.row;i(),t(r-1)}return!0}return!1},i=()=>{e.row=-1};return{reset:i,handleKeyPress:s,active:e,first:()=>{e.row=0}}},kt=e=>{const t=ie({row:-1,col:-1}),s=(l,r)=>{le(()=>{t.col=r,t.row=l})},i=(l,r)=>{if(l.keyCode===p.DOWN){if(l.preventDefault(),t.row===-1)h(),s(0,0);else if(t.row+1<=r.length-1){const o=t.row,a=t.col;h(),s(o+1,a)}return!0}if(l.keyCode===p.UP){if(l.preventDefault(),t.row===0)h();else if(t.row>0){const o=t.row,a=t.col;h(),s(o-1,a)}return!0}if(l.keyCode===p.RIGHT&&t.row!==-1){if(l.preventDefault(),t.col+1<=e.length-1){const o=t.col,a=t.row;h(),s(a,o+1)}else if(t.col<=e.length-1&&t.row+1<=r.length-1){const o=t.row;h(),s(o+1,0)}return!0}if(l.keyCode===p.LEFT&&t.row!==-1){if(l.preventDefault(),t.col===0&&t.row===0)return!0;if(t.col===0&&t.row>0){const o=t.row;h(),s(o-1,e.length-1)}else if(t.col>0){const o=t.col,a=t.row;h(),s(a,o-1)}return!0}if(l.keyCode===p.END&&t.row!==-1){l.preventDefault();const o=t.row;return h(),s(l.ctrlKey?r.length-1:o,e.length-1),!0}if(l.keyCode===p.HOME&&t.row!==-1){l.preventDefault();const o=t.row;return h(),s(l.ctrlKey?0:o,0),!0}return!1},h=()=>{t.row=-1,t.col=-1};return{reset:h,handleKeyPress:i,active:t,first:()=>{h(),s(0,0)}}},St=q({model:{prop:"modelValue",event:"update:modelValue"},emits:bt,props:It,data(){return{typingTimeout:-1,activeChipIndex:-1,activeChipId:""}},computed:{singleSelect(){return this.type!==O.multi},raised(){return this.hasValue||this.hasFocus},hasValue(){var e;return(e=this.strategy)==null?void 0:e.hasValue()},showMenu(){return(this.showResults||this.showNoResults||this.showLoading||this.showSelectionLimit||this.showMinCharWarning)&&!this.disabled},showResults(){return this.forceCloseResults||this.selectionLimitReached||this.showMinCharWarning?!1:!!(this.hasFocus&&this.internalResults&&this.internalResults.length&&!this.loading)},showNoResults(){return!this.forceCloseResults&&this.hasFocus&&!this.selectionLimitReached&&this.internalResults&&this.internalResults.length===0&&this.query&&this.query.length>0&&this.query.length>=this.minChar&&!this.loading},showSelectionLimit(){return!this.forceCloseResults&&this.hasFocus&&this.selectionLimitReached&&!this.loading},showLoading(){return this.hasFocus&&this.loading},showMinCharWarning(){return this.minChar>0&&!this.selectionLimitReached&&!this.loading&&this.hasFocus&&this.query.length<this.minChar},resultItemId(){return S("result-item")},minCharWarningId(){return S("min-char-warning")},subTextId(){return S("feather-autocomplete-description")},resultsId(){return S("feather-autocomplete-input-results")},selectedDescriptionId(){return S("feather-autocomplete-input-selected")},searchIcon(){return W(ge)},minCharIcon(){return W(Ee)},dropdownIcon(){return W(me)},inputAttrs(){const e=[this.selectedDescriptionId,this.subTextId].filter(Boolean);let t="";return this.activeChipIndex>-1&&(t=this.activeChipId),this.active.row>-1&&this.showResults&&(t=this.resultItemId),this.minChar&&e.push(this.minCharWarningId),{id:this.inputId,"aria-describedby":e.join(" "),"aria-busy":this.loading,"aria-activedescendant":t,disabled:this.disabled,"aria-disabled":this.disabled,"aria-autocomplete":"list",autocomplete:"off",readonly:!!this.disabled,tabindex:this.disabled?-1:0,"aria-controls":this.showResults?this.resultsId:"","aria-invalid":this.$attrs["aria-invalid"]==="true"||!!this.error}},inputListeners(){return{input:this.handleTextInput,blur:this.handleInputBlur,focus:this.handleInputFocus,click:this.handleInputEnter,keydown:this.handleInputKeyDown}},comboxBoxAttrs(){return{role:"combobox","aria-expanded":this.showResults?"true":"false","aria-haspopup":this.gridConfig?"grid":"listbox","aria-owns":this.resultsId,"aria-label":this.label}},scrollContainer(){return this.$refs.scroll.$el.querySelector(".feather-input-wrapper")},computedMinCharText(){return this.minCharLabel?this.minCharLabel.replace("${min}",this.minChar.toString()):""},selectedDescribedByText(){return this.modelValue&&this.modelValue.length?this.modelValue.map(t=>t[this.textProp]).join(", "):""},allowNewEnabled(){return this.singleSelect&&this.allowNew},modelValueList(){return this.singleSelect?[]:this.modelValue}},watch:{activeChipIndex(e){e&&this.genActiveChipId(),e>-1&&this.scrollContainer&&this.$nextTick(()=>{M(this.$el.querySelector(`#${this.activeChipId}`),this.scrollContainer)})},query(e){!this.inputRef||e!==this.inputRef.value&&(this.inputRef.value=e)},modelValue:{handler(e,t){e&&t&&e.length>t.length&&this.scrollContainer&&this.$nextTick(()=>{M(this.inputRef,this.scrollContainer)}),this.strategy.handleModelValueChange(e),this.hasFocus||this.adjustTextArea()},immediate:!0},results(e){e&&e.length>0&&this.selectFirst(),this.forceCloseResults=!1,e&&e.length===0&&this.query&&this.query.length>0&&!this.allowNewEnabled&&this.setAlert(this.noResultsLabel),this.allowNewEnabled&&this.query.length&&(e.some(s=>this.newMatcher(s,this.query,this))||(e=[{[this.textProp]:this.query,_new:this.query},...e])),this.internalResults=e},showResults(e){const t=this.$refs.menu;e&&t.calculatePosition&&t.calculatePosition()},selectionLimitReached(e){e&&this.setAlert(this.selectionLimitLabel)}},methods:{getPre(e){return e._pre},genActiveChipId(){return this.activeChipId=S("active-chip"),this.activeChipId},setAlert(e){const t=this.$refs.alert;t.textContent=e,setTimeout(()=>{t.textContent=""},100)},handleClear(){this.query="",this.inputRef.focus(),this.emitSearch(),this.$emit("update:modelValue",void 0)},handleInputFocus(){this.disabled||(this.adjustTextArea(),!this.hasFocus&&(this.hasFocus=!0,this.modelValue&&this.singleSelect&&this.inputRef.select()))},handleInputEnter(){this.handleInputFocus(),this.emitSearch()},handleTextInput(e){this.adjustTextArea();const s=e.target.value;s!==void 0&&(ve(this.typingTimeout),this.typingTimeout=we(()=>{this.query=s,this.emitSearch()},250))},handleInputKeyDown(e){const t=()=>{this.activeChipIndex=-1},s=()=>{this.resetResultIndex()};if(e.keyCode===p.ENTER&&e.preventDefault(),this.internalResults&&this.internalResults.length&&this.handleResultNavigation(e,this.internalResults)){t(),this.forceCloseResults=!1;return}if(e.keyCode===p.ENTER&&this.activeChipIndex>-1){e.preventDefault();const i=this.modelValue;this.removeFromValue(i[this.activeChipIndex]),t();return}if(e.keyCode===p.ENTER&&this.active.row>-1){e.preventDefault(),this.selectItem(this.internalResults[this.active.row]);return}if((e.keyCode===p.ENTER||e.keyCode===p.SPACE||e.keyCode===p.DOWN)&&this.activeChipIndex==-1&&!this.showMenu){e.preventDefault(),this.emitSearch();return}if(e.keyCode===p.ESCAPE){this.forceCloseResults=!0,s(),t();return}if(!this.query&&this.modelValue&&this.modelValue.length){const i=this.modelValue;e.keyCode===p.LEFT&&(e.preventDefault(),this.activeChipIndex===-1?(s(),this.activeChipIndex=i.length-1):this.activeChipIndex-1>=0&&(s(),this.activeChipIndex=this.activeChipIndex-1)),e.keyCode===p.RIGHT&&(e.preventDefault(),this.activeChipIndex===i.length-1?(s(),this.activeChipIndex=-1):this.activeChipIndex<i.length-1&&this.activeChipIndex>-1&&(s(),this.activeChipIndex=this.activeChipIndex+1)),(e.keyCode===p.DELETE||e.keyCode===p.BACKSPACE)&&this.activeChipIndex!==-1&&(this.removeFromValue(i[this.activeChipIndex]),s(),t())}},handleTriggerClick(){this.disabled||(this.inputRef.focus(),this.handleDropdownIconClick())},handleInputBlur(){this.validate(),this.strategy.handleInputBlur(),(this.forceCloseResults||!this.showMenu)&&this.handleOutsideClick()},handleOutsideClick(){this.hasFocus=!1,this.forceCloseResults=!1,this.activeChipIndex=-1,this.resetResultIndex(),this.query=this.strategy.getInitialText(),this.internalResults=[],this.adjustTextArea()},clickedItem(e){this.selectItem(e),this.internalResults=[],this.inputRef.focus(),this.strategy.clickedItem()},selectItem(e){this.strategy.selectItem(e),this.adjustTextArea()},removeFromValue(e){this.strategy.removeItem(e)},handleDropdownIconClick(){if(this.showMenu){this.forceCloseResults=!0;return}this.forceCloseResults||this.emitSearch()},adjustTextArea(){const e=this.inputRef;!e||(e.style.height="1.625rem",e.style.flexBasis="40px",e.style.whiteSpace="nowrap",this.$nextTick(()=>{const t=e.getBoundingClientRect().width,s=e.parentElement;e.scrollWidth<=e.clientWidth&&s&&t<s.getBoundingClientRect().width?e.style.whiteSpace="nowrap":(e.style.whiteSpace="normal",e.style.flexBasis="100%"),this.$nextTick(()=>{e.style.height=`${e.scrollHeight}px`})}))}},setup(e,t){const s=Ce(H(e,"labels"),ne);ye(e),Ie(e);let i;e.gridConfig?i=kt(e.gridConfig):i=$t();const h=H(e,"id"),n=Y(()=>h.value?h.value:S("feather-autocomplete-input")),{validate:l}=be(n,H(e,"modelValue"),e.label,e.schema),{selectionLimit:r,modelValue:o,textProp:a,allowNew:y,type:I,minChar:k}=Re(e),F=P(!1),A=P(!1),D=P(!1),R=P(""),$=P([]),T=P(),j=Y(()=>T.value),U=()=>{F.value&&!A.value&&(R.value&&R.value.length>=k.value&&t.emit("search",R.value),k.value<=0&&t.emit("search",R.value||""),$.value=[],i.reset())},oe=Rt({selectionLimit:r,selectionLimitReached:A,modelValue:o,textProp:a,allowNew:y,forceCloseResults:D,query:R,internalResults:$,input:j,emitSearch:U},i,I.value,t.emit);return He(v(v({},s),$e(t.attrs)),{query:R,internalResults:$,selectionLimitReached:A,forceCloseResults:D,hasFocus:F,strategy:oe,emitSearch:U,active:i.active,handleResultNavigation:i.handleKeyPress,resetResultIndex:i.reset,selectFirst:i.first,inputId:n,input:T,incomingId:h,inputRef:j,validate:l})},mounted(){this.adjustTextArea()},components:{InputWrapper:ke,InputSubText:Se,AutocompleteResults:Qe,AutocompleteResultsGrid:nt,Chip:pt,MenuMessage:ht,FeatherIcon:se,FeatherMenu:_e,Spinner:yt}}),_t={class:"alert",role:"alert","aria-live":"polite","aria-atomic":"true",ref:"alert"},Lt=["id"],Pt={"data-ref-id":"feather-autocomplete-no-results"},Vt={"data-ref-id":"feather-autocomplete-selection-limit"},qt={"data-ref-id":"feather-autocomplete-min-char"};function At(e,t,s,i,h,n){const l=d("FeatherIcon"),r=d("Chip"),o=d("InputWrapper"),a=d("AutocompleteResults"),y=d("AutocompleteResultsGrid"),I=d("MenuMessage"),k=d("Spinner"),F=d("FeatherMenu"),A=d("InputSubText");return u(),c("div",K(e.inherittedAttrs,{class:"feather-autocomplete-container"}),[m(F,{fill:"","no-expand":"",open:e.showMenu,onOutsideClick:e.handleOutsideClick,onTriggerClick:e.handleTriggerClick,class:_(["feather-autocomplete-menu-container",{grid:e.gridConfig}]),"data-ref-id":"feather-autocomplete-menu-container",ref:"menu"},{trigger:g(({attrs:D,on:R})=>[m(o,K(v(v({},D),e.comboxBoxAttrs),{for:e.inputId,raised:e.raised,focused:e.hasFocus,"clear-text":e.clearLabel,showClear:e.singleSelect&&e.hasValue,onClear:e.handleClear},J(R),{ref:"scroll"}),{pre:g(()=>[G(e.$slots,"pre",{},()=>[m(l,{icon:e.searchIcon},null,8,["icon"])],!0)]),post:g(()=>[m(l,{icon:e.dropdownIcon,class:_(["feather-autocomplete-dropdown-icon",{rotate:e.showMenu}]),onClick:e.handleDropdownIconClick},null,8,["icon","class","onClick"])]),default:g(()=>[f("div",{class:_(["feather-autocomplete-content",{disabled:e.disabled}])},[f("div",_t,null,512),f("div",{class:"description",id:e.selectedDescriptionId,"data-ref-id":"feather-autocomplete-input-selected"},b(e.selectedDescribedByText),9,Lt),(u(!0),c(V,null,x(e.modelValueList,($,T)=>B((u(),w(r,{key:$[e.textProp],role:"button",id:T===e.activeChipIndex?e.activeChipId:null,focused:T===e.activeChipIndex,disabled:e.disabled,text:$[e.textProp],"remove-label":e.removeLabel,pre:e.getPre($),onDelete:j=>e.removeFromValue($)},null,8,["id","focused","disabled","text","remove-label","pre","onDelete"])),[[E,!e.singleSelect]])),128)),f("textarea",K(e.inputAttrs,{class:["feather-autocomplete-input",{error:e.error}],"data-ref-id":"feather-autocomplete-input"},J(e.inputListeners),{ref:"input"}),null,16)],2)]),_:2},1040,["for","raised","focused","clear-text","showClear","onClear"])]),default:g(()=>[e.gridConfig?C("",!0):B((u(),w(a,{key:0,items:e.internalResults,value:e.modelValue,"text-prop":e.textProp,activeId:e.resultItemId,activeIndex:e.active.row,"aria-label":e.label,onSelect:e.clickedItem,onDeselect:e.removeFromValue,class:"autocomplete-results",id:e.resultsId,single:e.singleSelect,"new-label":e.newLabel,highlight:e.highlight,query:e.query,ref:"results"},null,8,["items","value","text-prop","activeId","activeIndex","aria-label","onSelect","onDeselect","id","single","new-label","highlight","query"])),[[E,e.showResults]]),e.gridConfig?B((u(),w(y,{key:1,items:e.internalResults,value:e.modelValue,"text-prop":e.textProp,config:e.gridConfig,activeId:e.resultItemId,activeRow:e.active.row,activeCol:e.active.col,"aria-label":e.label,onSelect:e.clickedItem,class:"autocomplete-results",id:e.resultsId,single:e.singleSelect,highlight:e.highlight,query:e.query},null,8,["items","value","text-prop","config","activeId","activeRow","activeCol","aria-label","onSelect","id","single","highlight","query"])),[[E,e.showResults]]):C("",!0),e.showNoResults?(u(),w(I,{key:2},{default:g(()=>[f("span",Pt,b(e.noResultsLabel),1)]),_:1})):C("",!0),e.showSelectionLimit?(u(),w(I,{key:3,class:"selection-limit-warning"},{default:g(()=>[m(l,{icon:e.minCharIcon},null,8,["icon"]),f("span",Vt,b(e.selectionLimitLabel),1)]),_:1})):C("",!0),e.minChar?B((u(),w(I,{key:4,class:"min-char-warning",id:e.minCharWarningId},{default:g(()=>[m(l,{icon:e.minCharIcon},null,8,["icon"]),f("span",qt,[G(e.$slots,"min-char",{},()=>[re(b(e.computedMinCharText),1)],!0)])]),_:3},8,["id"])),[[E,e.showMinCharWarning]]):C("",!0),e.showLoading?(u(),w(k,{key:5})):C("",!0)]),_:3},8,["open","onOutsideClick","onTriggerClick","class"]),m(A,{id:e.subTextId},null,8,["id"])],16)}var xt=L(St,[["render",At],["__scopeId","data-v-43a7e951"]]);export{xt as F};
