!function(e,o){if("object"==typeof exports&&"object"==typeof module)module.exports=o();else if("function"==typeof define&&define.amd)define([],o);else{var t=o();for(var r in t)("object"==typeof exports?exports:e)[r]=t[r]}}(window,(function(){return(window.webpackJsonp=window.webpackJsonp||[]).push([[46,2,8,25,35,39,43,49,65,71],{10:function(e,exports,o){"use strict";var t,r=(t=o(70))&&t.__esModule?t:{default:t};var angular=o(3),n=o(22);angular.module("onms.http",["ui.bootstrap"]).factory("InterceptorService",["$q","$rootScope",function(e,o){return{responseError:function(t){var n,a;401===t.status&&(t.config&&t.config.url&&((0,r.default)(n=t.config.url).call(n,"rest/")||(0,r.default)(a=t.config.url).call(a,"api/v2/"))&&(console.error("Login Required",t,t.headers),o.$emit("loginRequired")));return 403===t.status&&o.$emit("permissionDenied"),e.reject(t)}}}]).config(["$locationProvider",function(e){e.hashPrefix("")}]).config(["$httpProvider",function(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.interceptors.push("InterceptorService")}]).run(["$rootScope","$uibModal",function(e,o){e.$on("loginRequired",(function(){var e=document.getElementsByTagName("base");e&&e.length>0&&e[0].href?document.headerLogoutForm.submit():console.warn("Login is required, but cannot forward to login page due to missing base tag.")})),e.$on("permissionDenied",(function(){o.open({templateUrl:n,controller:["$scope","$uibModalInstance",function($scope,e){$scope.reload=function(){e.dismiss(),window.location.reload()}}],size:"",backdrop:"static",keyboard:!1})}))}]),e.exports=angular},1028:function(e,exports,o){"use strict";o(13);var t=s(o(29)),r=s(o(209)),n=s(o(9)),a=s(o(103));function s(e){return e&&e.__esModule?e:{default:e}}var angular=o(3);o(128);o(10),o(63),o(90),o(91),o(80);var i,l=o(1029),c=o(1030);o(714),o(715),o(716);(0,t.default)(i=angular.module("onms.geoservice",["angular-loading-bar","angular-growl","ngResource","ui.router","ui.toggle","onms.http","onms.default.apps","onms.elementList"]).config(["$locationProvider",function(e){e.hashPrefix("!"),e.html5Mode(!1)}]).config(["growlProvider",function(e){e.globalTimeToLive({success:2e3,error:5e3,warning:3e3,info:4e3}),e.globalPosition("bottom-center")}]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("geocoding",{url:"/geocoding",controller:"GeocoderController",templateUrl:l}).state("geocoding.config",{templateUrl:c,url:"/config",controller:"GeocoderConfigController"}).state("geocoding.details",{templateUrl:function(e){return o(1031)("./"+e.id+".html")},url:"/:id",controller:"GeocoderDetailsController"}),t.otherwise("/geocoding/config")}])).call(i,"capitalize",(function(){return function(e){return e?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():""}})).factory("GeocodingConfigService",["$resource",function(e){return e("api/v2/geocoding/config",{},{get:{method:"GET"},update:{method:"POST"}})}]).factory("GeocodingGeocoderService",["$resource",function(e){return e("api/v2/geocoding/geocoders/:id",{id:"@id"},{list:{method:"GET",isArray:!0},update:{method:"POST"}})}]).controller("GeocoderController",["$scope","$http","$sce","GeocodingConfigService","GeocodingGeocoderService",function($scope,e,o,t,s){$scope.handleGlobalError=function(e){$scope.globalError="An unexpected error occurred: "+e.statusText,$scope.globalErrorDetails=(0,r.default)(e,null,2)},$scope.refreshTabs=function(){return $scope.config={enabled:!1,activeGeocoderId:void 0},$scope.geocoders=[],$scope.globalError=void 0,t.get((function(e){$scope.config=e}),(function(e){$scope.handleGlobalError(e)})).$promise.then((function(){return s.list((function(e){var o,t;$scope.geocoders=e,(0,n.default)(o=$scope.geocoders).call(o,(function(e){e.name=e.id,e.active=$scope.config.activeGeocoderId===e.id})),(0,a.default)(t=$scope.geocoders).call(t,(function(e,o){return e.name.localeCompare(o.name)}))}),(function(e){$scope.handleGlobalError(e)})).$promise}))}}]).controller("GeocoderConfigController",["$scope","growl",function($scope,e){$scope.onGeocoderChange=function(o){$scope.config.activeGeocoderId=o.active?o.id:void 0,$scope.config.$update((function(o){var t;e.success("Changes saved successfully"),(0,n.default)(t=$scope.geocoders).call(t,(function(e){e.active=$scope.config.activeGeocoderId===e.id}))}),(function(e){$scope.handleGlobalError(e)}))},$scope.refreshTabs()}]).controller("GeocoderDetailsController",["$scope","$stateParams","growl",function($scope,e,o){$scope.geocoders=[],$scope.geocoder=void 0,$scope.configError={},$scope.manualValidation={mapquest:function(){return!0},google:function(){return!0},nominatim:function(){return $scope.configError.userAgent=void 0,$scope.configError.referer=void 0,!(!$scope.geocoder.config.userAgent&&!$scope.geocoder.config.referer&&($scope.configError.userAgent="User Agent or Referer must be set",$scope.configError.referer=$scope.configError.userAgent,1))}},$scope.handleGeocoderConfigErrors=function(e){e.context&&e.message?$scope.configError[e.context]=e.message:e.context?$scope.configError[e.context]="Invalid value":o.error("The configuration is not valid. Details were not provided")},$scope.save=function(){if($scope.geocoder){if(!$scope.validateFieldsManually())return;$scope.configError={},$scope.geocoder.$update((function(){o.success("Changes saved successfully."),$scope.form.$setPristine(),$scope.geocoder.error=void 0}),(function(e){400===e.status&&e.data?$scope.handleGeocoderConfigErrors(e.data):$scope.handleGlobalError(e)}))}},$scope.validateFieldsManually=function(){var e=$scope.manualValidation[$scope.geocoder.id];return!e||e()},$scope.refreshTabs().then((function(o){var r=(0,t.default)(o).call(o,(function(o){return o.id===e.id}));r.length>0&&($scope.geocoder=r[0],$scope.geocoder.error&&$scope.handleGeocoderConfigErrors($scope.geocoder.error))}))}])},1029:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-geoservice/views/index.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<span><style>toggle.is-invalid~.invalid-feedback{display:block}</style> <div class="alert alert-danger" ng-if="globalError"> <span>{{globalError}}</span> <pre ng-show="globalErrorDetails">{{globalErrorDetails}}</pre> </div> <div class="w-100" ng-if="!globalError"> <ul id="tabs" class="nav nav-tabs"> <li role="presentation" class="nav-item"> <a ui-sref-active="active" ui-sref="geocoding.config" data-name="settings" class="nav-link">Settings</a> </li> <li role="presentation" ng-repeat="geocoder in geocoders" class="nav-item"> <a ui-sref-active="active" ui-sref="geocoding.details({\'id\': geocoder.id})" title="{{geocoder.name | capitalize}}" data-name="{{geocoder.id}}" class="nav-link"> {{geocoder.name | capitalize}} <span ng-if="geocoder.id === config.activeGeocoderId && !geocoder.error" class="text-success" title="Geocoder is enabled"><i class="fa fa-circle"></i></span> <span ng-if="geocoder.id === config.activeGeocoderId && geocoder.error" class="text-danger" title="Geocoder is enabled but not configured properly"><i class="fa fa-exclamation-triangle"></i></span> </a> </li> </ul> <div growl></div> <div class="card border-top-0"> <div class="card-body" ui-view> </div> </div> </div> </span>')}]),e.exports=o},1030:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-geoservice/views/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div> <form class="form" name="configForm"> <div ng-repeat="geocoder in geocoders"> <div class="mt-3 ml-2"> <label style="width:100px">{{geocoder.id | capitalize}}</label> <toggle id="{{geocoder.id}}-toggle" class="mr-2" ng-change="onGeocoderChange(geocoder)" ng-model="geocoder.active" size="btn-sm"></toggle> <span class="text-muted" ng-show="geocoder.active && geocoder.error"> <a ui-sref="geocoding.details({\'id\': geocoder.id})">Please configure the Geocoder</a> </span> </div> </div> </form> </div> ')}]),e.exports=o},1031:function(e,exports,o){var t={"./google.html":715,"./mapquest.html":716,"./nominatim.html":714};function r(e){var t=n(e);return o(t)}function n(e){if(!o.o(t,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t[e]}r.keys=function(){return Object.keys(t)},r.resolve=n,e.exports=r,r.id=1031},12:function(e,exports,o){"use strict";console.log("init: bootstrap-js");var jQuery=o(5);o(8),o(41),e.exports=jQuery},128:function(e,exports,o){"use strict";o(48),o(150),o(14),o(149);var t,r,n=u(o(107)),a=u(o(11)),s=u(o(29)),i=u(o(49)),l=u(o(245)),c=u(o(16)),d=u(o(103));function u(e){return e&&e.__esModule?e:{default:e}}var f="onms.elementList";window.ISO_8601_DATE_FORMAT="yyyy-MM-ddTHH:mm:ss.sssZ",window.ISO_8601_DATE_FORMAT_WITHOUT_MILLIS="yyyy-MM-ddTHH:mm:ssZ";var angular=o(3);o(5);o(12);var g=o(129),m=o(130),p=o(131),h=function(e){return"string"==typeof e?e.replace("!","%21").replace("$","%24").replace("'","%27").replace("(","%28").replace(")","%29").replace("+","%2B").replace(",","%2C").replace(";","%3B").replace("=","%3D"):e},v=function(e){for(var o=!0,t="",r=0;r<e.length;r++){switch(o||(t+=";"),t+=e[r].property,e[r].operator){case"EQ":t+="==";break;case"NE":t+="!=";break;case"LT":t+="=lt=";break;case"LE":t+="=le=";break;case"GT":t+="=gt=";break;case"GE":t+="=ge="}t+=h(e[r].value),o=!1}return t},y=function(e){for(var o=e.split(";"),t=[],r=[],n=0;n<o.length;n++){var s,i,l,c,d,u;(0,a.default)(s=o[n]).call(s,"==")>0?(t=o[n].split("=="),r.push({property:t[0],operator:"EQ",value:t[1]})):(0,a.default)(i=o[n]).call(i,"!=")>0?(t=o[n].split("!="),r.push({property:t[0],operator:"NE",value:t[1]})):(0,a.default)(l=o[n]).call(l,"=lt=")>0?(t=o[n].split("=lt="),r.push({property:t[0],operator:"LT",value:t[1]})):(0,a.default)(c=o[n]).call(c,"=le=")>0?(t=o[n].split("=le="),r.push({property:t[0],operator:"LE",value:t[1]})):(0,a.default)(d=o[n]).call(d,"=gt=")>0?(t=o[n].split("=gt="),r.push({property:t[0],operator:"GT",value:t[1]})):(0,a.default)(u=o[n]).call(u,"=ge=")>0&&(t=o[n].split("=ge="),r.push({property:t[0],operator:"GE",value:t[1]}))}return r},b=function(e,o,t){var r,n=e;return o<0?(n=0,r=0):r=Math.floor(o/t)*t,n=(n=n<0?0:n)>r?r:n,n=Math.floor(n/t)*t};(0,s.default)(t=(0,s.default)(r=angular.module("onmsListFilters",[])).call(r,"operator",(function(){return function(e,o){var t="string"==typeof o&&(0,a.default)(o).call(o,"*")>-1;switch(e){case"EQ":return t?"is like":"equals";case"NE":return t?"is not like":"does not equal";case"LT":return"is less than";case"LE":return"is less than or equal";case"GT":return"is greater than";case"GE":return"is greater than or equal";default:return e}}}))).call(t,"isNotEmpty",(function(){return function(e){return e&&("string"!=typeof e||""!==(0,i.default)(e).call(e))}})),angular.module(f,[]).config(["$locationProvider",function(e){e.hashPrefix(""),e.html5Mode({enabled:!0,rewriteLinks:!1})}]).directive("onmsListEditInPlace",(function(){return{controller:["$scope",function($scope){$scope.editing=!1,$scope.originalValue=angular.copy($scope.value),$scope.edit=function(){$scope.editing=!0},$scope.unedit=function(){$scope.editing=!1},$scope.onKeyup=function(e){27===e.keyCode&&$scope.cancel()},$scope.submit=function(){$scope.onSubmit(),$scope.originalValue=$scope.value,$scope.unedit()},$scope.cancel=function(){$scope.value=$scope.originalValue,$scope.unedit()}}],scope:{item:"=",value:"=",valueType:"=",step:"=",onSubmit:"&onSubmit"},templateUrl:g,transclude:!0}})).directive("onmsListEditListInPlace",["$window",function(e){return{controller:["$scope",function($scope){$scope.editing=!1,$scope.edit=function(){$scope.editing=!0},$scope.unedit=function(){$scope.newValue=null,$scope.editing=!1},$scope.onKeyup=function(e){switch(e.keyCode){case 13:$scope.add((0,l.default)($scope),$scope.newValue);break;case 27:$scope.unedit()}},$scope.confirmAndRemove=function(o,t){e.confirm('Are you sure you want to remove "'+t+'"?')&&((0,c.default)(o).call(o,(0,a.default)(o).call(o,t),1),$scope.onEdit())},$scope.add=function(e,o){e.push(o),(0,d.default)(e).call(e),$scope.onEdit(),$scope.unedit()}}],scope:{values:"=",valueType:"=",step:"=",onEdit:"&onEdit"},templateUrl:m,transclude:!0}}]).directive("onmsListEditMapInPlace",["$window",function(e){return{controller:["$scope",function($scope){$scope.editing=!1,$scope.edit=function(){$scope.editing=!0},$scope.unedit=function(){$scope.newKey=null,$scope.newValue=null,$scope.editing=!1},$scope.onKeyup=function(e){switch(e.keyCode){case 13:$scope.add((0,l.default)($scope),$scope.newKey,$scope.newValue);break;case 27:$scope.unedit()}},$scope.confirmAndRemove=function(o,t){e.confirm('Are you sure you want to remove "'+t+'"?')&&(delete o[t],$scope.onEdit())},$scope.add=function(e,o,t){e[o]=t,$scope.onEdit(),$scope.unedit()}}],scope:{values:"=",keyType:"=",valueType:"=",step:"=",onEdit:"&onEdit"},templateUrl:p,transclude:!0}}]).controller("ListCtrl",["$scope","$location","$window","$log","$filter",function($scope,e,o,t,r){t.debug("ListCtrl initializing..."),$scope.defaults={_s:"",searchClauses:[],limit:20,offset:0,orderBy:"",order:"asc"};var n=void 0===e.search().limit?$scope.defaults.limit:Number(e.search().limit)>0?Number(e.search().limit):$scope.defaults.limit;$scope.query={lastOffset:0,maxOffset:0,searchParam:void 0===e.search()._s?$scope.defaults._s:e.search()._s,searchClauses:void 0===e.search()._s?$scope.defaults.searchClauses:y(e.search()._s),limit:n,newLimit:n,offset:void 0===e.search().offset?$scope.defaults.offset:Number(e.search().offset)>0?b(Number(e.search().offset),Number.MAX_VALUE,n):$scope.defaults.offset,orderBy:void 0===e.search().orderBy?$scope.defaults.orderBy:e.search().orderBy,order:void 0===e.search().order?$scope.defaults.order:"asc"===e.search().order?"asc":"desc"},$scope.$watch("query",(function(){var o=angular.copy($scope.query);delete o.searchClauses,delete o.newLimit,delete o.lastOffset,delete o.maxOffset,o._s=""===o.searchParam?null:o.searchParam,delete o.searchParam,o.limit!==$scope.defaults.limit&&""!==o.limit||delete o.limit,o.offset!==$scope.defaults.offset&&""!==o.offset||delete o.offset,o.orderBy!==$scope.defaults.orderBy&&""!==o.orderBy||delete o.orderBy,o.order!==$scope.defaults.order&&""!==o.order||delete o.order,o._s!==$scope.defaults._s&&""!==o._s||delete o._s,e.search(o)}),!0),$scope.addSearchClause=function(e){angular.isDate(e.value)&&(e.value=r("date")(new Date(e.value),ISO_8601_DATE_FORMAT)),$scope.getSearchClause(e)||($scope.query.searchClauses.push(angular.copy(e)),$scope.query.searchParam=v($scope.query.searchClauses),$scope.refresh())},$scope.getSearchClause=function(e){for(var o=0;o<$scope.query.searchClauses.length;o++)if($scope.clauseEquals(e,$scope.query.searchClauses[o]))return $scope.query.searchClauses[o];return null},$scope.clauseEquals=function(e,o){return e.property===o.property&&e.operator===o.operator&&e.value===o.value},$scope.addEpochTimestampSearchClause=function(e){e.value=r("date")(e.value,ISO_8601_DATE_FORMAT),$scope.addSearchClause(e)},$scope.removeSearchClause=function(e){var o,t;(0,c.default)(o=$scope.query.searchClauses).call(o,(0,a.default)(t=$scope.query.searchClauses).call(t,e),1),$scope.query.searchParam=v($scope.query.searchClauses),$scope.refresh()},$scope.removeSearchClauses=function(e){for(var o=0;o<e.length;o++){var t,r,n=(0,a.default)(t=$scope.query.searchClauses).call(t,e[o]);if(n>=0)(0,c.default)(r=$scope.query.searchClauses).call(r,n,1)}$scope.query.searchParam=v($scope.query.searchClauses),$scope.refresh()},$scope.replaceSearchClause=function(e,o){angular.isDate(o.value)&&(o.value=r("date")(new Date(o.value),ISO_8601_DATE_FORMAT));var t=$scope.getSearchClause(e),n=$scope.getSearchClause(o);t?n?$scope.removeSearchClause(e):(t.property=o.property,t.operator=o.operator,t.value=o.value,$scope.query.searchParam=v($scope.query.searchClauses),$scope.refresh()):n||$scope.addSearchClause(o)},$scope.clearSearch=function(){$scope.query.searchClauses.length>0&&($scope.query.searchClauses=[],$scope.query.searchParam="",$scope.refresh())},$scope.changeOrderBy=function(e){$scope.query.orderBy===e?$scope.query.order="asc"===$scope.query.order?"desc":"asc":($scope.query.orderBy=e,$scope.query.order=$scope.defaults.order),$scope.refresh()},$scope.setOffset=function(e){var o=b(e,$scope.query.maxOffset,$scope.query.limit);$scope.query.offset!==o&&($scope.query.offset=o,$scope.refresh())},$scope.setLimit=function(e){e<1?$scope.query.newLimit=$scope.query.limit:$scope.query.limit!==e&&($scope.query.limit=e,$scope.query.offset=b($scope.query.offset,$scope.query.maxOffset,$scope.query.limit),$scope.refresh())},$scope.refresh=function(){t.warn("You need to override $scope.$parent.refresh() in your controller")},$scope.update=function(){t.warn("You need to override $scope.$parent.update() in your controller")},$scope.deleteItem=function(e){t.warn("You need to override $scope.$parent.deleteItem() in your controller")},t.debug("ListCtrl initialized")}]).run(["$rootScope","$log",function(e,o){o.debug("Finished initializing "+f)}]),e.exports={appendTransform:function(e,o){var t=angular.isArray(e)?e:[e];return(0,n.default)(t).call(t,o)},toFiql:v,fromFiql:y,parseContentRange:function(e){if(!e)return{start:0,end:0,total:0};var o=/items\s+?(\d+)\s*-\s*(\d+)\s*\/\s*(\d+)/;return{start:Number(e.replace(o,"$1")),end:Number(e.replace(o,"$2")),total:Number(e.replace(o,"$3"))}},escapeSearchValue:h,normalizeOffset:b}},129:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editInPlace.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<form class="form-inline" ng-submit="submit()" style="margin:0"> <input ng-show="editing" ng-keyup="onKeyup($event)" type="{{valueType}}" step="{{step}}" ng-model="value"> <span style="line-height:24px" ng-hide="editing" ng-click="edit()">{{value}}&nbsp;</span> <a href style="text-decoration:none" ng-click="edit()" ng-hide="editing"><i class="fa fa-edit fa-lg"></i></a> <a href style="text-decoration:none" ng-click="submit()" ng-show="editing"><i class="fa fa-check fa-lg"></i></a> <a href style="text-decoration:none" ng-click="cancel()" ng-show="editing"><i class="fa fa-close fa-lg"></i></a> <span ng-transclude></span> </form> ')}]),e.exports=o},130:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editListInPlace.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<span> <span ng-repeat="value in values"> <button class="btn btn-sm btn-secondary" ng-click="confirmAndRemove(values, value)" style="margin-bottom:3px;margin-right:3px"> {{value}}&nbsp;<i class="fa fa-close"></i> </button> </span> <span style="line-height:24px" ng-hide="editing"> <a href style="text-decoration:none" ng-click="edit()"><i class="fa fa-edit fa-lg"></i></a>&nbsp; </span> <span ng-show="editing" class="text-nowrap"> <input type="{{valueType}}" ng-keyup="onKeyup($event)" ng-model="newValue"> <a href style="text-decoration:none" ng-click="add(values, newValue)"><i class="fa fa-plus fa-lg"></i></a> <a href style="text-decoration:none" ng-click="unedit()"><i class="fa fa-close fa-lg"></i></a> </span> <span ng-transclude></span> </span>')}]),e.exports=o},131:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editMapInPlace.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<span> <span ng-repeat="(key,value) in values"> <button class="btn btn-sm btn-secondary" ng-click="confirmAndRemove(values, key)" style="margin-bottom:3px;margin-right:3px"> <b>{{key}}:</b> {{value}}&nbsp;<i class="fa fa-close"></i> </button> </span> <span style="line-height:24px" ng-hide="editing"> <a href style="text-decoration:none" ng-click="edit()"><i class="fa fa-edit fa-lg"></i></a>&nbsp; </span> <span ng-show="editing" class="text-nowrap"> <input type="{{keyType}}" ng-keyup="onKeyup($event)" ng-model="newKey"> <input type="{{valueType}}" ng-keyup="onKeyup($event)" ng-model="newValue"> <a href style="text-decoration:none" ng-click="add(values, newKey, newValue)"><i class="fa fa-plus fa-lg"></i></a> <a href style="text-decoration:none" ng-click="unedit()"><i class="fa fa-close fa-lg"></i></a> </span> <span ng-transclude></span> </span>')}]),e.exports=o},22:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/lib/onms-http/403-permission-denied.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<span> <div class="modal-header"> <h3><i class="fa fa-exclamation-triangle text-warning"></i> Permission Denied</h3> </div> <div class="modal-body"> <h5> You are not allowed to perform the requested action. </h5> <p class="text-muted"> This is not supposed to happen. Please reload the page and contact your administrator if this occurs more often. </p> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="reload()">Reload</button> </div> </span>')}]),e.exports=o},26:function(e,exports,o){"use strict";var t=o(15),r=o(17),n=o(18);t(exports,"__esModule",{value:!0}),exports.default=void 0,o(14);var a,s=(a=o(21))&&a.__esModule?a:{default:a};function i(e){return i="function"==typeof r&&"symbol"==typeof n?function(e){return typeof e}:function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":typeof e},i(e)}function l(e,o){for(var r=0;r<o.length;r++){var n=o[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),t(e,(a=n.key,l=void 0,l=function(e,o){if("object"!==i(e)||null===e)return e;var t=e[s.default];if(void 0!==t){var r=t.call(e,o||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(a,"string"),"symbol"===i(l)?l:String(l)),n)}var a,l}var c=function(){function e(){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e)}var o,r,n;return o=e,n=[{key:"getBaseHref",value:function(){var e=document.getElementsByTagName("base")[0];return e?e.href:""}},{key:"setLocation",value:function(o){window&&window.location&&(window.location.href=e.getBaseHref()+o)}},{key:"toggle",value:function(e,o){var t=document.getElementsByName(o);for(var r in t)t.hasOwnProperty(r)&&(t[r].checked=e)}}],(r=null)&&l(o.prototype,r),n&&l(o,n),t(o,"prototype",{writable:!1}),e}();exports.default=c},3:function(e,exports,o){"use strict";o(5);var angular=o(40);o(53),o(54),o(55),o(56),o(51),o(57),o(58),o(59),o(60),o(12),o(61),o(62),console.log("init: angular-js "+angular.version.full),e.exports=window.angular=angular},42:function(e,exports,o){"use strict";var t,r=(t=o(26))&&t.__esModule?t:{default:t};var angular=o(3);o(10);var n=o(43),a=o(44);angular.module("onms-search",["onms.http","ui.bootstrap"]).config(["$locationProvider",function(e){e.hashPrefix("")}]).directive("onmsSearchNodes",(function(){return{restrict:"E",transclude:!0,templateUrl:a,controller:"NodeSearchCtrl"}})).directive("onmsSearchKsc",(function(){return{restrict:"E",transclude:!0,templateUrl:n,controller:"KscSearchCtrl"}})).controller("NodeSearchCtrl",["$scope","$window","$http",function($scope,e,o){$scope.getNodes=function(e){return o({url:"rest/nodes",method:"GET",params:{label:e,comparator:"contains"}}).then((function(e){return e.data.node}))},$scope.goToChooseResources=function(o){e.location.href=r.default.getBaseHref()+"graph/chooseresource.jsp?node="+o.id}}]).controller("KscSearchCtrl",["$scope","$window","$http","$filter",function($scope,e,o,t){$scope.getKscReports=function(e){return o({url:"rest/ksc",method:"GET"}).then((function(o){return t("filter")(o.data.kscReport,e)}))},$scope.goToKscReport=function(o){e.location.href=r.default.getBaseHref()+"KSC/customView.htm?type=custom&report="+o.id}}])},43:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/search/template.ksc.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div class="form-group"> <div class="input-group"> <input type="text" class="form-control" ng-model="asyncKsc" placeholder="Type the KSC report name" uib-typeahead="ksc as ksc.label for ksc in getKscReports($viewValue)" typeahead-editable="false" typeahead-loading="kscLoadingNodes" typeahead-no-results="kscNoResults" typeahead-min-length="1" typeahead-on-select="goToKscReport($item)"> <div class="input-group-append"> <span class="input-group-text"><i class="fa fa-search"></i></span> </div> </div> <i ng-show="kscLoadingNodes" class="fa fa-refresh"></i> <p class="form-text text-muted" ng-show="kscNoResults"> <i class="fa fa-remove"></i> No Results Found </p> </div> ')}]),e.exports=o},44:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/search/template.nodes.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div class="form-group"> <div class="input-group"> <input type="text" class="form-control" ng-model="asyncNode" placeholder="Type the node label" uib-typeahead="node as node.label for node in getNodes($viewValue)" typeahead-editable="false" typeahead-loading="nodeLoadingNodes" typeahead-no-results="nodeNoResults" typeahead-min-length="1" typeahead-on-select="goToChooseResources($item)"> <div class="input-group-append"> <span class="input-group-text"><i class="fa fa-search"></i></span> </div> </div> <i ng-show="nodeLoadingNodes" class="fa fa-refresh"></i> <p class="form-text text-muted" ng-show="nodeNoResults"> <i class="fa fa-remove"></i> No Results Found </p> </div> ')}]),e.exports=o},45:function(e,exports,o){"use strict";o(13);var t=i(o(69)),r=i(o(9)),n=i(o(11)),a=i(o(46)),s=i(o(16));function i(e){return e&&e.__esModule?e:{default:e}}var angular=o(3);o(10),o(90),o(91),o(80);var l=o(47),c=function(e,o){o.data?e.error=o.data:e.error="An unexpected error occurred while handling the request"};angular.module("onms.central.search",["angular-loading-bar","ngResource","ui.router","onms.http"]).config(["$locationProvider",function(e){e.hashPrefix("")}]).directive("onmsCentralSearch",(function(){return{restrict:"E",transclude:!1,templateUrl:l,controller:"QuickSearchController"}})).factory("SearchResource",["$resource",function(e){return e("api/v2/search",{},{query:{method:"GET",isArray:!0,cancellable:!0}})}]).controller("QuickSearchController",["$scope","SearchResource","$timeout","$document",function($scope,e,o,i){var l=13,d=16,u=27,f=38,g=40,m="Group",p="Item",h="More";$scope.query="",$scope.results={},$scope.performSearchExecuted=!1,$scope.showLoadingIndicator=!1,$scope.showLoadingIndicatorDelay=250,$scope.performSearchDelay=500,$scope.performSearchPromise=void 0,$scope.performSearchHandle=void 0,$scope.showLoadingIndicatorPromise=void 0,$scope.shiftLastPressed=void 0,$scope.selectedIndex=0,(0,t.default)(i).call(i,"mousedown",(function(e){var t=$("#onms-search-form").has(e.target).length>0,r=$("#onms-search-form").is(e.target);t||r||o((function(){$scope.resetQuery(),$scope.cancelRequest()}))})),(0,t.default)(i).call(i,"keyup",(function(e){o((function(){e.keyCode===d&&new Date-$scope.shiftLastPressed<=350?(angular.element("#onms-search-query").focus(),angular.element("#onms-search-query").select(),$scope.shiftLastPressed=void 0):e.keyCode===d&&($scope.shiftLastPressed=new Date),e.keyCode===u&&($scope.resetQuery(),$scope.cancelRequest())}))})),(0,t.default)(i).call(i,"keydown",(function(e){o((function(){if($scope.results.length>0){var t=document.getElementById("onms-search-result-item-"+$scope.selectedIndex);if(e.keyCode===f||e.keyCode===g){$scope.navigateSearchResult(e.keyCode);var r=document.getElementById("onms-search-result"),n=r.clientHeight,a=t.clientHeight,s=t.offsetTop;s+a+25>=n+r.scrollTop&&(r.scrollTop=s),0!==r.scrollTop&&r.scrollTop>s-a&&(r.scrollTop=s-a)}e.keyCode===l&&($scope.results[$scope.selectedIndex].type===h?o((function(){angular.element(t).triggerHandler("click")}),0):($scope.resetQuery(),$scope.cancelRequest(),t.click()))}}))})),$scope.navigateSearchResult=function(e){switch($scope.results[$scope.selectedIndex].selected=!1,e){case f:$scope.selectedIndex--;break;case g:$scope.selectedIndex++}$scope.selectedIndex<1&&($scope.selectedIndex=1),$scope.selectedIndex>=$scope.results.length&&($scope.selectedIndex=$scope.results.length-1),$scope.results[$scope.selectedIndex].type===m?$scope.navigateSearchResult(e):$scope.results[$scope.selectedIndex].selected=!0},$scope.resetQuery=function(){$scope.query="",$scope.results=[],$scope.performSearchExecuted=!1,$scope.performSearchHandle&&$scope.performSearchHandle.$cancelRequest()},$scope.cancelRequest=function(){$scope.performSearchHandle&&$scope.performSearchHandle.$cancelRequest(),$scope.showLoadingIndicator=!1,o.cancel($scope.showLoadingIndicatorPromise)},$scope.select=function(e){var o=e||1;$scope.selectedIndex>=1&&($scope.results[$scope.selectedIndex].selected=!1),$scope.selectedIndex=o,$scope.results[$scope.selectedIndex].selected=!0},$scope.onQueryChange=function(){0!=$scope.query.length?$scope.query.length<3||(o.cancel($scope.performSearchPromise),$scope.results=[],$scope.performSearchExecuted=!1,$scope.performSearchPromise=o((function(){o.cancel($scope.showLoadingIndicatorPromise),$scope.showLoadingIndicatorPromise=o((function(){$scope.showLoadingIndicator=!0}),$scope.showLoadingIndicatorDelay),$scope.performSearchHandle&&$scope.performSearchHandle.$cancelRequest(),$scope.error=void 0,$scope.performSearchHandle=e.query({_s:$scope.query},(function(o){$scope.cancelRequest(),$scope.performSearchExecuted=!0;var t=[];(0,r.default)(o).call(o,(function(o){var i;if(t.push({context:o.context.name,label:o.results.length>1?o.context.name+"s":o.context.name,type:m,count:o.results.length,more:o.more}),(0,r.default)(i=o.results).call(i,(function(e){e.type=p,t.push(e)})),!0===o.more){var l={context:o.context.name,count:o.results.length,type:h,loadMore:function(){$scope.error=void 0,e.query({_s:$scope.query,_l:this.count+10,_c:this.context},(function(e){var o,t,i,c,d=(0,n.default)(o=$scope.results).call(o,l),u=e[0],f=(0,a.default)(t=u.results).call(t,d-1);(0,r.default)(f).call(f,(function(e,o){var t;e.type=p,(0,s.default)(t=$scope.results).call(t,d+o,0,e),l.count++})),l.selected=!1,$scope.results[$scope.selectedIndex].selected=!0,!1===u.more&&(0,s.default)(i=$scope.results).call(i,(0,n.default)(c=$scope.results).call(c,l),1)}),(function(e){$scope.performSearchExecuted=!0,c($scope,e)}))},selected:!1};t.push(l)}})),$scope.results=t,0!=$scope.results.length&&($scope.selectedIndex=1,$scope.results[$scope.selectedIndex].selected=!0)}),(function(e){e.status>=0&&($scope.performSearchExecuted=!0,c($scope,e),$scope.cancelRequest())}))}),$scope.performSearchDelay)):$scope.resetQuery()}}])},47:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-central-search/quicksearch.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<span> <style>.search-result{max-height:700px;min-width:280px;max-width:60%;position:absolute;top:100%;z-index:100000;overflow:auto;border:#343a40 solid 1px}.search-result .list-group-item{padding:.25rem .75rem;font-size:90%}.search-result .list-group-item:last-child{border-bottom-right-radius:0;border-bottom-left-radius:0}.search-bar .form-control{border:none;outline:0;box-shadow:none;border-radius:1rem;padding:0}.search-bar .input-group-text{border-top-left-radius:1rem;border-bottom-left-radius:1rem;background-color:#fff;border-color:#fff}.search-result .list-group-item:hover{background-color:#e9ecef}.selected{background-color:#e9ecef}</style> <form id="onms-search-form" autocomplete="off" novalidate class="form-inline"> <input autocomplete="false" name="hidden" type="text" style="display:none"> <div class="input-group search-bar"> <div class="input-group-prepend"> <div class="input-group-text"><i class="fa fa-search"></i></div> </div> <label class="form-control"> <input id="onms-search-query" ng-change="onQueryChange()" ng-focus="input.focus=true" ng-blur="input.focus=false" ng-model="query" type="text" class="form-control" placeholder="Search..." aria-label="Search"> <small class="text-muted mr-4 quick-search-chevron" ng-show="!input.focus"> <span></span> <span></span> </small> </label> <div ng-if="showLoadingIndicator" class="btn btn-secondary rounded-0"> <div class="spinner-border spinner-border-sm text-white" role="status"></div> <span class="sr-only">Loading...</span> </div> <div ng-if="performSearchExecuted === true && !showLoadingIndicator" class="input-group-append"> <button class="btn btn-secondary" type="button" title="Reset Search" ng-click="resetQuery()"><i class="fa fa-times"></i></button> </div> <div ng-if="showLoadingIndicator" class="input-group-append"> <button class="btn btn-secondary" type="button" title="Cancel Request" ng-click="cancelRequest()"><i class="fa fa-times"></i></button> </div> </div> <div ng-if="performSearchExecuted === true" class="bg-dark search-result rounded-bottom" id="onms-search-result"> <div class="list-group" ng-if="results.length > 0"> <div id="onms-search-result-item-{{$index}}" ng-repeat-start="item in results track by $index" ng-if="item.type === \'Group\'" class="list-group-item bg-dark text-grey border-0 pl-2"> <span ng-if="!item.t">{{item.label}}</span> </div> <a id="onms-search-result-item-{{$index}}" ng-class="{\'selected\': item.selected}" ng-if="item.type === \'More\'" ng-click="item.loadMore()" class="list-group-item list-group-item-action" href ng-mouseover="select($index)">more...</a> <a id="onms-search-result-item-{{$index}}" ng-class="{\'selected\': item.selected}" ng-repeat-end ng-if="item.type === \'Item\'" href="{{item.url}}" class="list-group-item list-group-item-action" ng-mouseover="select($index)" ng-click="resetQuery()"> <h6 class="mb-0"><i class="{{item.icon}}" ng-if="item.icon">&nbsp;</i>{{item.label}} <i style="-webkit-transform:scaleY(-1);transform:scaleY(-1)" class="fa fa-reply pull-right" ng-if="item.selected"></i></h6> <small class="mr-4" ng-class="{\'text-muted\': !item.selected}" ng-repeat="match in item.matches">{{match.label}}: {{match.value}}</small> <br ng-if="item.info !== \'\'"> <small class="mr-4" ng-class="{\'text-muted\': !item.selected}" ng-if="item.info !== \'\'">{{item.info}}</small> </a> </div> <div ng-if="!error && results.length === 0" class="text-grey"> <span>No Results found</span> </div> <div ng-if="error" class="alert alert-danger mx-2 my-2"> <span>{{error}}</span> </div> </div> </form> </span> ')}]),e.exports=o},5:function(e,exports,o){"use strict";console.log("init: jquery-js");var jQuery=o(7);o(28),e.exports=jQuery},63:function(e,exports,o){"use strict";var angular=o(3);o(42),o(45);angular.module("onms.default.apps",["onms.central.search","onms-search"])},714:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-geoservice/views/config/nominatim.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div> <div class="jumbotron"> <p> Nominatim is a search engine for OpenStreetMap data. It allows to look up the coordinates for a given address (forward search). </p> <p> For more information visit the <a href="https://wiki.openstreetmap.org/wiki/Nominatim" target="_blank">Nominatim Wiki Page</a>. </p> <p> Please note, that all usage of the Nominatim Service must follow the <a href="https://operations.osmfoundation.org/policies/nominatim/" target="_blank">Nominatim Usage Policy</a>. </p> </div> <form class="form" name="form"> <div class="form-group"> <label for="nominatimEmail">Email</label> <input id="nominatimEmail" name="nominatimEmail" class="form-control" type="email" ng-required="true" ng-model="geocoder.config.email" ng-class="{ \'is-invalid\' : form.nominatimEmail.$invalid || configError.email }"> <p id="configError.email" class="invalid-feedback">{{configError.email || "Please provide a valid email address"}}</p> </div> <div class="form-group"> <label for="nominatimUserAgent">User Agent</label> <input id="nominatimUserAgent" name="nominatimUserAgent" class="form-control" type="text" ng-model="geocoder.config.userAgent" ng-change="validateFieldsManually()" ng-class="{ \'is-invalid\' : form.nominatimUserAgent.$invalid || configError.userAgent }"> <p id="configError.userAgent" class="invalid-feedback">{{configError.userAgent || "User Agent or Referer must be set"}}</p> </div> <div class="form-group"> <label for="nominatimReferer">Referer</label> <input id="nominatimReferer" name="nominatimReferer" class="form-control" type="text" ng-model="geocoder.config.referer" ng-change="validateFieldsManually()" ng-class="{ \'is-invalid\' : form.nominatimReferer.$invalid || configError.referer }"> <p id="configError.referer" class="invalid-feedback">{{configError.referer || "User Agent or Referer must be set"}}</p> </div> <div class="form-group"> <label style="width:180px" for="nominatimAcceptUsageTerms">Accept <a href="https://operations.osmfoundation.org/policies/nominatim/" target="_blank">Usage Terms <i class="fa fa-share-square-o"></i></a></label> <toggle id="nominatimAcceptUsageTerms" name="nominatimAcceptUsageTerms" on="Yes" off="No" size="btn-sm" width="51px" ng-model="geocoder.config.acceptUsageTerms" ng-class="{ \'is-invalid\' : form.nominatimAcceptUsageTerms.$invalid || geocoder.config.acceptUsageTerms === false || configError.acceptUsageTerms }"></toggle> <p id="configError.acceptUsageTerms" class="invalid-feedback">{{configError.acceptUsageTerms || "Please accept the usage terms"}}</p> </div> <div class="form-group"> <label style="width:180px" for="nominatimSystemProxy">Use System Proxy</label> <toggle id="nominatimSystemProxy" name="nominatimSystemProxy" on="Yes" off="No" size="btn-sm" width="51px" ng-model="geocoder.config.useSystemProxy" ng-class="{ \'is-invalid\' : form.nominatimSystemProxy.$invalid || configError.useSystemProxy }"></toggle> <p id="configError.useSystemProxy" class="invalid-feedback">{{configError.useSystemProxy}}</p> </div> <p class="text-warning" ng-if="form.$dirty">You have unsaved changes</p> <button id="saveButton" class="btn btn-primary" type="button" ng-click="save()" ng-disabled="!form.$dirty || form.$invalid || validateFieldsManually() !== true"><i class="fa fa-save"></i> Save</button> </form> </div>')}]),e.exports=o},715:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-geoservice/views/config/google.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div> <form class="form" name="form"> <div class="jumbotron"> <p> The Google Geocoding API is a service that provides geocoding and reverse geocoding of addresses. </p> <p> For more information refer to the <a href="https://developers.google.com/maps/documentation/geocoding/start" target="_blank">official documentation</a>. </p> </div> <div class="form-group"> <div class="form-check"> <input class="form-check-input" type="checkbox" id="googleClientIdAuthentication" name="googleClientIdAuthentication" ng-model="geocoder.config.useEnterpriseCredentials"> <label class="form-check-label" for="googleClientIdAuthentication"> Use clientId and signature to authenticate </label> </div> </div> <div class="form-group" ng-if="!geocoder.config.useEnterpriseCredentials"> <label for="googleApiKey">API Key</label> <input id="googleApiKey" name="googleApiKey" class="form-control" type="text" ng-required="true" ng-model="geocoder.config.apiKey" ng-class="{ \'is-invalid\' : form.googleApiKey.$invalid || configError.apiKey }"> <p id="configError.apiKey" class="invalid-feedback">{{configError.apiKey || "Please provide a value"}}</p> </div> <div class="form-group" ng-if="geocoder.config.useEnterpriseCredentials"> <label for="googleClientId">Client ID</label> <input id="googleClientId" name="googleClientId" class="form-control" type="text" ng-required="true" ng-model="geocoder.config.clientId" ng-class="{ \'is-invalid\' : form.googleClientId.$invalid || configError.clientId }"> <p id="configError.clientId" class="invalid-feedback">{{configError.clientId || "Please provide a value"}}</p> </div> <div class="form-group" ng-if="geocoder.config.useEnterpriseCredentials"> <label for="googleClientKey">Signature</label> <input id="googleClientKey" name="googleClientKey" class="form-control" type="text" ng-required="true" ng-model="geocoder.config.signature" ng-class="{ \'is-invalid\' : form.googleClientKey.$invalid || configError.signature }"> <p id="configError.signature" class="invalid-feedback">{{configError.signature || "Please provide a value"}}</p> </div> <div class="form-group"> <label for="googleTimeout">Timeout (ms)</label> <input id="googleTimeout" name="googleTimeout" min="0" class="form-control" type="number" ng-model="geocoder.config.timeout" ng-class="{ \'is-invalid\' : form.googleTimeout.$invalid || configError.timeout }"> <p id="configError.timeout" class="invalid-feedback">{{configError.timeout || "Timeout must be &gt;= 0"}}</p> </div> <div class="form-group"> <label class="mr-2" for="googleSystemProxy">Use System Proxy</label> <toggle id="googleSystemProxy" name="googleSystemProxy" ng-model="geocoder.config.useSystemProxy" on="Yes" off="No" size="btn-sm" width="51px" ng-class="{ \'is-invalid\' : form.googleSystemProxy.$invalid || configError.useSystemProxy }"></toggle> <p id="configError.useSystemProxy" class="invalid-feedback">{{configError.useSystemProxy}}</p> </div> <p class="text-warning" ng-if="form.$dirty">You have unsaved changes</p> <button id="saveButton" class="btn btn-primary" type="button" ng-click="save()" ng-disabled="!form.$dirty || form.$invalid || validateFieldsManually() !== true"><i class="fa fa-save"></i> Save</button> </form> </div>')}]),e.exports=o},716:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-geoservice/views/config/mapquest.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div> <div class="jumbotron"> <p> In order to use Mapquest, you must register and sign up for an API Key. </p> <p> For more information visit the <a href="https://developer.mapquest.com/documentation/geocoding-api/" target="_blank">Mapquest Geocoding API Page</a>. </p> </div> <form class="form" name="form"> <div class="form-group"> <label for="mapquestApiKey">API Key</label> <input id="mapquestApiKey" name="mapquestApiKey" class="form-control" type="text" ng-required="true" ng-model="geocoder.config.apiKey" ng-class="{ \'is-invalid\' : form.mapquestApiKey.$invalid || configError.apiKey }"> <p id="configError.apiKey" class="invalid-feedback">{{configError.apiKey || "Please provide a value"}}</p> </div> <div class="form-group"> <label for="mapquestSystemProxy" class="mr-2">Use System Proxy</label> <toggle id="mapquestSystemProxy" name="mapquestSystemProxy" ng-model="geocoder.config.useSystemProxy" on="Yes" off="No" size="btn-sm" width="51px" ng-class="{ \'is-invalid\' : form.mapquestSystemProxy.$invalid || configError.useSystemProxy }"></toggle> <p id="configError.useSystemProxy" class="invalid-feedback">{{configError.useSystemProxy}}</p> </div> <p class="text-warning" ng-if="form.$dirty">You have unsaved changes</p> <button id="saveButton" class="btn btn-primary" type="button" ng-click="save()" ng-disabled="!form.$dirty || form.$invalid || validateFieldsManually() !== true"><i class="fa fa-save"></i> Save</button> </form> </div>')}]),e.exports=o},8:function(e,exports,o){"use strict";console.log("init: moment-js");var t=o(1);o(35),o(36),e.exports=t}},[[1028,0]]])}));
//# sourceMappingURL=onms-geoservice.min.js.map