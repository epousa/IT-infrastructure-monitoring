L.LineUtil={simplify:function(t,n){if(!n||!t.length)return t.slice();var i=n*n;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,n,i){return Math.sqrt(this._sqClosestPointOnSegment(t,n,i,!0))},closestPointOnSegment:function(t,n,i){return this._sqClosestPointOnSegment(t,n,i)},_simplifyDP:function(t,n){var i=t.length,e=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);e[0]=e[i-1]=1,this._simplifyDPStep(t,e,n,0,i-1);var s,r=[];for(s=0;s<i;s++)e[s]&&r.push(t[s]);return r},_simplifyDPStep:function(t,n,i,e,s){var r,o,y,u=0;for(o=e+1;o<=s-1;o++)(y=this._sqClosestPointOnSegment(t[o],t[e],t[s],!0))>u&&(r=o,u=y);u>i&&(n[r]=1,this._simplifyDPStep(t,n,i,e,r),this._simplifyDPStep(t,n,i,r,s))},_reducePoints:function(t,n){for(var i=[t[0]],e=1,s=0,r=t.length;e<r;e++)this._sqDist(t[e],t[s])>n&&(i.push(t[e]),s=e);return s<r-1&&i.push(t[r-1]),i},clipSegment:function(t,n,i,e,s){var r,o,y,u=e?this._lastCode:this._getBitCode(t,i),f=this._getBitCode(n,i);for(this._lastCode=f;;){if(!(u|f))return[t,n];if(u&f)return!1;r=u||f,o=this._getEdgeIntersection(t,n,r,i,s),y=this._getBitCode(o,i),r===u?(t=o,u=y):(n=o,f=y)}},_getEdgeIntersection:function(t,n,i,e,s){var r,o,y=n.x-t.x,u=n.y-t.y,f=e.min,x=e.max;return 8&i?(r=t.x+y*(x.y-t.y)/u,o=x.y):4&i?(r=t.x+y*(f.y-t.y)/u,o=f.y):2&i?(r=x.x,o=t.y+u*(x.x-t.x)/y):1&i&&(r=f.x,o=t.y+u*(f.x-t.x)/y),new L.Point(r,o,s)},_getBitCode:function(t,n){var i=0;return t.x<n.min.x?i|=1:t.x>n.max.x&&(i|=2),t.y<n.min.y?i|=4:t.y>n.max.y&&(i|=8),i},_sqDist:function(t,n){var i=n.x-t.x,e=n.y-t.y;return i*i+e*e},_sqClosestPointOnSegment:function(t,n,i,e){var s,r=n.x,o=n.y,y=i.x-r,u=i.y-o,f=y*y+u*u;return f>0&&((s=((t.x-r)*y+(t.y-o)*u)/f)>1?(r=i.x,o=i.y):s>0&&(r+=y*s,o+=u*s)),y=t.x-r,u=t.y-o,e?y*y+u*u:new L.Point(r,o)}};