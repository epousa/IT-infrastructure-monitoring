OpenLayers.Control.ZoomBox=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,out:!1,alwaysZoom:!1,draw:function(){this.handler=new OpenLayers.Handler.Box(this,{done:this.zoomBox},{keyMask:this.keyMask})},zoomBox:function(t){if(t instanceof OpenLayers.Bounds){var e;if(this.out){var o=Math.abs(t.right-t.left),a=Math.abs(t.top-t.bottom),s=Math.min(this.map.size.h/a,this.map.size.w/o),n=this.map.getExtent(),i=this.map.getLonLatFromPixel(t.getCenterPixel()),m=i.lon-n.getWidth()/2*s,h=i.lon+n.getWidth()/2*s,r=i.lat-n.getHeight()/2*s,p=i.lat+n.getHeight()/2*s;e=new OpenLayers.Bounds(m,r,h,p)}else{var l=this.map.getLonLatFromPixel(new OpenLayers.Pixel(t.left,t.bottom)),L=this.map.getLonLatFromPixel(new OpenLayers.Pixel(t.right,t.top));e=new OpenLayers.Bounds(l.lon,l.lat,L.lon,L.lat)}var g=this.map.getZoom();this.map.zoomToExtent(e),g==this.map.getZoom()&&1==this.alwaysZoom&&this.map.zoomTo(g+(this.out?-1:1))}else this.out?this.map.setCenter(this.map.getLonLatFromPixel(t),this.map.getZoom()-1):this.map.setCenter(this.map.getLonLatFromPixel(t),this.map.getZoom()+1)},CLASS_NAME:"OpenLayers.Control.ZoomBox"});