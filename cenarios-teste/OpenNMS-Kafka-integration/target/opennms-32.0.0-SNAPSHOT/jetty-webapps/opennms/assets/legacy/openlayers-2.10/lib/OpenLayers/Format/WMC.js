OpenLayers.Format.WMC=OpenLayers.Class(OpenLayers.Format.Context,{defaultVersion:"1.1.0",getParser:function(e){var t=e||this.version||this.defaultVersion;if(!this.parser||this.parser.VERSION!=t){var a=OpenLayers.Format.WMC["v"+t.replace(/\./g,"_")];if(!a)throw"Can't find a WMC parser for version "+t;this.parser=new a(this.options)}return this.parser},layerToContext:function(e){var t=this.getParser();return{queryable:e.queryable,visibility:e.visibility,name:e.params.LAYERS,title:e.name,metadataURL:e.metadataURL,version:e.params.VERSION,url:e.url,maxExtent:e.maxExtent,transparent:e.params.TRANSPARENT,numZoomLevels:e.numZoomLevels,units:e.units,isBaseLayer:e.isBaseLayer,opacity:e.opacity,displayInLayerSwitcher:e.displayInLayerSwitcher,singleTile:e.singleTile,tileSize:e.singleTile||!e.tileSize?void 0:{width:e.tileSize.w,height:e.tileSize.h},minScale:e.options.resolutions||e.options.scales||e.options.maxResolution||e.options.minScale?e.minScale:void 0,maxScale:e.options.resolutions||e.options.scales||e.options.minResolution||e.options.maxScale?e.maxScale:void 0,formats:[{value:e.params.FORMAT,current:!0}],styles:[{href:e.params.SLD,body:e.params.SLD_BODY,name:e.params.STYLES||t.defaultStyleName,title:t.defaultStyleTitle,current:!0}]}},toContext:function(e){var t={},a=e.layers;if("OpenLayers.Map"==e.CLASS_NAME?(t.bounds=e.getExtent(),t.maxExtent=e.maxExtent,t.projection=e.projection,t.size=e.getSize()):(OpenLayers.Util.applyDefaults(t,e),null!=t.layers&&delete t.layers),null==t.layersContext&&(t.layersContext=[]),null!=a&&a instanceof Array)for(var s=0,r=a.length;s<r;s++){var i=a[s];i instanceof OpenLayers.Layer.WMS&&t.layersContext.push(this.layerToContext(i))}return t},CLASS_NAME:"OpenLayers.Format.WMC"});