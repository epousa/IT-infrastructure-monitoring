OpenLayers.Format.JSON=OpenLayers.Class(OpenLayers.Format,{indent:"    ",space:" ",newline:"\n",level:0,pretty:!1,initialize:function(t){OpenLayers.Format.prototype.initialize.apply(this,[t])},read:function(json,filter){try{if(/^[\],:{}\s]*$/.test(json.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){var object=eval("("+json+")");if("function"==typeof filter){function walk(t,e){if(e&&"object"==typeof e)for(var r in e)e.hasOwnProperty(r)&&(e[r]=walk(r,e[r]));return filter(t,e)}object=walk("",object)}return this.keepData&&(this.data=object),object}}catch(t){}return null},write:function(t,e){this.pretty=!!e;var r=null,i=typeof t;if(this.serialize[i])try{r=this.serialize[i].apply(this,[t])}catch(t){OpenLayers.Console.error("Trouble serializing: "+t)}return r},writeIndent:function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")},writeNewline:function(){return this.pretty?this.newline:""},writeSpace:function(){return this.pretty?this.space:""},serialize:{object:function(t){if(null==t)return"null";if(t.constructor==Date)return this.serialize.date.apply(this,[t]);if(t.constructor==Array)return this.serialize.array.apply(this,[t]);var e,r,i,n=["{"];this.level+=1;var s=!1;for(e in t)t.hasOwnProperty(e)&&(r=OpenLayers.Format.JSON.prototype.write.apply(this,[e,this.pretty]),i=OpenLayers.Format.JSON.prototype.write.apply(this,[t[e],this.pretty]),null!=r&&null!=i&&(s&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),i),s=!0));return this.level-=1,n.push(this.writeNewline(),this.writeIndent(),"}"),n.join("")},array:function(t){var e,r=["["];this.level+=1;for(var i=0,n=t.length;i<n;++i)null!=(e=OpenLayers.Format.JSON.prototype.write.apply(this,[t[i],this.pretty]))&&(i>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,(function(t,r){var i=e[r];return i||(i=r.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))}))+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}},CLASS_NAME:"OpenLayers.Format.JSON"});