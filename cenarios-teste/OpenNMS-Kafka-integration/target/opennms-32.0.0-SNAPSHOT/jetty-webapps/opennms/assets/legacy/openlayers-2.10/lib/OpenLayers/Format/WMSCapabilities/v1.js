OpenLayers.Format.WMSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{wms:"http://www.opengis.net/wms",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"wms",initialize:function(t){OpenLayers.Format.XML.prototype.initialize.apply(this,[t])},read:function(t){"string"==typeof t&&(t=OpenLayers.Format.XML.prototype.read.apply(this,[t])),t&&9==t.nodeType&&(t=t.documentElement);var e={};return this.readNode(t,e),this.postProcessLayers(e),e},postProcessLayers:function(t){if(t.capability){t.capability.layers=[];for(var e=t.capability.nestedLayers,i=0,a=e.length;i<a;++i){var s=e[i];this.processLayer(t.capability,s)}}},processLayer:function(t,e,i){if(void 0===e.formats&&(e.formats=t.request.getmap.formats),i){e.styles=e.styles.concat(i.styles);for(var a,s=["queryable","cascaded","fixedWidth","fixedHeight","opaque","noSubsets","llbbox","minScale","maxScale","attribution"],n=["srs","bbox","dimensions","authorityURLs"],r=0;r<s.length;r++)if((a=s[r])in i&&(null==e[a]&&(e[a]=i[a]),null==e[a])){-1!=OpenLayers.Util.indexOf(["cascaded","fixedWidth","fixedHeight"],a)&&(e[a]=0),-1!=OpenLayers.Util.indexOf(["queryable","opaque","noSubsets"],a)&&(e[a]=!1)}for(r=0;r<n.length;r++)e[a=n[r]]=OpenLayers.Util.extend(e[a],i[a])}for(var o=0,d=e.nestedLayers.length;o<d;o++){var l=e.nestedLayers[o];this.processLayer(t,l,e)}e.name&&t.layers.push(e)},readers:{wms:{Service:function(t,e){e.service={},this.readChildNodes(t,e.service)},Name:function(t,e){e.name=this.getChildValue(t)},Title:function(t,e){e.title=this.getChildValue(t)},Abstract:function(t,e){e.abstract=this.getChildValue(t)},BoundingBox:function(t,e){var i={};i.bbox=[parseFloat(t.getAttribute("minx")),parseFloat(t.getAttribute("miny")),parseFloat(t.getAttribute("maxx")),parseFloat(t.getAttribute("maxy"))];var a={x:parseFloat(t.getAttribute("resx")),y:parseFloat(t.getAttribute("resy"))};return isNaN(a.x)&&isNaN(a.y)||(i.res=a),i},OnlineResource:function(t,e){e.href=this.getAttributeNS(t,this.namespaces.xlink,"href")},ContactInformation:function(t,e){e.contactInformation={},this.readChildNodes(t,e.contactInformation)},ContactPersonPrimary:function(t,e){e.personPrimary={},this.readChildNodes(t,e.personPrimary)},ContactPerson:function(t,e){e.person=this.getChildValue(t)},ContactOrganization:function(t,e){e.organization=this.getChildValue(t)},ContactPosition:function(t,e){e.position=this.getChildValue(t)},ContactAddress:function(t,e){e.contactAddress={},this.readChildNodes(t,e.contactAddress)},AddressType:function(t,e){e.type=this.getChildValue(t)},Address:function(t,e){e.address=this.getChildValue(t)},City:function(t,e){e.city=this.getChildValue(t)},StateOrProvince:function(t,e){e.stateOrProvince=this.getChildValue(t)},PostCode:function(t,e){e.postcode=this.getChildValue(t)},Country:function(t,e){e.country=this.getChildValue(t)},ContactVoiceTelephone:function(t,e){e.phone=this.getChildValue(t)},ContactFacsimileTelephone:function(t,e){e.fax=this.getChildValue(t)},ContactElectronicMailAddress:function(t,e){e.email=this.getChildValue(t)},Fees:function(t,e){var i=this.getChildValue(t);i&&"none"!=i.toLowerCase()&&(e.fees=i)},AccessConstraints:function(t,e){var i=this.getChildValue(t);i&&"none"!=i.toLowerCase()&&(e.accessConstraints=i)},Capability:function(t,e){e.capability={nestedLayers:[]},this.readChildNodes(t,e.capability)},Request:function(t,e){e.request={},this.readChildNodes(t,e.request)},GetCapabilities:function(t,e){e.getcapabilities={formats:[]},this.readChildNodes(t,e.getcapabilities)},Format:function(t,e){e.formats instanceof Array?e.formats.push(this.getChildValue(t)):e.format=this.getChildValue(t)},DCPType:function(t,e){this.readChildNodes(t,e)},HTTP:function(t,e){this.readChildNodes(t,e)},Get:function(t,e){this.readChildNodes(t,e)},Post:function(t,e){this.readChildNodes(t,e)},GetMap:function(t,e){e.getmap={formats:[]},this.readChildNodes(t,e.getmap)},GetFeatureInfo:function(t,e){e.getfeatureinfo={formats:[]},this.readChildNodes(t,e.getfeatureinfo)},Exception:function(t,e){e.exception={formats:[]},this.readChildNodes(t,e.exception)},Layer:function(t,e){var i=t.getAttributeNode("queryable"),a=i&&i.specified?t.getAttribute("queryable"):null,s=(i=t.getAttributeNode("cascaded"))&&i.specified?t.getAttribute("cascaded"):null,n=(i=t.getAttributeNode("opaque"))&&i.specified?t.getAttribute("opaque"):null,r=t.getAttribute("noSubsets"),o=t.getAttribute("fixedWidth"),d=t.getAttribute("fixedHeight"),l={nestedLayers:[],styles:[],srs:{},metadataURLs:[],bbox:{},dimensions:{},authorityURLs:{},identifiers:{},keywords:[],queryable:a&&""!==a?"1"===a||"true"===a:null,cascaded:null!==s?parseInt(s):null,opaque:n?"1"===n||"true"===n:null,noSubsets:null!==r?"1"===r||"true"===r:null,fixedWidth:null!=o?parseInt(o):null,fixedHeight:null!=d?parseInt(d):null};if(e.nestedLayers.push(l),this.readChildNodes(t,l),l.name){var u=l.name.split(":");u.length>0&&(l.prefix=u[0])}},Attribution:function(t,e){e.attribution={},this.readChildNodes(t,e.attribution)},LogoURL:function(t,e){e.logo={width:t.getAttribute("width"),height:t.getAttribute("height")},this.readChildNodes(t,e.logo)},Style:function(t,e){var i={};e.styles.push(i),this.readChildNodes(t,i)},LegendURL:function(t,e){var i={width:t.getAttribute("width"),height:t.getAttribute("height")};e.legend=i,this.readChildNodes(t,i)},MetadataURL:function(t,e){var i={type:t.getAttribute("type")};e.metadataURLs.push(i),this.readChildNodes(t,i)},DataURL:function(t,e){e.dataURL={},this.readChildNodes(t,e.dataURL)},FeatureListURL:function(t,e){e.featureListURL={},this.readChildNodes(t,e.featureListURL)},AuthorityURL:function(t,e){var i=t.getAttribute("name"),a={};this.readChildNodes(t,a),e.authorityURLs[i]=a.href},Identifier:function(t,e){var i=t.getAttribute("authority");e.identifiers[i]=this.getChildValue(t)},KeywordList:function(t,e){this.readChildNodes(t,e)},SRS:function(t,e){e.srs[this.getChildValue(t)]=!0}}},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1"});