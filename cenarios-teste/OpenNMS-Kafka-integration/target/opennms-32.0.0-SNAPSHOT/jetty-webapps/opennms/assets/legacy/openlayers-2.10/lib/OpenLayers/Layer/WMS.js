OpenLayers.Layer.WMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{service:"WMS",version:"1.1.1",request:"GetMap",styles:"",exceptions:"application/vnd.ogc.se_inimage",format:"image/jpeg"},reproject:!1,isBaseLayer:!0,encodeBBOX:!1,noMagic:!1,yx:{"EPSG:4326":!0},initialize:function(e,t,r,a){var s=[];r=OpenLayers.Util.upperCaseObject(r),parseFloat(r.VERSION)>=1.3&&!r.EXCEPTIONS&&(r.EXCEPTIONS="INIMAGE"),s.push(e,t,r,a),OpenLayers.Layer.Grid.prototype.initialize.apply(this,s),OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)),!this.noMagic&&this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()&&(null!=a&&a.isBaseLayer||(this.isBaseLayer=!1),"image/jpeg"==this.params.FORMAT&&(this.params.FORMAT=OpenLayers.Util.alphaHack()?"image/gif":"image/png"))},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.WMS(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},reverseAxisOrder:function(){return parseFloat(this.params.VERSION)>=1.3&&!!this.yx[this.map.getProjectionObject().getCode()]},getURL:function(e){e=this.adjustBounds(e);var t=this.getImageSize(),r={},a=this.reverseAxisOrder();return r.BBOX=this.encodeBBOX?e.toBBOX(null,a):e.toArray(a),r.WIDTH=t.w,r.HEIGHT=t.h,this.getFullRequestString(r)},addTile:function(e,t){return new OpenLayers.Tile.Image(this,t,e,null,this.tileSize)},mergeNewParams:function(e){var t=[OpenLayers.Util.upperCaseObject(e)];return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,t)},getFullRequestString:function(e,t){var r=this.map.getProjection(),a="none"==r?null:r;return parseFloat(this.params.VERSION)>=1.3?this.params.CRS=a:this.params.SRS=a,OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.WMS"});