OpenLayers.Control.ArgParser=OpenLayers.Class(OpenLayers.Control,{center:null,zoom:null,layers:null,displayProjection:null,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,arguments)},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var t=0,s=this.map.controls.length;t<s;t++){var r=this.map.controls[t];if(r!=this&&"OpenLayers.Control.ArgParser"==r.CLASS_NAME){r.displayProjection!=this.displayProjection&&(this.displayProjection=r.displayProjection);break}}if(t==this.map.controls.length){var a=OpenLayers.Util.getParameters();a.layers&&(this.layers=a.layers,this.map.events.register("addlayer",this,this.configureLayers),this.configureLayers()),a.lat&&a.lon&&(this.center=new OpenLayers.LonLat(parseFloat(a.lon),parseFloat(a.lat)),a.zoom&&(this.zoom=parseInt(a.zoom)),this.map.events.register("changebaselayer",this,this.setCenter),this.setCenter())}},setCenter:function(){this.map.baseLayer&&(this.map.events.unregister("changebaselayer",this,this.setCenter),this.displayProjection&&this.center.transform(this.displayProjection,this.map.getProjectionObject()),this.map.setCenter(this.center,this.zoom))},configureLayers:function(){if(this.layers.length==this.map.layers.length){this.map.events.unregister("addlayer",this,this.configureLayers);for(var e=0,t=this.layers.length;e<t;e++){var s=this.map.layers[e],r=this.layers.charAt(e);"B"==r?this.map.setBaseLayer(s):"T"!=r&&"F"!=r||s.setVisibility("T"==r)}}},CLASS_NAME:"OpenLayers.Control.ArgParser"});