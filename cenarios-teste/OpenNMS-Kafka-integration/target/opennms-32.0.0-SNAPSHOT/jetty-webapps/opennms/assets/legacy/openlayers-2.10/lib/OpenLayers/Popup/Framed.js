OpenLayers.Popup.Framed=OpenLayers.Class(OpenLayers.Popup.Anchored,{imageSrc:null,imageSize:null,isAlphaImage:!1,positionBlocks:null,blocks:null,fixedRelativePosition:!1,initialize:function(i,t,e,s,o,l,n){OpenLayers.Popup.Anchored.prototype.initialize.apply(this,arguments),this.fixedRelativePosition&&(this.updateRelativePosition(),this.calculateRelativePosition=function(i){return this.relativePosition}),this.contentDiv.style.position="absolute",this.contentDiv.style.zIndex=1,l&&(this.closeDiv.style.zIndex=1),this.groupDiv.style.position="absolute",this.groupDiv.style.top="0px",this.groupDiv.style.left="0px",this.groupDiv.style.height="100%",this.groupDiv.style.width="100%"},destroy:function(){this.imageSrc=null,this.imageSize=null,this.isAlphaImage=null,this.fixedRelativePosition=!1,this.positionBlocks=null;for(var i=0;i<this.blocks.length;i++){var t=this.blocks[i];t.image&&t.div.removeChild(t.image),t.image=null,t.div&&this.groupDiv.removeChild(t.div),t.div=null}this.blocks=null,OpenLayers.Popup.Anchored.prototype.destroy.apply(this,arguments)},setBackgroundColor:function(i){},setBorder:function(){},setOpacity:function(i){},setSize:function(i){OpenLayers.Popup.Anchored.prototype.setSize.apply(this,arguments),this.updateBlocks()},updateRelativePosition:function(){if(this.padding=this.positionBlocks[this.relativePosition].padding,this.closeDiv){var i=this.getContentDivPadding();this.closeDiv.style.right=i.right+this.padding.right+"px",this.closeDiv.style.top=i.top+this.padding.top+"px"}this.updateBlocks()},calculateNewPx:function(i){var t=OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(this,arguments);return t=t.offset(this.positionBlocks[this.relativePosition].offset)},createBlocks:function(){this.blocks=[];var i=null;for(var t in this.positionBlocks){i=t;break}for(var e=this.positionBlocks[i],s=0;s<e.blocks.length;s++){var o={};this.blocks.push(o);var l=this.id+"_FrameDecorationDiv_"+s;o.div=OpenLayers.Util.createDiv(l,null,null,null,"absolute",null,"hidden",null);var n=this.id+"_FrameDecorationImg_"+s,a=this.isAlphaImage?OpenLayers.Util.createAlphaImageDiv:OpenLayers.Util.createImage;o.image=a(n,null,this.imageSize,this.imageSrc,"absolute",null,null,null),o.div.appendChild(o.image),this.groupDiv.appendChild(o.div)}},updateBlocks:function(){if(this.blocks||this.createBlocks(),this.size&&this.relativePosition){for(var i=this.positionBlocks[this.relativePosition],t=0;t<i.blocks.length;t++){var e=i.blocks[t],s=this.blocks[t],o=e.anchor.left,l=e.anchor.bottom,n=e.anchor.right,a=e.anchor.top,p=isNaN(e.size.w)?this.size.w-(n+o):e.size.w,h=isNaN(e.size.h)?this.size.h-(l+a):e.size.h;s.div.style.width=(p<0?0:p)+"px",s.div.style.height=(h<0?0:h)+"px",s.div.style.left=null!=o?o+"px":"",s.div.style.bottom=null!=l?l+"px":"",s.div.style.right=null!=n?n+"px":"",s.div.style.top=null!=a?a+"px":"",s.image.style.left=e.position.x+"px",s.image.style.top=e.position.y+"px"}this.contentDiv.style.left=this.padding.left+"px",this.contentDiv.style.top=this.padding.top+"px"}},CLASS_NAME:"OpenLayers.Popup.Framed"});