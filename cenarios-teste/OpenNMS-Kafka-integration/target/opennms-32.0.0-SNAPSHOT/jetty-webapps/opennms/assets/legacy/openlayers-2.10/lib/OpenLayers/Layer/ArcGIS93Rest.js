OpenLayers.Layer.ArcGIS93Rest=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{format:"png"},isBaseLayer:!0,initialize:function(e,s,t,r){var a=[];t=OpenLayers.Util.upperCaseObject(t),a.push(e,s,t,r),OpenLayers.Layer.Grid.prototype.initialize.apply(this,a),OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)),this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()&&(null!=r&&r.isBaseLayer||(this.isBaseLayer=!1),"jpg"==this.params.FORMAT&&(this.params.FORMAT=OpenLayers.Util.alphaHack()?"gif":"png"))},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.ArcGIS93Rest(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=this.adjustBounds(e);var s=this.projection.getCode().split(":"),t=s[s.length-1],r=this.getImageSize(),a={BBOX:e.toBBOX(),SIZE:r.w+","+r.h,F:"image",BBOXSR:t,IMAGESR:t};if(this.layerDefs){var i,p=[];for(i in this.layerDefs)this.layerDefs.hasOwnProperty(i)&&this.layerDefs[i]&&(p.push(i),p.push(":"),p.push(this.layerDefs[i]),p.push(";"));p.length>0&&(a.LAYERDEFS=p.join(""))}return this.getFullRequestString(a)},setLayerFilter:function(e,s){this.layerDefs||(this.layerDefs={}),s?this.layerDefs[e]=s:delete this.layerDefs[e]},clearLayerFilter:function(e){e?delete this.layerDefs[e]:delete this.layerDefs},mergeNewParams:function(e){var s=[OpenLayers.Util.upperCaseObject(e)];return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,s)},addTile:function(e,s){return new OpenLayers.Tile.Image(this,s,e,null,this.tileSize)},CLASS_NAME:"OpenLayers.Layer.ArcGIS93Rest"});