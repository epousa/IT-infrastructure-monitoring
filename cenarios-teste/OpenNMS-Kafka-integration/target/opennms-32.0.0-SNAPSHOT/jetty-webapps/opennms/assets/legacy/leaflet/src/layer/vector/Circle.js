L.Circle=L.CircleMarker.extend({initialize:function(t,i,a){if("number"==typeof i&&(i=L.extend({},a,{radius:i})),L.setOptions(this,i),this._latlng=L.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new L.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:L.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,a=this._map,s=a.options.crs;if(s.distance===L.CRS.Earth.distance){var n=Math.PI/180,r=this._mRadius/L.CRS.Earth.R/n,e=a.project([i+r,t]),o=a.project([i-r,t]),h=e.add(o).divideBy(2),u=a.unproject(h).lat,d=Math.acos((Math.cos(r*n)-Math.sin(i*n)*Math.sin(u*n))/(Math.cos(i*n)*Math.cos(u*n)))/n;(isNaN(d)||0===d)&&(d=r/Math.cos(Math.PI/180*i)),this._point=h.subtract(a.getPixelOrigin()),this._radius=isNaN(d)?0:Math.max(Math.round(h.x-a.project([u,t-d]).x),1),this._radiusY=Math.max(Math.round(h.y-e.y),1)}else{var c=s.unproject(s.project(this._latlng).subtract([this._mRadius,0]));this._point=a.latLngToLayerPoint(this._latlng),this._radius=this._point.x-a.latLngToLayerPoint(c).x}this._updateBounds()}}),L.circle=function(t,i,a){return new L.Circle(t,i,a)};