OpenLayers.Rico.Color=OpenLayers.Class({initialize:function(r,t,e){this.rgb={r:r,g:t,b:e}},setRed:function(r){this.rgb.r=r},setGreen:function(r){this.rgb.g=r},setBlue:function(r){this.rgb.b=r},setHue:function(r){var t=this.asHSB();t.h=r,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,t.b)},setSaturation:function(r){var t=this.asHSB();t.s=r,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,t.b)},setBrightness:function(r){var t=this.asHSB();t.b=r,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,t.b)},darken:function(r){var t=this.asHSB();this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,Math.max(t.b-r,0))},brighten:function(r){var t=this.asHSB();this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,Math.min(t.b+r,1))},blend:function(r){this.rgb.r=Math.floor((this.rgb.r+r.rgb.r)/2),this.rgb.g=Math.floor((this.rgb.g+r.rgb.g)/2),this.rgb.b=Math.floor((this.rgb.b+r.rgb.b)/2)},isBright:function(){this.asHSB();return this.asHSB().b>.5},isDark:function(){return!this.isBright()},asRGB:function(){return"rgb("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+")"},asHex:function(){return"#"+this.rgb.r.toColorPart()+this.rgb.g.toColorPart()+this.rgb.b.toColorPart()},asHSB:function(){return OpenLayers.Rico.Color.RGBtoHSB(this.rgb.r,this.rgb.g,this.rgb.b)},toString:function(){return this.asHex()}}),OpenLayers.Rico.Color.createFromHex=function(r){if(4==r.length)for(var t=r,e=(r="#",1);e<4;e++)r+=t.charAt(e)+t.charAt(e);0==r.indexOf("#")&&(r=r.substring(1));var o=r.substring(0,2),n=r.substring(2,4),s=r.substring(4,6);return new OpenLayers.Rico.Color(parseInt(o,16),parseInt(n,16),parseInt(s,16))},OpenLayers.Rico.Color.createColorFromBackground=function(r){var t=RicoUtil.getElementsComputedStyle(OpenLayers.Util.getElement(r),"backgroundColor","background-color");if("transparent"==t&&r.parentNode)return OpenLayers.Rico.Color.createColorFromBackground(r.parentNode);if(null==t)return new OpenLayers.Rico.Color(255,255,255);if(0==t.indexOf("rgb(")){var e=t.substring(4,t.length-1).split(",");return new OpenLayers.Rico.Color(parseInt(e[0]),parseInt(e[1]),parseInt(e[2]))}return 0==t.indexOf("#")?OpenLayers.Rico.Color.createFromHex(t):new OpenLayers.Rico.Color(255,255,255)},OpenLayers.Rico.Color.HSBtoRGB=function(r,t,e){var o=0,n=0,s=0;if(0==t)n=o=parseInt(255*e+.5),s=o;else{var i=6*(r-Math.floor(r)),a=i-Math.floor(i),b=e*(1-t),c=e*(1-t*a),g=e*(1-t*(1-a));switch(parseInt(i)){case 0:o=255*e+.5,n=255*g+.5,s=255*b+.5;break;case 1:o=255*c+.5,n=255*e+.5,s=255*b+.5;break;case 2:o=255*b+.5,n=255*e+.5,s=255*g+.5;break;case 3:o=255*b+.5,n=255*c+.5,s=255*e+.5;break;case 4:o=255*g+.5,n=255*b+.5,s=255*e+.5;break;case 5:o=255*e+.5,n=255*b+.5,s=255*c+.5}}return{r:parseInt(o),g:parseInt(n),b:parseInt(s)}},OpenLayers.Rico.Color.RGBtoHSB=function(r,t,e){var o,n,s=r>t?r:t;e>s&&(s=e);var i=r<t?r:t;if(e<i&&(i=e),0==(n=0!=s?(s-i)/s:0))o=0;else{var a=(s-r)/(s-i),b=(s-t)/(s-i),c=(s-e)/(s-i);o=r==s?c-b:t==s?2+a-c:4+b-a,(o/=6)<0&&(o+=1)}return{h:o,s:n,b:s/255}};