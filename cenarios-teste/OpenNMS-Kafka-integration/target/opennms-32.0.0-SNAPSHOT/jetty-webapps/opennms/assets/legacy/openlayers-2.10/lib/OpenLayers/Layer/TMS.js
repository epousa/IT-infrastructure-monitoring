OpenLayers.Layer.TMS=OpenLayers.Class(OpenLayers.Layer.Grid,{serviceVersion:"1.0.0",isBaseLayer:!0,tileOrigin:null,serverResolutions:null,zoomOffset:0,initialize:function(e,t,i){var s=[];s.push(e,t,{},i),OpenLayers.Layer.Grid.prototype.initialize.apply(this,s)},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.TMS(this.name,this.url,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=this.adjustBounds(e);var t=this.map.getResolution(),i=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w)),s=Math.round((e.bottom-this.tileOrigin.lat)/(t*this.tileSize.h)),n=null!=this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,t):this.map.getZoom()+this.zoomOffset,r=this.serviceVersion+"/"+this.layername+"/"+n+"/"+i+"/"+s+"."+this.type,a=this.url;return a instanceof Array&&(a=this.selectUrl(r,a)),a+r},addTile:function(e,t){return new OpenLayers.Tile.Image(this,t,e,null,this.tileSize)},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.TMS"});