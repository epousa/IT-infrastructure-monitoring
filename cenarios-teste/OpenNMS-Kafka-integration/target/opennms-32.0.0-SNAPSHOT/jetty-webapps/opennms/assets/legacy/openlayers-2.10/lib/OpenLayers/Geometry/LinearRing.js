OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],initialize:function(e){OpenLayers.Geometry.LineString.prototype.initialize.apply(this,arguments)},addComponent:function(e,n){var t=!1,o=this.components.pop();null==n&&e.equals(o)||(t=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments));var s=this.components[0];return OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[s]),t},removeComponent:function(e){if(this.components.length>4){this.components.pop(),OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments);var n=this.components[0];OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[n])}},move:function(e,n){for(var t=0,o=this.components.length;t<o-1;t++)this.components[t].move(e,n)},rotate:function(e,n){for(var t=0,o=this.components.length;t<o-1;++t)this.components[t].rotate(e,n)},resize:function(e,n,t){for(var o=0,s=this.components.length;o<s-1;++o)this.components[o].resize(e,n,t);return this},transform:function(e,n){if(e&&n){for(var t=0,o=this.components.length;t<o-1;t++){this.components[t].transform(e,n)}this.bounds=null}return this},getCentroid:function(){if(this.components&&this.components.length>2){for(var e=0,n=0,t=0;t<this.components.length-1;t++){var o=this.components[t],s=this.components[t+1];e+=(o.x+s.x)*(o.x*s.y-s.x*o.y),n+=(o.y+s.y)*(o.x*s.y-s.x*o.y)}var r=-1*this.getArea(),i=e/(6*r),p=n/(6*r);return new OpenLayers.Geometry.Point(i,p)}return null},getArea:function(){var e=0;if(this.components&&this.components.length>2){for(var n=0,t=0,o=this.components.length;t<o-1;t++){var s=this.components[t],r=this.components[t+1];n+=(s.x+r.x)*(r.y-s.y)}e=-n/2}return e},getGeodesicArea:function(e){var n=this;if(e){var t=new OpenLayers.Projection("EPSG:4326");t.equals(e)||(n=this.clone().transform(e,t))}var o=0,s=n.components&&n.components.length;if(s>2){for(var r,i,p=0;p<s-1;p++)r=n.components[p],i=n.components[p+1],o+=OpenLayers.Util.rad(i.x-r.x)*(2+Math.sin(OpenLayers.Util.rad(r.y))+Math.sin(OpenLayers.Util.rad(i.y)));o=6378137*o*6378137/2}return o},containsPoint:function(e){var n=OpenLayers.Number.limitSigDigs,t=14,o=n(e.x,t),s=n(e.y,t);function r(e,n,t,o,s){return((n-o)*e+(o*t-n*s))/(t-s)}for(var i,p,a,m,c,h,y,l=this.components.length-1,f=0,u=0;u<l;++u)if(a=n((i=this.components[u]).x,t),m=n(i.y,t),c=n((p=this.components[u+1]).x,t),m!=(h=n(p.y,t))){if((y=n(r(s,a,m,c,h),t))==o&&(m<h&&s>=m&&s<=h||m>h&&s<=m&&s>=h)){f=-1;break}y<=o||a!=c&&(y<Math.min(a,c)||y>Math.max(a,c))||(m<h&&s>=m&&s<h||m>h&&s<m&&s>=h)&&++f}else if(s==m&&(a<=c&&o>=a&&o<=c||a>=c&&o<=a&&o>=c)){f=-1;break}return-1==f?1:!!(1&f)},intersects:function(e){var n=!1;if("OpenLayers.Geometry.Point"==e.CLASS_NAME)n=this.containsPoint(e);else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME)n=e.intersects(this);else if("OpenLayers.Geometry.LinearRing"==e.CLASS_NAME)n=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[e]);else for(var t=0,o=e.components.length;t<o&&!(n=e.components[t].intersects(this));++t);return n},getVertices:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"});