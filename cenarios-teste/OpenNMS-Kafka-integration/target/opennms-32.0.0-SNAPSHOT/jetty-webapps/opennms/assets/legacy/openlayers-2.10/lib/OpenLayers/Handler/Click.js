OpenLayers.Handler.Click=OpenLayers.Class(OpenLayers.Handler,{delay:300,single:!0,double:!1,pixelTolerance:0,stopSingle:!1,stopDouble:!1,timerId:null,down:null,rightclickTimerId:null,initialize:function(i,e,t){OpenLayers.Handler.prototype.initialize.apply(this,arguments),null!=this.pixelTolerance&&(this.mousedown=function(i){return this.down=i.xy,!0})},mousedown:null,mouseup:function(i){var e=!0;return this.checkModifiers(i)&&this.control.handleRightClicks&&OpenLayers.Event.isRightClick(i)&&(e=this.rightclick(i)),e},rightclick:function(i){if(this.passesTolerance(i)){if(null!=this.rightclickTimerId)return this.clearTimer(),this.callback("dblrightclick",[i]),!this.stopDouble;var e=this.double?OpenLayers.Util.extend({},i):this.callback("rightclick",[i]),t=OpenLayers.Function.bind(this.delayedRightCall,this,e);this.rightclickTimerId=window.setTimeout(t,this.delay)}return!this.stopSingle},delayedRightCall:function(i){return this.rightclickTimerId=null,i&&this.callback("rightclick",[i]),!this.stopSingle},dblclick:function(i){return this.passesTolerance(i)&&(this.double&&this.callback("dblclick",[i]),this.clearTimer()),!this.stopDouble},click:function(i){if(this.passesTolerance(i))if(null!=this.timerId)this.clearTimer();else{var e=this.single?OpenLayers.Util.extend({},i):null;this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,e),this.delay)}return!this.stopSingle},passesTolerance:function(i){var e=!0;null!=this.pixelTolerance&&this.down&&(Math.sqrt(Math.pow(this.down.x-i.xy.x,2)+Math.pow(this.down.y-i.xy.y,2))>this.pixelTolerance&&(e=!1));return e},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),null!=this.rightclickTimerId&&(window.clearTimeout(this.rightclickTimerId),this.rightclickTimerId=null)},delayedCall:function(i){this.timerId=null,i&&this.callback("click",[i])},deactivate:function(){var i=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),this.down=null,i=!0),i},CLASS_NAME:"OpenLayers.Handler.Click"});