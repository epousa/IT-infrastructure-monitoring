OpenLayers.Format.CSWGetRecords.v2_0_2=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",csw:"http://www.opengis.net/cat/csw/2.0.2",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",ows:"http://www.opengis.net/ows"},defaultPrefix:"csw",version:"2.0.2",schemaLocation:"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",requestId:null,resultType:null,outputFormat:null,outputSchema:null,startPosition:null,maxRecords:null,DistributedSearch:null,ResponseHandler:null,Query:null,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{csw:{GetRecordsResponse:function(e,t){t.records=[],this.readChildNodes(e,t);var r=this.getAttributeNS(e,"","version");""!=r&&(t.version=r)},RequestId:function(e,t){t.RequestId=this.getChildValue(e)},SearchStatus:function(e,t){t.SearchStatus={};var r=this.getAttributeNS(e,"","timestamp");""!=r&&(t.SearchStatus.timestamp=r)},SearchResults:function(e,t){this.readChildNodes(e,t);for(var r=e.attributes,s={},n=0,a=r.length;n<a;++n)"numberOfRecordsMatched"==r[n].name||"numberOfRecordsReturned"==r[n].name||"nextRecord"==r[n].name?s[r[n].name]=parseInt(r[n].nodeValue):s[r[n].name]=r[n].nodeValue;t.SearchResults=s},SummaryRecord:function(e,t){var r={type:"SummaryRecord"};this.readChildNodes(e,r),t.records.push(r)},BriefRecord:function(e,t){var r={type:"BriefRecord"};this.readChildNodes(e,r),t.records.push(r)},DCMIRecord:function(e,t){var r={type:"DCMIRecord"};this.readChildNodes(e,r),t.records.push(r)},Record:function(e,t){var r={type:"Record"};this.readChildNodes(e,r),t.records.push(r)}},dc:{"*":function(e,t){var r=e.localName||e.nodeName.split(":").pop();t[r]instanceof Array||(t[r]=new Array);for(var s={},n=e.attributes,a=0,o=n.length;a<o;++a)s[n[a].name]=n[a].nodeValue;s.value=this.getChildValue(e),t[r].push(s)}},dct:{"*":function(e,t){var r=e.localName||e.nodeName.split(":").pop();t[r]instanceof Array||(t[r]=new Array),t[r].push(this.getChildValue(e))}},ows:OpenLayers.Util.applyDefaults({BoundingBox:function(e,t){t.bounds&&(t.BoundingBox=[{crs:t.projection,value:[t.bounds.left,t.bounds.bottom,t.bounds.right,t.bounds.top]}],delete t.projection,delete t.bounds),OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows.BoundingBox.apply(this,arguments)}},OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows)},write:function(e){var t=this.writeNode("csw:GetRecords",e);return OpenLayers.Format.XML.prototype.write.apply(this,[t])},writers:{csw:{GetRecords:function(e){e||(e={});var t=this.createElementNSPlus("csw:GetRecords",{attributes:{service:"CSW",version:this.version,requestId:e.requestId||this.requestId,resultType:e.resultType||this.resultType,outputFormat:e.outputFormat||this.outputFormat,outputSchema:e.outputSchema||this.outputSchema,startPosition:e.startPosition||this.startPosition,maxRecords:e.maxRecords||this.maxRecords}});(e.DistributedSearch||this.DistributedSearch)&&this.writeNode("csw:DistributedSearch",e.DistributedSearch||this.DistributedSearch,t);var r=e.ResponseHandler||this.ResponseHandler;if(r instanceof Array&&r.length>0)for(var s=0,n=r.length;s<n;s++)this.writeNode("csw:ResponseHandler",r[s],t);return this.writeNode("Query",e.Query||this.Query,t),t},DistributedSearch:function(e){return this.createElementNSPlus("csw:DistributedSearch",{attributes:{hopCount:e.hopCount}})},ResponseHandler:function(e){return this.createElementNSPlus("csw:ResponseHandler",{value:e.value})},Query:function(e){e||(e={});var t=this.createElementNSPlus("csw:Query",{attributes:{typeNames:e.typeNames||"csw:Record"}}),r=e.ElementName;if(r instanceof Array&&r.length>0)for(var s=0,n=r.length;s<n;s++)this.writeNode("csw:ElementName",r[s],t);else this.writeNode("csw:ElementSetName",e.ElementSetName||{value:"summary"},t);return e.Constraint&&this.writeNode("csw:Constraint",e.Constraint,t),t},ElementName:function(e){return this.createElementNSPlus("csw:ElementName",{value:e.value})},ElementSetName:function(e){return this.createElementNSPlus("csw:ElementSetName",{attributes:{typeNames:e.typeNames},value:e.value})},Constraint:function(e){var t=this.createElementNSPlus("csw:Constraint",{attributes:{version:e.version}});if(e.Filter){var r=new OpenLayers.Format.Filter({version:e.version});t.appendChild(r.write(e.Filter))}else if(e.CqlText){var s=this.createElementNSPlus("CqlText",{value:e.CqlText.value});t.appendChild(s)}return t}}},CLASS_NAME:"OpenLayers.Format.CSWGetRecords.v2_0_2"});