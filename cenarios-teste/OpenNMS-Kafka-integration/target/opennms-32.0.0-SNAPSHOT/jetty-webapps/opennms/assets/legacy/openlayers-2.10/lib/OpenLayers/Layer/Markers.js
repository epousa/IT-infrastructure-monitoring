OpenLayers.Layer.Markers=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,markers:null,drawn:!1,initialize:function(r,e){OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.markers=[]},destroy:function(){this.clearMarkers(),this.markers=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setOpacity:function(r){if(r!=this.opacity){this.opacity=r;for(var e=0,a=this.markers.length;e<a;e++)this.markers[e].setOpacity(this.opacity)}},moveTo:function(r,e,a){if(OpenLayers.Layer.prototype.moveTo.apply(this,arguments),e||!this.drawn){for(var t=0,s=this.markers.length;t<s;t++)this.drawMarker(this.markers[t]);this.drawn=!0}},addMarker:function(r){this.markers.push(r),null!=this.opacity&&r.setOpacity(this.opacity),this.map&&this.map.getExtent()&&(r.map=this.map,this.drawMarker(r))},removeMarker:function(r){this.markers&&this.markers.length&&(OpenLayers.Util.removeItem(this.markers,r),r.erase())},clearMarkers:function(){if(null!=this.markers)for(;this.markers.length>0;)this.removeMarker(this.markers[0])},drawMarker:function(r){var e=this.map.getLayerPxFromLonLat(r.lonlat);if(null==e)r.display(!1);else if(r.isDrawn())r.icon&&r.icon.moveTo(e);else{var a=r.draw(e);this.div.appendChild(a)}},getDataExtent:function(){var r=null;if(this.markers&&this.markers.length>0){r=new OpenLayers.Bounds;for(var e=0,a=this.markers.length;e<a;e++){var t=this.markers[e];r.extend(t.lonlat)}}return r},CLASS_NAME:"OpenLayers.Layer.Markers"});