OpenLayers.Handler.Polygon=OpenLayers.Class(OpenLayers.Handler.Path,{polygon:null,initialize:function(e,t,n){OpenLayers.Handler.Path.prototype.initialize.apply(this,arguments)},createFeature:function(e){var t=this.control.map.getLonLatFromPixel(e);this.point=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t.lon,t.lat)),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([this.point.geometry])),this.polygon=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([this.line.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.polygon,this.point],{silent:!0})},destroyFeature:function(){OpenLayers.Handler.Path.prototype.destroyFeature.apply(this),this.polygon=null},drawFeature:function(){this.layer.drawFeature(this.polygon,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.polygon},getGeometry:function(){var e=this.polygon&&this.polygon.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiPolygon([e])),e},dblclick:function(e){if(!this.freehandMode(e)){var t=this.line.geometry.components.length-2;this.line.geometry.removeComponent(this.line.geometry.components[t]),this.removePoint(),this.finalize()}return!1},CLASS_NAME:"OpenLayers.Handler.Polygon"});