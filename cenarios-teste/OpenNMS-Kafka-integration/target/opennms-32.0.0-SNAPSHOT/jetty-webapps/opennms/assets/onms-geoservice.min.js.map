{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/main/assets/js/lib/onms-http/index.js","webpack:///./src/main/assets/js/apps/onms-geoservice/index.js","webpack:///./src/main/assets/js/apps/onms-geoservice/views/index.html","webpack:///./src/main/assets/js/apps/onms-geoservice/views/config.html","webpack:///./src/main/assets/js/apps/onms-geoservice/views/config sync ^\\.\\/.*\\.html$","webpack:///./src/main/assets/js/vendor/bootstrap-js.js","webpack:///./src/main/assets/js/apps/onms-elementList/lib/elementList.js","webpack:///./src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editInPlace.html","webpack:///./src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editListInPlace.html","webpack:///./src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editMapInPlace.html","webpack:///./src/main/assets/js/lib/onms-http/403-permission-denied.html","webpack:///./src/main/assets/modules/lib/util/index.js","webpack:///./src/main/assets/js/vendor/angular-js.js","webpack:///./src/main/assets/js/apps/search/index.js","webpack:///./src/main/assets/js/apps/search/template.ksc.html","webpack:///./src/main/assets/js/apps/search/template.nodes.html","webpack:///./src/main/assets/js/apps/onms-central-search/index.js","webpack:///./src/main/assets/js/apps/onms-central-search/quicksearch.html","webpack:///./src/main/assets/js/vendor/jquery-js.js","webpack:///./src/main/assets/js/apps/onms-default-apps/index.js","webpack:///./src/main/assets/js/apps/onms-geoservice/views/config/nominatim.html","webpack:///./src/main/assets/js/apps/onms-geoservice/views/config/google.html","webpack:///./src/main/assets/js/apps/onms-geoservice/views/config/mapquest.html","webpack:///./src/main/assets/js/vendor/moment-js.js"],"names":["root","factory","exports","module","define","amd","a","i","window","obj","_startsWith","require","__esModule","default","angular","permissionDeniedTemplate","$q","$rootScope","responseError","rejection","_context","_context2","status","config","url","call","console","error","headers","$emit","reject","$locationProvider","hashPrefix","$httpProvider","defaults","common","interceptors","push","run","$uibModal","$on","baseTags","document","getElementsByTagName","length","href","headerLogoutForm","submit","warn","open","templateUrl","controller","$scope","$uibModalInstance","reload","dismiss","location","size","backdrop","keyboard","indexTemplate","configTemplate","_filter","html5Mode","growlProvider","globalTimeToLive","success","warning","info","globalPosition","$stateProvider","$urlRouterProvider","state","$stateParams","id","otherwise","input","charAt","toUpperCase","substr","toLowerCase","$resource","method","isArray","$http","$sce","GeocodingConfigService","GeocodingGeocoderService","handleGlobalError","errorResponse","globalError","statusText","globalErrorDetails","_stringify","refreshTabs","enabled","activeGeocoderId","undefined","geocoders","get","configResponse","$promise","then","list","response","_context3","_forEach","item","name","active","_sort","b","localeCompare","growl","onGeocoderChange","selection","$update","_context4","geocoder","configError","manualValidation","userAgent","referer","handleGeocoderConfigErrors","errorObject","context","message","save","validateFieldsManually","form","$setPristine","data","matchingGeocoders","path","c","put","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","log","jQuery","MODULE_NAME","ISO_8601_DATE_FORMAT","ISO_8601_DATE_FORMAT_WITHOUT_MILLIS","editInPlaceTemplate","editListInPlaceTemplate","editMapInPlaceTemplate","escapeSearchValue","value","replace","toFiql","clauses","first","fiql","property","operator","fromFiql","statements","split","segments","_context5","_context6","_indexOf","normalizeOffset","offset","maxOffset","limit","lastPageOffset","newOffset","Math","floor","_context7","_context8","fuzzy","_trim","rewriteLinks","directive","editing","originalValue","copy","edit","unedit","onKeyup","$event","keyCode","cancel","onSubmit","scope","valueType","step","transclude","$window","newValue","event","add","_values","confirmAndRemove","items","confirm","_splice","onEdit","values","newKey","key","keyType","$location","$log","$filter","debug","_s","searchClauses","orderBy","order","initialLimit","search","Number","query","lastOffset","searchParam","newLimit","MAX_VALUE","$watch","queryParams","addSearchClause","clause","isDate","Date","getSearchClause","refresh","clauseEquals","addEpochTimestampSearchClause","removeSearchClause","_context9","_context10","removeSearchClauses","_context11","_context12","index","replaceSearchClause","oldClause","newClause","scopeOldClause","scopeNewClause","clearSearch","changeOrderBy","setOffset","setLimit","update","deleteItem","appendTransform","defaultTransform","transform","t","_concat","parseContentRange","contentRange","start","end","total","pattern","Util","_classCallCheck","base","getBaseHref","booleanValue","elementName","checkboxes","getElementsByName","hasOwnProperty","checked","version","full","_util","kscTemplate","nodesTemplate","restrict","getNodes","criteria","params","label","comparator","node","goToChooseResources","getKscReports","kscReport","goToKscReport","ksc","quickSearchTemplate","globalErrorHandling","cancellable","SearchResource","$timeout","$document","KeyCodes","Types","results","performSearchExecuted","showLoadingIndicator","showLoadingIndicatorDelay","performSearchDelay","performSearchPromise","performSearchHandle","showLoadingIndicatorPromise","shiftLastPressed","selectedIndex","_bind","isChild","$","has","target","isSelf","is","resetQuery","cancelRequest","element","focus","select","getElementById","navigateSearchResult","parentComponent","parentHeight","clientHeight","resultHeight","resultOffset","offsetTop","scrollTop","type","triggerHandler","click","selected","$cancelRequest","selectIndex","onQueryChange","eachResult","count","more","showMoreElement","loadMore","this","endIndex","searchResult","_slice","moment"],"mappings":"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","file":"onms-geoservice.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn ","'use strict';\n\nconst angular = require('vendor/angular-js');\n\nconst permissionDeniedTemplate  = require('./403-permission-denied.html');\n\nangular.module('onms.http', ['ui.bootstrap'])\n    .factory('InterceptorService',['$q', '$rootScope', function($q, $rootScope) {\n        return {\n            responseError: function (rejection) {\n                if (rejection.status === 401) {\n                    if (rejection.config && rejection.config.url\n                        && (rejection.config.url.startsWith('rest/')\n                            || rejection.config.url.startsWith('api/v2/'))\n                    ) {\n                        console.error('Login Required', rejection, rejection.headers); // eslint-disable-line no-console\n                        $rootScope.$emit('loginRequired');\n                    }\n                }\n                if (rejection.status === 403) {\n                    $rootScope.$emit('permissionDenied');\n                }\n                return $q.reject(rejection);\n            }\n        }\n    }])\n    .config(['$locationProvider', function($locationProvider) {\n        $locationProvider.hashPrefix('');\n    }])\n    .config(['$httpProvider',\n        function ($httpProvider) {\n            $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n            $httpProvider.interceptors.push('InterceptorService');\n        }\n    ])\n    .run(['$rootScope', '$uibModal', function($rootScope, $uibModal) {\n        $rootScope.$on('loginRequired', function() {\n            var baseTags = document.getElementsByTagName('base');\n            if (baseTags && baseTags.length > 0 && baseTags[0].href) {\n                document.headerLogoutForm.submit();\n            } else {\n                console.warn('Login is required, but cannot forward to login page due to missing base tag.'); // eslint-disable-line no-console\n            }\n        });\n\n        $rootScope.$on('permissionDenied', function() {\n            $uibModal.open({\n                templateUrl: permissionDeniedTemplate,\n                controller: function($scope, $uibModalInstance) {\n                    $scope.reload = function () {\n                        $uibModalInstance.dismiss();\n                        window.location.reload();\n                    };\n                },\n                size: '',\n                backdrop: 'static',\n                keyboard  : false\n            });\n        });\n    }])\n;\n\nmodule.exports = angular;","const angular = require('vendor/angular-js');\nconst elementList = require('../onms-elementList/lib/elementList');\nrequire('../../lib/onms-http');\nrequire('../onms-default-apps');\nrequire('angular-bootstrap-toggle/dist/angular-bootstrap-toggle');\nrequire('angular-bootstrap-toggle/dist/angular-bootstrap-toggle.css');\nrequire('angular-ui-router');\n\nconst indexTemplate  = require('./views/index.html');\nconst configTemplate  = require('./views/config.html');\n\n// Dynamically referenced\nconst nominatimTemplate  = require('./views/config/nominatim.html');\nconst googleTemplate  = require('./views/config/google.html');\nconst mapquestTemplate  = require('./views/config/mapquest.html');\n\n(function() {\n    'use strict';\n\n    var MODULE_NAME = 'onms.geoservice';\n\n    angular.module(MODULE_NAME, [\n            'angular-loading-bar',\n            'angular-growl',\n            'ngResource',\n            'ui.router',\n            'ui.toggle',\n            'onms.http',\n            'onms.default.apps',\n            'onms.elementList'\n        ])\n        .config(['$locationProvider', function ($locationProvider) {\n            $locationProvider.hashPrefix('!');\n            $locationProvider.html5Mode(false);\n        }])\n        .config(['growlProvider', function(growlProvider) {\n            growlProvider.globalTimeToLive({success: 2000, error: 5000, warning: 3000, info: 4000});\n            growlProvider.globalPosition('bottom-center');\n        }])\n        .config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {\n            $stateProvider\n                .state('geocoding', {\n                    url: '/geocoding',\n                    controller: 'GeocoderController',\n                    templateUrl: indexTemplate\n                })\n                .state('geocoding.config', {\n                    templateUrl: configTemplate,\n                    url: '/config',\n                    controller: 'GeocoderConfigController'\n                })\n\n                .state('geocoding.details', {\n                    templateUrl: function($stateParams) {\n                        return require('./views/config/' + $stateParams.id + '.html');\n                    },\n                    url: '/:id',\n                    controller: 'GeocoderDetailsController'\n                })\n            ;\n            $urlRouterProvider.otherwise('/geocoding/config');\n        }])\n\n        .filter('capitalize', function() {\n            return function(input) {\n                return input ? input.charAt(0).toUpperCase() + input.substr(1).toLowerCase() : '';\n            }\n        })\n\n        .factory('GeocodingConfigService', /* @ngInject */ function($resource) {\n            return $resource('api/v2/geocoding/config', {}, {\n                'get':      { method: 'GET' },\n                'update':   { method: 'POST'}\n            });\n        })\n\n        .factory('GeocodingGeocoderService', /* @ngInject */ function($resource) {\n            return $resource('api/v2/geocoding/geocoders/:id', {id: '@id'},\n                {\n                    'list': { method: 'GET', isArray: true },\n                    'update': { method: 'POST' }\n                }\n            );\n        })\n\n        .controller('GeocoderController', ['$scope', '$http', '$sce', 'GeocodingConfigService', 'GeocodingGeocoderService', function($scope, $http, $sce, GeocodingConfigService, GeocodingGeocoderService) {\n\n            $scope.handleGlobalError = function(errorResponse) {\n                $scope.globalError = 'An unexpected error occurred: ' + errorResponse.statusText;\n                $scope.globalErrorDetails = JSON.stringify(errorResponse, null, 2);\n            };\n\n            $scope.refreshTabs = function() {\n                $scope.config = {\n                    enabled: false,\n                    activeGeocoderId: undefined\n                };\n                $scope.geocoders = [];\n                $scope.globalError = undefined;\n\n                return GeocodingConfigService.get(function (configResponse) {\n                    $scope.config = configResponse;\n                }, function (errorResponse) {\n                    $scope.handleGlobalError(errorResponse);\n                }).$promise\n                    .then(function () {\n                        return GeocodingGeocoderService.list(function (response) {\n                            $scope.geocoders = response;\n                            $scope.geocoders.forEach(function (item) {\n                                item.name = item.id;\n                                item.active = $scope.config.activeGeocoderId === item.id;\n                            });\n                            $scope.geocoders.sort(function (a, b) {\n                                return a.name.localeCompare(b.name);\n                            });\n                        }, function (errorResponse) {\n                            $scope.handleGlobalError(errorResponse);\n                        }).$promise;\n                    });\n            };\n        }])\n\n        .controller('GeocoderConfigController', ['$scope', 'growl', function($scope, growl) {\n            $scope.onGeocoderChange = function(selection) {\n                $scope.config.activeGeocoderId = selection.active ? selection.id : undefined;\n                $scope.config.$update(function(response) {\n                    growl.success('Changes saved successfully');\n                    $scope.geocoders.forEach(function(item) {\n                        item.active = $scope.config.activeGeocoderId === item.id;\n                    });\n                }, function(response) {\n                    $scope.handleGlobalError(response);\n                });\n            };\n\n            $scope.refreshTabs();\n        }])\n\n        .controller('GeocoderDetailsController', ['$scope', '$stateParams', 'growl', function($scope, $stateParams, growl) {\n            $scope.geocoders = [];\n            $scope.geocoder = undefined;\n            $scope.configError = {};\n            $scope.manualValidation = {\n                'mapquest': function() {\n                    return true;\n                },\n                'google': function() {\n                    return true;\n                },\n                'nominatim': function() {\n                    // Ensure that either referer or userAgent are defined\n                    $scope.configError['userAgent'] = undefined;\n                    $scope.configError['referer'] = undefined;\n\n                    if (!$scope.geocoder.config.userAgent && !$scope.geocoder.config.referer) {\n                        $scope.configError['userAgent'] = 'User Agent or Referer must be set';\n                        $scope.configError['referer'] = $scope.configError['userAgent'];\n                        return false;\n                    }\n                    return true;\n                }\n            };\n\n            $scope.handleGeocoderConfigErrors = function(errorObject) {\n                if (errorObject.context && errorObject.message) {\n                    $scope.configError[errorObject.context] = errorObject.message;\n                } else if (errorObject.context) {\n                    $scope.configError[errorObject.context] = 'Invalid value';\n                } else {\n                    growl.error('The configuration is not valid. Details were not provided');\n                }\n            };\n\n            $scope.save = function() {\n                if ($scope.geocoder) {\n                    if (!$scope.validateFieldsManually()) {\n                        return;\n                    }\n                    // Now update\n                    $scope.configError = {};\n                    $scope.geocoder.$update(function () {\n                        growl.success('Changes saved successfully.');\n                        $scope.form.$setPristine();\n\n                        // The data cannot be reloaded from the backend as the bundles will be refreshed and the\n                        // ReST service will most like not be available. To avoid 404s, we assume on success everything is fine\n                        // as otherwise the response would be a 400 with information what exactly is not okay\n                        $scope.geocoder.error = undefined;\n                    }, function (response) {\n                        if (response.status === 400 && response.data) {\n                            $scope.handleGeocoderConfigErrors(response.data);\n                        } else {\n                            $scope.handleGlobalError(response);\n                        }\n                    });\n                }\n            };\n\n            // Some fields need manual validation\n            $scope.validateFieldsManually = function() {\n               var manualValidation = $scope.manualValidation[$scope.geocoder.id];\n               if (manualValidation) {\n                   return manualValidation();\n               }\n               return true;\n            };\n\n            // Refresh data\n            $scope.refreshTabs().then(function(geocoders) {\n                    var matchingGeocoders = geocoders.filter(function(item) {\n                        return item.id === $stateParams.id;\n                    });\n                    if (matchingGeocoders.length > 0) {\n                        $scope.geocoder = matchingGeocoders[0];\n                        if ($scope.geocoder.error) {\n                            $scope.handleGeocoderConfigErrors($scope.geocoder.error);\n                        }\n                    }\n            });\n        }])\n    ;\n}());\n","// Module\nvar code = \"<span><style>toggle.is-invalid~.invalid-feedback{display:block}</style> <div class=\\\"alert alert-danger\\\" ng-if=\\\"globalError\\\"> <span>{{globalError}}</span> <pre ng-show=\\\"globalErrorDetails\\\">{{globalErrorDetails}}</pre> </div> <div class=\\\"w-100\\\" ng-if=\\\"!globalError\\\"> <ul id=\\\"tabs\\\" class=\\\"nav nav-tabs\\\"> <li role=\\\"presentation\\\" class=\\\"nav-item\\\"> <a ui-sref-active=\\\"active\\\" ui-sref=\\\"geocoding.config\\\" data-name=\\\"settings\\\" class=\\\"nav-link\\\">Settings</a> </li> <li role=\\\"presentation\\\" ng-repeat=\\\"geocoder in geocoders\\\" class=\\\"nav-item\\\"> <a ui-sref-active=\\\"active\\\" ui-sref=\\\"geocoding.details({'id': geocoder.id})\\\" title=\\\"{{geocoder.name | capitalize}}\\\" data-name=\\\"{{geocoder.id}}\\\" class=\\\"nav-link\\\"> {{geocoder.name | capitalize}} <span ng-if=\\\"geocoder.id === config.activeGeocoderId && !geocoder.error\\\" class=\\\"text-success\\\" title=\\\"Geocoder is enabled\\\"><i class=\\\"fa fa-circle\\\"></i></span> <span ng-if=\\\"geocoder.id === config.activeGeocoderId && geocoder.error\\\" class=\\\"text-danger\\\" title=\\\"Geocoder is enabled but not configured properly\\\"><i class=\\\"fa fa-exclamation-triangle\\\"></i></span> </a> </li> </ul> <div growl></div> <div class=\\\"card border-top-0\\\"> <div class=\\\"card-body\\\" ui-view> </div> </div> </div> </span>\";\n// Exports\nvar _module_exports = code;;\nvar path = '/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-geoservice/views/index.html';\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, _module_exports) }]);\nmodule.exports = path;","// Module\nvar code = \"<div> <form class=\\\"form\\\" name=\\\"configForm\\\"> <div ng-repeat=\\\"geocoder in geocoders\\\"> <div class=\\\"mt-3 ml-2\\\"> <label style=\\\"width:100px\\\">{{geocoder.id | capitalize}}</label> <toggle id=\\\"{{geocoder.id}}-toggle\\\" class=\\\"mr-2\\\" ng-change=\\\"onGeocoderChange(geocoder)\\\" ng-model=\\\"geocoder.active\\\" size=\\\"btn-sm\\\"></toggle> <span class=\\\"text-muted\\\" ng-show=\\\"geocoder.active && geocoder.error\\\"> <a ui-sref=\\\"geocoding.details({'id': geocoder.id})\\\">Please configure the Geocoder</a> </span> </div> </div> </form> </div> \";\n// Exports\nvar _module_exports = code;;\nvar path = '/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-geoservice/views/config.html';\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, _module_exports) }]);\nmodule.exports = path;","var map = {\n\t\"./google.html\": 715,\n\t\"./mapquest.html\": 716,\n\t\"./nominatim.html\": 714\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1031;","console.log('init: bootstrap-js'); // eslint-disable-line no-console\n\nconst jQuery = require('vendor/jquery-js');\nrequire('vendor/moment-js');\nrequire('bootstrap/dist/js/bootstrap');\n\nmodule.exports = jQuery;\n","const MODULE_NAME = 'onms.elementList';\n\n/**\n * ISO-8601 date format string.\n */\nwindow.ISO_8601_DATE_FORMAT = 'yyyy-MM-ddTHH:mm:ss.sssZ';\nwindow.ISO_8601_DATE_FORMAT_WITHOUT_MILLIS = 'yyyy-MM-ddTHH:mm:ssZ';\n\nconst angular = require('vendor/angular-js');\nconst jQuery = require('vendor/jquery-js');\nrequire('vendor/bootstrap-js');\n\nconst editInPlaceTemplate = require('../templates/angular-onms-elementList-editInPlace.html');\nconst editListInPlaceTemplate = require('../templates/angular-onms-elementList-editListInPlace.html');\nconst editMapInPlaceTemplate = require('../templates/angular-onms-elementList-editMapInPlace.html');\n\n/**\n * Function used to append an extra transformer to the default $http transforms.\n */\nconst appendTransform = (defaultTransform, transform) => {\n\tconst t = angular.isArray(defaultTransform) ? defaultTransform : [ defaultTransform ];\n\treturn t.concat(transform);\n};\n\n/**\n * Escape FIQL reserved characters by URL-encoding them. Reserved characters are:\n * <ul>\n * <li>!</li>\n * <li>$</li>\n * <li>'</li>\n * <li>(</li>\n * <li>)</li>\n * <li>*</li>\n * <li>+</li>\n * <li>,</li>\n * <li>;</li>\n * <li>=</li>\n * </ul>\n * @param value\n * @returns String with reserved characters URL-encoded\n */\nconst escapeSearchValue = (value) => {\n\tif (typeof value === 'string') {\n\t\t\treturn value\n\t\t\t\t\t.replace('!', '%21')\n\t\t\t\t\t.replace('$', '%24')\n\t\t\t\t\t.replace('\\'', '%27')\n\t\t\t\t\t.replace('(', '%28')\n\t\t\t\t\t.replace(')', '%29')\n\t\t\t\t\t// People are going to type this in as a wildcard, so I\n\t\t\t\t\t// guess they'll have to type in '%2A' if they want to\n\t\t\t\t\t// match an asterisk...\n\t\t\t\t\t//.replace('*', '%2A')\n\t\t\t\t\t.replace('+', '%2B')\n\t\t\t\t\t.replace(',', '%2C')\n\t\t\t\t\t.replace(';', '%3B')\n\t\t\t\t\t.replace('=', '%3D');\n\t}\n\treturn value;\n};\n\n/**\n * Convert from a clause into a FIQL query string.\n */\nconst toFiql = (clauses) => {\n\tlet first = true;\n\tlet fiql = '';\n\tfor (let i = 0; i < clauses.length; i++) {\n\t\tif (!first) {\n\t\t\tfiql += ';';\n\t\t}\n\t\tfiql += clauses[i].property;\n\n\t\tswitch (clauses[i].operator) {\n\t\tcase 'EQ':\n\t\t\tfiql += '=='; break;\n\t\tcase 'NE':\n\t\t\tfiql += '!='; break;\n\t\tcase 'LT':\n\t\t\tfiql += '=lt='; break;\n\t\tcase 'LE':\n\t\t\tfiql += '=le='; break;\n\t\tcase 'GT':\n\t\t\tfiql += '=gt='; break;\n\t\tcase 'GE':\n\t\t\tfiql += '=ge='; break;\n\t\tdefault:\n\t\t\t// otherwise, do nothing\n\t\t\tbreak;\n\t\t}\n\n\t\tfiql += escapeSearchValue(clauses[i].value);\n\n\t\tfirst = false;\n\t}\n\treturn fiql;\n};\n\n/**\n * Convert from a FIQL query string into separate clause objects.\n * This only works for simple queries composed of multiple AND (';')\n * clauses.\n * \n * TODO: Expand this to cover more FIQL syntax\n */\nconst fromFiql = (fiql) => {\n\tlet statements = fiql.split(';');\n\tlet segments = [];\n\tlet clauses = [];\n\tfor (let i = 0; i < statements.length; i++) {\n\t\tif (statements[i].indexOf('==') > 0) {\n\t\t\tsegments = statements[i].split('==');\n\t\t\tclauses.push({\n\t\t\t\tproperty: segments[0],\n\t\t\t\toperator: 'EQ',\n\t\t\t\tvalue: segments[1]\n\t\t\t});\n\t\t} else if (statements[i].indexOf('!=') > 0) {\n\t\t\tsegments = statements[i].split('!=');\n\t\t\tclauses.push({\n\t\t\t\tproperty: segments[0],\n\t\t\t\toperator: 'NE',\n\t\t\t\tvalue: segments[1]\n\t\t\t});\n\t\t} else if (statements[i].indexOf('=lt=') > 0) {\n\t\t\tsegments = statements[i].split('=lt=');\n\t\t\tclauses.push({\n\t\t\t\tproperty: segments[0],\n\t\t\t\toperator: 'LT',\n\t\t\t\tvalue: segments[1]\n\t\t\t});\n\t\t} else if (statements[i].indexOf('=le=') > 0) {\n\t\t\tsegments = statements[i].split('=le=');\n\t\t\tclauses.push({\n\t\t\t\tproperty: segments[0],\n\t\t\t\toperator: 'LE',\n\t\t\t\tvalue: segments[1]\n\t\t\t});\n\t\t} else if (statements[i].indexOf('=gt=') > 0) {\n\t\t\tsegments = statements[i].split('=gt=');\n\t\t\tclauses.push({\n\t\t\t\tproperty: segments[0],\n\t\t\t\toperator: 'GT',\n\t\t\t\tvalue: segments[1]\n\t\t\t});\n\t\t} else if (statements[i].indexOf('=ge=') > 0) {\n\t\t\tsegments = statements[i].split('=ge=');\n\t\t\tclauses.push({\n\t\t\t\tproperty: segments[0],\n\t\t\t\toperator: 'GE',\n\t\t\t\tvalue: segments[1]\n\t\t\t});\n\t\t}\n\t}\n\treturn clauses;\n};\n\n\n/**\n * Parse an HTTP Content-Range header into the start, end, and total fields.\n * The header should be in a format like: \"items 0-14/28\".\n * \n * @param contentRange String from the Content-Range header\n */\nconst parseContentRange = (contentRange) => {\n\tif (!contentRange) {\n\t\treturn {start: 0, end: 0, total: 0};\n\t}\n\t// Example: items 0-14/28\n\tconst pattern = /items\\s+?(\\d+)\\s*-\\s*(\\d+)\\s*\\/\\s*(\\d+)/;\n\treturn {\n\t\tstart: Number(contentRange.replace(pattern, '$1')),\n\t\tend: Number(contentRange.replace(pattern, '$2')),\n\t\ttotal: Number(contentRange.replace(pattern, '$3'))\n\t};\n};\n\nconst normalizeOffset = (offset, maxOffset, limit) => {\n\tlet newOffset = offset;\n\n\t// Offset of the last page\n\tlet lastPageOffset;\n\tif (maxOffset < 0) {\n\t\tnewOffset = 0;\n\t\tlastPageOffset = 0;\n\t} else {\n\t\tlastPageOffset = Math.floor(maxOffset / limit) * limit; \n\t}\n\n\t// Bounds checking\n\tnewOffset = ((newOffset < 0) ? 0 : newOffset);\n\tnewOffset = ((newOffset > lastPageOffset) ? lastPageOffset : newOffset);\n\n\t// Make sure that offset is a multiple of limit\n\tnewOffset = Math.floor(newOffset / limit) * limit;\n\n\treturn newOffset;\n};\n\n/* // BMR: this doesn't seem to actually be used anywhere\nString.prototype.endsWith = function(suffix) {\n\treturn this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n*/\n\n// $filters that can be used to create human-readable versions of filter values\nangular.module('onmsListFilters', [])\n.filter('operator', function() {\n\treturn function(input, value) {\n\t\t// See if the string contains a wildcard\n\t\tvar fuzzy = (typeof value === 'string' && value.indexOf('*') > -1);\n\n\t\tswitch (input) {\n\t\tcase 'EQ':\n\t\t\treturn fuzzy ? 'is like' : 'equals';\n\t\tcase 'NE':\n\t\t\treturn fuzzy ? 'is not like' : 'does not equal';\n\t\tcase 'LT':\n\t\t\treturn 'is less than';\n\t\tcase 'LE':\n\t\t\treturn 'is less than or equal';\n\t\tcase 'GT':\n\t\t\treturn 'is greater than';\n\t\tcase 'GE':\n\t\t\treturn 'is greater than or equal';\n\t\tdefault:\n\t\t\t// If no match, return the input\n\t\t\treturn input;\n\t\t}\n\t}\n})\n.filter('isNotEmpty', function() {\n\treturn function(input) {\n\t\treturn input &&\n\t\t\t(typeof input === 'string' ? input.trim() !== '' : true);\n\t}\n})\n;\n\n// List module\nangular.module(MODULE_NAME, [])\n\n.config(/* @ngInject */ function($locationProvider) {\n\t$locationProvider.hashPrefix('');\n\t$locationProvider.html5Mode({\n\t\t// Use HTML5 \n\t\tenabled: true,\n\t\t// Don't rewrite all <a> links on the page\n\t\trewriteLinks: false\n\t});\n})\n\n.directive('onmsListEditInPlace', /* @ngInject */ function() {\n\treturn {\n\t\tcontroller: function($scope) {\n\t\t\t$scope.editing = false;\n\t\t\t$scope.originalValue = angular.copy($scope.value);\n\n\t\t\t// Start editing the value\n\t\t\t$scope.edit = function() {\n\t\t\t\t$scope.editing = true;\n\t\t\t}\n\n\t\t\t// Stop editing the value\n\t\t\t$scope.unedit = function() {\n\t\t\t\t$scope.editing = false;\n\t\t\t}\n\n\t\t\t$scope.onKeyup = function($event) {\n\t\t\t\t// If the user types ESC, then abort the edit\n\t\t\t\tif($event.keyCode === 27) {\n\t\t\t\t\t$scope.cancel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$scope.submit = function() {\n\t\t\t\t$scope.onSubmit();\n\t\t\t\t// TODO: Handle update failures\n\t\t\t\t// Now that we've save a new value, use it as the original value\n\t\t\t\t$scope.originalValue = $scope.value;\n\t\t\t\t// Switch out of edit mode\n\t\t\t\t$scope.unedit();\n\t\t\t}\n\n\t\t\t$scope.cancel = function() {\n\t\t\t\t// Restore the original value\n\t\t\t\t$scope.value = $scope.originalValue;\n\t\t\t\t// Switch out of edit mode\n\t\t\t\t$scope.unedit();\n\t\t\t}\n\t\t},\n\t\t// Use an isolated scope\n\t\tscope: {\n\t\t\titem: '=',\n\t\t\tvalue: '=',\n\t\t\tvalueType: '=',\n\t\t\t// Optional step attribute for number fields\n\t\t\tstep: '=',\n\t\t\tonSubmit: '&onSubmit'\n\t\t},\n\t\ttemplateUrl: editInPlaceTemplate,\n\t\ttransclude: true\n\t};\n})\n\n.directive('onmsListEditListInPlace', /* @ngInject */ function($window) {\n\treturn {\n\t\tcontroller: function($scope) {\n\t\t\t$scope.editing = false;\n\n\t\t\t// Start editing the value\n\t\t\t$scope.edit = function() {\n\t\t\t\t$scope.editing = true;\n\t\t\t}\n\n\t\t\t// Stop editing the value\n\t\t\t$scope.unedit = function() {\n\t\t\t\t// Undo any edits\n\t\t\t\t$scope.newValue = null;\n\t\t\t\t$scope.editing = false;\n\t\t\t}\n\n\t\t\t$scope.onKeyup = function(event) {\n\t\t\t\tswitch(event.keyCode) {\n\t\t\t\t// If the user types Enter, then submit the edit\n\t\t\t\tcase 13: $scope.add($scope.values, $scope.newValue); break;\n\t\t\t\t// If the user types ESC, then abort the edit\n\t\t\t\tcase 27: $scope.unedit(); break;\n\t\t\t\t// otherwise, do nothing\n\t\t\t\tdefault: break;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$scope.confirmAndRemove = function(items, item) {\n\t\t\t\t// Splice the value out of the array\n\t\t\t\tif ($window.confirm('Are you sure you want to remove \"' + item + '\"?')) {\n\t\t\t\t\titems.splice(items.indexOf(item), 1);\n\t\t\t\t\t$scope.onEdit();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$scope.add = function(items, item) {\n\t\t\t\titems.push(item);\n\t\t\t\titems.sort();\n\t\t\t\t// TODO: Handle update failures\n\t\t\t\t$scope.onEdit();\n\t\t\t\t// Switch out of edit mode\n\t\t\t\t$scope.unedit();\n\t\t\t}\n\t\t},\n\t\t// Use an isolated scope\n\t\tscope: {\n\t\t\tvalues: '=',\n\t\t\tvalueType: '=',\n\t\t\t// Optional step attribute for number fields\n\t\t\tstep: '=',\n\t\t\tonEdit: '&onEdit'\n\t\t},\n\t\ttemplateUrl: editListInPlaceTemplate,\n\t\ttransclude: true\n\t};\n})\n\n.directive('onmsListEditMapInPlace', /* @ngInject */ function($window) {\n\treturn {\n\t\tcontroller: function($scope) {\n\t\t\t$scope.editing = false;\n\n\t\t\t// Start editing the value\n\t\t\t$scope.edit = function() {\n\t\t\t\t$scope.editing = true;\n\t\t\t}\n\n\t\t\t// Stop editing the value\n\t\t\t$scope.unedit = function() {\n\t\t\t\t// Undo any edits\n\t\t\t\t$scope.newKey = null;\n\t\t\t\t$scope.newValue = null;\n\t\t\t\t$scope.editing = false;\n\t\t\t}\n\n\t\t\t$scope.onKeyup = function(event) {\n\t\t\t\tswitch(event.keyCode) {\n\t\t\t\t// If the user types Enter, then submit the edit\n\t\t\t\tcase 13: $scope.add($scope.values, $scope.newKey, $scope.newValue); break;\n\t\t\t\t// If the user types ESC, then abort the edit\n\t\t\t\tcase 27: $scope.unedit(); break;\n\t\t\t\t// otherwise, do nothing\n\t\t\t\tdefault: break;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$scope.confirmAndRemove = function(items, key) {\n\t\t\t\t// Splice the value out of the array\n\t\t\t\tif ($window.confirm('Are you sure you want to remove \"' + key + '\"?')) {\n\t\t\t\t\tdelete items[key];\n\t\t\t\t\t$scope.onEdit();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$scope.add = function(items, key, value) {\n\t\t\t\titems[key] = value;\n\t\t\t\t// TODO: Handle update failures\n\t\t\t\t$scope.onEdit();\n\t\t\t\t// Switch out of edit mode\n\t\t\t\t$scope.unedit();\n\t\t\t}\n\t\t},\n\t\t// Use an isolated scope\n\t\tscope: {\n\t\t\tvalues: '=',\n\t\t\tkeyType: '=',\n\t\t\tvalueType: '=',\n\t\t\t// Optional step attribute for number fields\n\t\t\tstep: '=',\n\t\t\tonEdit: '&onEdit'\n\t\t},\n\t\ttemplateUrl: editMapInPlaceTemplate,\n\t\ttransclude: true\n\t};\n})\n\n/**\n * Generic list controller\n */\n.controller('ListCtrl', ['$scope', '$location', '$window', '$log', '$filter', function($scope, $location, $window, $log, $filter) {\n\t$log.debug('ListCtrl initializing...');\n\n\t$scope.defaults = {\n\t\t_s: '',\n\t\tsearchClauses: [],\n\t\tlimit: 20,\n\t\toffset: 0,\n\t\torderBy: '',\n\t\torder: 'asc'\n\t}\n\n\tvar initialLimit = typeof $location.search().limit === 'undefined' ? $scope.defaults.limit : (Number($location.search().limit) > 0 ? Number($location.search().limit) : $scope.defaults.limit);\n\n\t// Restore any query parameters that you can from the \n\t// query string, blank out the rest\n\t$scope.query = {\n\t\tlastOffset: 0,\n\t\tmaxOffset: 0,\n\n\t\tsearchParam: typeof $location.search()._s === 'undefined' ? $scope.defaults._s : $location.search()._s,\n\t\tsearchClauses: typeof $location.search()._s === 'undefined' ? $scope.defaults.searchClauses : fromFiql($location.search()._s),\n\t\tlimit: initialLimit,\n\t\tnewLimit: initialLimit,\n\t\toffset: typeof $location.search().offset === 'undefined' ? $scope.defaults.offset : (Number($location.search().offset) > 0 ? normalizeOffset(Number($location.search().offset), Number.MAX_VALUE, initialLimit) : $scope.defaults.offset),\n\n\t\t// TODO: Validate that the orderBy is in a list of supported properties\n\t\torderBy: typeof $location.search().orderBy === 'undefined' ? $scope.defaults.orderBy : $location.search().orderBy,\n\t\torder: typeof $location.search().order === 'undefined' ? $scope.defaults.order : ($location.search().order === 'asc' ? 'asc' : 'desc')\n\t};\n\n\t// Sync the query hash with the $location query string\n\t$scope.$watch('query', function() {\n\t\tvar queryParams = angular.copy($scope.query);\n\n\t\t// Delete derived values that we don't need in the query string\n\t\tdelete queryParams.searchClauses;\n\t\tdelete queryParams.newLimit;\n\t\tdelete queryParams.lastOffset;\n\t\tdelete queryParams.maxOffset;\n\n\t\t// Rename searchParam to _s\n\t\tqueryParams._s = (queryParams.searchParam === '' ? null : queryParams.searchParam);\n\t\tdelete queryParams.searchParam;\n\n\t\t// Delete any parameters that have default or blank values\n\t\tif (queryParams.limit === $scope.defaults.limit || queryParams.limit === '') { delete queryParams.limit; }\n\t\tif (queryParams.offset === $scope.defaults.offset || queryParams.offset === '') { delete queryParams.offset; }\n\t\tif (queryParams.orderBy === $scope.defaults.orderBy || queryParams.orderBy === '') { delete queryParams.orderBy; }\n\t\tif (queryParams.order === $scope.defaults.order || queryParams.order === '') { delete queryParams.order; }\n\t\tif (queryParams._s === $scope.defaults._s || queryParams._s === '') { delete queryParams._s; }\n\n\t\t$location.search(queryParams);\n\t}, \n\ttrue // Use object equality because the reference doesn't change\n\t);\n\n\t// Add the search clause to the list of clauses\n\t$scope.addSearchClause = function(clause) {\n\t\tif(angular.isDate(clause.value)) {\n\t\t\t// Returns a value in yyyy-MM-ddTHH:mm:ss.sssZ format\n\t\t\t// Unfortunately, I don't think CXF will like this because\n\t\t\t// it includes the millisecond portion of the date.\n\t\t\t//clause.value = new Date(clause.value).toISOString();\n\n\t\t\tclause.value = $filter('date')(new Date(clause.value), ISO_8601_DATE_FORMAT);\n\t\t}\n\n\t\t// Make sure the clause isn't already in the list of search clauses\n\t\tif ($scope.getSearchClause(clause)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO: Add validation?\n\t\t$scope.query.searchClauses.push(angular.copy(clause));\n\t\t$scope.query.searchParam = toFiql($scope.query.searchClauses);\n\t\t$scope.refresh();\n\t}\n\n\t$scope.getSearchClause = function(clause) {\n\t\tfor (var i = 0; i < $scope.query.searchClauses.length; i++) {\n\t\t\tif ($scope.clauseEquals(clause, $scope.query.searchClauses[i])) {\n\t\t\t\treturn $scope.query.searchClauses[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t$scope.clauseEquals = function(a, b) {\n\t\treturn a.property === b.property &&\n\t\t\ta.operator === b.operator &&\n\t\t\ta.value === b.value;\n\t}\n\n\t// Convert an epoch timestamp into String format before adding the search clause\n\t$scope.addEpochTimestampSearchClause = function(clause) {\n\t\tclause.value = $filter('date')(clause.value, ISO_8601_DATE_FORMAT);\n\t\t$scope.addSearchClause(clause);\n\t}\n\n\t// Remove a search clause from the list of clauses\n\t$scope.removeSearchClause = function(clause) {\n\t\t// TODO: Add validation?\n\t\t$scope.query.searchClauses.splice($scope.query.searchClauses.indexOf(clause), 1);\n\t\t$scope.query.searchParam = toFiql($scope.query.searchClauses);\n\t\t$scope.refresh();\n\t}\n\n\t$scope.removeSearchClauses = function(clauses) {\n\t\tfor (var i = 0; i < clauses.length; i++) {\n\t\t\tvar index = $scope.query.searchClauses.indexOf(clauses[i]);\n\t\t\tif (index >= 0) {\n\t\t\t\t$scope.query.searchClauses.splice(index, 1);\n\t\t\t}\n\t\t}\n\t\t$scope.query.searchParam = toFiql($scope.query.searchClauses);\n\t\t$scope.refresh();\n\t}\n\n\t// Replace a search clause with a new clause\n\t$scope.replaceSearchClause = function(oldClause, newClause) {\n\t\tif(angular.isDate(newClause.value)) {\n\t\t\t// Returns a value in yyyy-MM-ddTHH:mm:ss.sssZ format\n\t\t\t// Unfortunately, I don't think CXF will like this because\n\t\t\t// it includes the millisecond portion of the date.\n\t\t\t//clause.value = new Date(clause.value).toISOString();\n\n\t\t\tnewClause.value = $filter('date')(new Date(newClause.value), ISO_8601_DATE_FORMAT);\n\t\t}\n\n\t\t// TODO: Add validation?\n\t\tvar scopeOldClause = $scope.getSearchClause(oldClause);\n\t\tvar scopeNewClause = $scope.getSearchClause(newClause);\n\t\tif (!scopeOldClause) {\n\t\t\tif (!scopeNewClause) {\n\t\t\t\t// If the old clause is not present, simply add the new clause\n\t\t\t\t$scope.addSearchClause(newClause);\n\t\t\t} else {\n\t\t\t\t// If the old clause is not present and the new clause is already\n\t\t\t\t// present, then do nothing\n\t\t\t}\n\t\t} else {\n\t\t\tif (!scopeNewClause) {\n\t\t\t\t// If the old clause is present and the new clause is not, replace\n\t\t\t\t// the values inside the old clause and then refresh\n\t\t\t\tscopeOldClause.property = newClause.property;\n\t\t\t\tscopeOldClause.operator = newClause.operator;\n\t\t\t\tscopeOldClause.value = newClause.value;\n\n\t\t\t\t$scope.query.searchParam = toFiql($scope.query.searchClauses);\n\t\t\t\t$scope.refresh();\n\t\t\t} else {\n\t\t\t\t// If the old clause is present and the new clause is present,\n\t\t\t\t// then just remove the old clause (as if it had been replaced by\n\t\t\t\t// the already-existing new clause)\n\t\t\t\t$scope.removeSearchClause(oldClause);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Clear the current search\n\t$scope.clearSearch = function() {\n\t\tif ($scope.query.searchClauses.length > 0) {\n\t\t\t$scope.query.searchClauses = [];\n\t\t\t$scope.query.searchParam = '';\n\t\t\t$scope.refresh();\n\t\t}\n\t}\n\n\t// Change the sorting of the table\n\t$scope.changeOrderBy = function(property) {\n\t\tif ($scope.query.orderBy === property) {\n\t\t\t// TODO: Figure out if we should reset limit/offset here also\n\t\t\t// If the property is already selected then reverse the sorting\n\t\t\t$scope.query.order = ($scope.query.order === 'asc' ? 'desc' : 'asc');\n\t\t} else {\n\t\t\t// TODO: Figure out if we should reset limit/offset here also\n\t\t\t$scope.query.orderBy = property;\n\t\t\t$scope.query.order = $scope.defaults.order;\n\t\t}\n\t\t$scope.refresh();\n\t}\n\n\t$scope.setOffset = function(offset) {\n\t\tconst o = normalizeOffset(offset, $scope.query.maxOffset, $scope.query.limit);\n\n\t\tif ($scope.query.offset !== o) {\n\t\t\t$scope.query.offset = o;\n\t\t\t$scope.refresh();\n\t\t}\n\t}\n\n\t$scope.setLimit = function(limit) {\n\t\tif (limit < 1) {\n\t\t\t$scope.query.newLimit = $scope.query.limit;\n\t\t\t// TODO: Throw a validation error\n\t\t\treturn;\n\t\t}\n\t\tif ($scope.query.limit !== limit) {\n\t\t\t$scope.query.limit = limit;\n\t\t\t$scope.query.offset = normalizeOffset($scope.query.offset, $scope.query.maxOffset, $scope.query.limit);\n\t\t\t$scope.refresh();\n\t\t}\n\t}\n\n\t// Override this to implement updates to an object\n\t$scope.refresh = function() {\n\t\t$log.warn('You need to override $scope.$parent.refresh() in your controller');\n\t}\n\n\t// Override this to implement updates to an object\n\t$scope.update = function() {\n\t\t$log.warn('You need to override $scope.$parent.update() in your controller');\n\t}\n\n\t// Override this to implement deletions\n\t$scope.deleteItem = function(item) {\n\t\t$log.warn('You need to override $scope.$parent.deleteItem() in your controller');\n\t}\n\n\t$log.debug('ListCtrl initialized');\n}])\n\n.run(['$rootScope', '$log', function($rootScope, $log) {\n\t$log.debug('Finished initializing ' + MODULE_NAME);\n}])\n\n;\n\n/*\nangular.element(document).ready(function() {\n\tconsole.log('Bootstrapping ' + MODULE_NAME);\n\tangular.bootstrap(document, [MODULE_NAME]);\n});\n*/\n\nmodule.exports = {\n\tappendTransform: appendTransform,\n\ttoFiql: toFiql,\n\tfromFiql: fromFiql,\n\tparseContentRange: parseContentRange,\n\tescapeSearchValue: escapeSearchValue,\n\tnormalizeOffset: normalizeOffset\n};\n","// Module\nvar code = \"<form class=\\\"form-inline\\\" ng-submit=\\\"submit()\\\" style=\\\"margin:0\\\"> <input ng-show=\\\"editing\\\" ng-keyup=\\\"onKeyup($event)\\\" type=\\\"{{valueType}}\\\" step=\\\"{{step}}\\\" ng-model=\\\"value\\\"> <span style=\\\"line-height:24px\\\" ng-hide=\\\"editing\\\" ng-click=\\\"edit()\\\">{{value}}&nbsp;</span> <a href style=\\\"text-decoration:none\\\" ng-click=\\\"edit()\\\" ng-hide=\\\"editing\\\"><i class=\\\"fa fa-edit fa-lg\\\"></i></a> <a href style=\\\"text-decoration:none\\\" ng-click=\\\"submit()\\\" ng-show=\\\"editing\\\"><i class=\\\"fa fa-check fa-lg\\\"></i></a> <a href style=\\\"text-decoration:none\\\" ng-click=\\\"cancel()\\\" ng-show=\\\"editing\\\"><i class=\\\"fa fa-close fa-lg\\\"></i></a> <span ng-transclude></span> </form> \";\n// Exports\nvar _module_exports = code;;\nvar path = '/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editInPlace.html';\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, _module_exports) }]);\nmodule.exports = path;","// Module\nvar code = \"<span> <span ng-repeat=\\\"value in values\\\"> <button class=\\\"btn btn-sm btn-secondary\\\" ng-click=\\\"confirmAndRemove(values, value)\\\" style=\\\"margin-bottom:3px;margin-right:3px\\\"> {{value}}&nbsp;<i class=\\\"fa fa-close\\\"></i> </button> </span> <span style=\\\"line-height:24px\\\" ng-hide=\\\"editing\\\"> <a href style=\\\"text-decoration:none\\\" ng-click=\\\"edit()\\\"><i class=\\\"fa fa-edit fa-lg\\\"></i></a>&nbsp; </span> <span ng-show=\\\"editing\\\" class=\\\"text-nowrap\\\"> <input type=\\\"{{valueType}}\\\" ng-keyup=\\\"onKeyup($event)\\\" ng-model=\\\"newValue\\\"> <a href style=\\\"text-decoration:none\\\" ng-click=\\\"add(values, newValue)\\\"><i class=\\\"fa fa-plus fa-lg\\\"></i></a> <a href style=\\\"text-decoration:none\\\" ng-click=\\\"unedit()\\\"><i class=\\\"fa fa-close fa-lg\\\"></i></a> </span> <span ng-transclude></span> </span>\";\n// Exports\nvar _module_exports = code;;\nvar path = '/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editListInPlace.html';\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, _module_exports) }]);\nmodule.exports = path;","// Module\nvar code = \"<span> <span ng-repeat=\\\"(key,value) in values\\\"> <button class=\\\"btn btn-sm btn-secondary\\\" ng-click=\\\"confirmAndRemove(values, key)\\\" style=\\\"margin-bottom:3px;margin-right:3px\\\"> <b>{{key}}:</b> {{value}}&nbsp;<i class=\\\"fa fa-close\\\"></i> </button> </span> <span style=\\\"line-height:24px\\\" ng-hide=\\\"editing\\\"> <a href style=\\\"text-decoration:none\\\" ng-click=\\\"edit()\\\"><i class=\\\"fa fa-edit fa-lg\\\"></i></a>&nbsp; </span> <span ng-show=\\\"editing\\\" class=\\\"text-nowrap\\\"> <input type=\\\"{{keyType}}\\\" ng-keyup=\\\"onKeyup($event)\\\" ng-model=\\\"newKey\\\"> <input type=\\\"{{valueType}}\\\" ng-keyup=\\\"onKeyup($event)\\\" ng-model=\\\"newValue\\\"> <a href style=\\\"text-decoration:none\\\" ng-click=\\\"add(values, newKey, newValue)\\\"><i class=\\\"fa fa-plus fa-lg\\\"></i></a> <a href style=\\\"text-decoration:none\\\" ng-click=\\\"unedit()\\\"><i class=\\\"fa fa-close fa-lg\\\"></i></a> </span> <span ng-transclude></span> </span>\";\n// Exports\nvar _module_exports = code;;\nvar path = '/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editMapInPlace.html';\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, _module_exports) }]);\nmodule.exports = path;","// Module\nvar code = \"<span> <div class=\\\"modal-header\\\"> <h3><i class=\\\"fa fa-exclamation-triangle text-warning\\\"></i> Permission Denied</h3> </div> <div class=\\\"modal-body\\\"> <h5> You are not allowed to perform the requested action. </h5> <p class=\\\"text-muted\\\"> This is not supposed to happen. Please reload the page and contact your administrator if this occurs more often. </p> </div> <div class=\\\"modal-footer\\\"> <button class=\\\"btn btn-primary\\\" ng-click=\\\"reload()\\\">Reload</button> </div> </span>\";\n// Exports\nvar _module_exports = code;;\nvar path = '/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/lib/onms-http/403-permission-denied.html';\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, _module_exports) }]);\nmodule.exports = path;","export default class Util {\n\tstatic getBaseHref() {\n\t\tconst base = document.getElementsByTagName('base')[0];\n\t\tif (base) {\n\t\t\treturn base.href;\n\t\t}\n\t\treturn '';\n\t}\n\tstatic setLocation(url) {\n\t\tif (window && window.location) {\n\t\t\twindow.location.href = Util.getBaseHref() + url;\n\t\t}\n\t}\n\tstatic toggle(booleanValue, elementName) {\n\t\tvar checkboxes = document.getElementsByName(elementName);\n\t\tfor (var index in checkboxes) {\n\t\t\tif (checkboxes.hasOwnProperty(index)) {\n\t\t\t\tcheckboxes[index].checked = booleanValue;\n\t\t\t}\n\t\t}\n\t}\n}","/* Load jQuery first, so Angular finds it */\nrequire('./jquery-js');\n\n/* Angular Core */\nconst angular = require('angular');\nrequire('angular-animate');\nrequire('angular-cookies');\nrequire('angular-route');\nrequire('angular-resource');\nrequire('angular-sanitize');\n\n/* 3rd-Party Modules */\nrequire('angular-growl-v2');\nrequire('angular-loading-bar');\n\nrequire('angular-growl-v2/build/angular-growl.css');\nrequire('angular-loading-bar/build/loading-bar.css');\n\n/* Bootstrap UI */\nrequire('vendor/bootstrap-js');\nrequire('angular-bootstrap-checkbox');\nrequire('ui-bootstrap4'); // angular-ui-boostrap for bootstrap 4\n\nconsole.log('init: angular-js ' + angular.version.full); // eslint-disable-line no-console\n\nmodule.exports = window['angular'] = angular;","/**\n* @author Alejandro Galue <agalue@opennms.org>\n* @copyright 2016-2022 The OpenNMS Group, Inc.\n*/\n\n'use strict';\n\nconst angular = require('vendor/angular-js');\nrequire('lib/onms-http');\n\nconst kscTemplate = require('./template.ksc.html');\nconst nodesTemplate = require('./template.nodes.html');\n\nimport Util from 'lib/util';\n\nangular.module('onms-search', [\n  'onms.http',\n  'ui.bootstrap'\n])\n\n.config(['$locationProvider', function($locationProvider) {\n  $locationProvider.hashPrefix('');\n}])\n\n.directive('onmsSearchNodes', function() {\n  return {\n    restrict: 'E',\n    transclude: true,\n    templateUrl: nodesTemplate,\n    controller: 'NodeSearchCtrl'\n  };\n})\n\n.directive('onmsSearchKsc', function() {\n  return {\n    restrict: 'E',\n    transclude: true,\n    templateUrl: kscTemplate,\n    controller: 'KscSearchCtrl'\n  };\n})\n\n.controller('NodeSearchCtrl', ['$scope', '$window', '$http', function($scope, $window, $http) {\n\n  $scope.getNodes = function(criteria) {\n    return $http({\n      url: 'rest/nodes',\n      method: 'GET',\n      params: { label: criteria, comparator: 'contains' }\n    }).then(function(response) {\n      return response.data.node;\n    });\n  };\n\n  $scope.goToChooseResources = function(node) {\n    $window.location.href = Util.getBaseHref() + 'graph/chooseresource.jsp?node=' + node.id;\n  }\n\n}])\n\n.controller('KscSearchCtrl', ['$scope', '$window', '$http', '$filter', function($scope, $window, $http, $filter) {\n\n  $scope.getKscReports = function(criteria) {\n    return $http({\n      url: 'rest/ksc',\n      method: 'GET'\n    }).then(function(response) {\n       return $filter('filter')(response.data.kscReport, criteria);\n    });\n  };\n\n  $scope.goToKscReport = function(ksc) {\n    $window.location.href = Util.getBaseHref() + 'KSC/customView.htm?type=custom&report=' + ksc.id;\n  }\n\n}]);","// Module\nvar code = \"<div class=\\\"form-group\\\"> <div class=\\\"input-group\\\"> <input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"asyncKsc\\\" placeholder=\\\"Type the KSC report name\\\" uib-typeahead=\\\"ksc as ksc.label for ksc in getKscReports($viewValue)\\\" typeahead-editable=\\\"false\\\" typeahead-loading=\\\"kscLoadingNodes\\\" typeahead-no-results=\\\"kscNoResults\\\" typeahead-min-length=\\\"1\\\" typeahead-on-select=\\\"goToKscReport($item)\\\"> <div class=\\\"input-group-append\\\"> <span class=\\\"input-group-text\\\"><i class=\\\"fa fa-search\\\"></i></span> </div> </div> <i ng-show=\\\"kscLoadingNodes\\\" class=\\\"fa fa-refresh\\\"></i> <p class=\\\"form-text text-muted\\\" ng-show=\\\"kscNoResults\\\"> <i class=\\\"fa fa-remove\\\"></i> No Results Found </p> </div> \";\n// Exports\nvar _module_exports = code;;\nvar path = '/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/search/template.ksc.html';\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, _module_exports) }]);\nmodule.exports = path;","// Module\nvar code = \"<div class=\\\"form-group\\\"> <div class=\\\"input-group\\\"> <input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"asyncNode\\\" placeholder=\\\"Type the node label\\\" uib-typeahead=\\\"node as node.label for node in getNodes($viewValue)\\\" typeahead-editable=\\\"false\\\" typeahead-loading=\\\"nodeLoadingNodes\\\" typeahead-no-results=\\\"nodeNoResults\\\" typeahead-min-length=\\\"1\\\" typeahead-on-select=\\\"goToChooseResources($item)\\\"> <div class=\\\"input-group-append\\\"> <span class=\\\"input-group-text\\\"><i class=\\\"fa fa-search\\\"></i></span> </div> </div> <i ng-show=\\\"nodeLoadingNodes\\\" class=\\\"fa fa-refresh\\\"></i> <p class=\\\"form-text text-muted\\\" ng-show=\\\"nodeNoResults\\\"> <i class=\\\"fa fa-remove\\\"></i> No Results Found </p> </div> \";\n// Exports\nvar _module_exports = code;;\nvar path = '/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/search/template.nodes.html';\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, _module_exports) }]);\nmodule.exports = path;","const angular = require('vendor/angular-js');\nrequire('../../lib/onms-http');\nrequire('angular-bootstrap-toggle/dist/angular-bootstrap-toggle');\nrequire('angular-bootstrap-toggle/dist/angular-bootstrap-toggle.css');\nrequire('angular-ui-router');\n\nconst quickSearchTemplate  = require('./quicksearch.html');\n\nconst globalErrorHandling = function(scope, errorResponse) {\n    if (errorResponse.data) {\n        scope.error = errorResponse.data;\n    } else {\n        scope.error = \"An unexpected error occurred while handling the request\";\n    }\n};\n\n(function() {\n    'use strict';\n\n    var MODULE_NAME = 'onms.central.search';\n\n    angular.module(MODULE_NAME, [\n        'angular-loading-bar',\n        'ngResource',\n        'ui.router',\n        'onms.http',\n    ])\n        .config(['$locationProvider', function($locationProvider) {\n            $locationProvider.hashPrefix('');\n        }])\n\n        .directive('onmsCentralSearch', function() {\n            return {\n                restrict: 'E',\n                transclude: false,\n                templateUrl: quickSearchTemplate,\n                controller: 'QuickSearchController'\n            };\n        })\n        .factory('SearchResource', function($resource) {\n            return $resource('api/v2/search', {}, {\n                'query':      { method: 'GET', isArray: true, cancellable: true },\n            });\n        })\n        .controller('QuickSearchController', ['$scope', 'SearchResource', '$timeout', '$document', function($scope, SearchResource, $timeout, $document) {\n            var KeyCodes = {\n                ENTER: 13,\n                SHIFT: 16,\n                ESC: 27,\n                KEY_LEFT: 37,\n                KEY_UP: 38,\n                KEY_RIGHT: 39,\n                KEY_DOWN: 40,\n            };\n\n            var Types = {\n                Group: 'Group',\n                Item: 'Item',\n                More: 'More'\n            };\n\n            $scope.query = '';\n            $scope.results = {};\n            $scope.performSearchExecuted = false;\n            $scope.showLoadingIndicator = false;\n            $scope.showLoadingIndicatorDelay = 250;\n            $scope.performSearchDelay = 500; // in ms\n            $scope.performSearchPromise = undefined;\n            $scope.performSearchHandle = undefined;\n            $scope.showLoadingIndicatorPromise = undefined;\n            $scope.shiftLastPressed = undefined;\n            $scope.selectedIndex = 0;\n\n            $document.bind('mousedown', function(event) {\n                var isChild = $('#onms-search-form').has(event.target).length > 0;\n                var isSelf = $('#onms-search-form').is(event.target);\n                var isInside = isChild || isSelf;\n                if (!isInside) {\n                    $timeout(function() {\n                        $scope.resetQuery();\n                        $scope.cancelRequest();\n                    });\n                }\n            });\n\n            $document.bind('keyup', function(e) {\n                // Search Focus Field\n                $timeout(function() {\n                    if (e.keyCode === KeyCodes.SHIFT && new Date() - $scope.shiftLastPressed <= 350) {\n                        angular.element('#onms-search-query').focus();\n                        angular.element('#onms-search-query').select();\n                        $scope.shiftLastPressed = undefined;\n                    } else if(e.keyCode === KeyCodes.SHIFT) {\n                        $scope.shiftLastPressed = new Date();\n                    }\n\n                    // Reset Search\n                    if (e.keyCode === KeyCodes.ESC) {\n                        $scope.resetQuery();\n                        $scope.cancelRequest();\n                    }\n                });\n            });\n\n            $document.bind('keydown', function(e) {\n                $timeout(function() {\n                    if ($scope.results.length > 0) {\n                        var element = document.getElementById('onms-search-result-item-' + $scope.selectedIndex);\n                        if (e.keyCode === KeyCodes.KEY_UP || e.keyCode === KeyCodes.KEY_DOWN) {\n                            $scope.navigateSearchResult(e.keyCode);\n\n                            // Ideally we would use scrollToView(), but that will also scroll the body, which\n                            // results in the header scrolling down slightly, which looks weird when using the search\n                            // So instead scrolling is implemented manually\n                            var parentComponent = document.getElementById('onms-search-result');\n                            var parentHeight = parentComponent.clientHeight;\n                            var resultHeight = element.clientHeight;\n                            var resultOffset = element.offsetTop;\n                            var padding = 25;\n\n                            // Scroll down\n                            if (resultOffset + resultHeight + padding >= parentHeight + parentComponent.scrollTop) {\n                                parentComponent.scrollTop = resultOffset;\n                            }\n                            // Scroll up\n                            if (parentComponent.scrollTop !== 0\n                                && parentComponent.scrollTop > resultOffset - resultHeight) {\n                                parentComponent.scrollTop = resultOffset - resultHeight;\n                            }\n                        }\n                        if (e.keyCode === KeyCodes.ENTER) {\n                            if ($scope.results[$scope.selectedIndex].type === Types.More) {\n                                // Ensure next action is run in angular context\n                                // Do not use angular.$apply here, as it may fail on angular sites,\n                                // such as the requisition ui\n                                $timeout(function() {\n                                    angular.element(element).triggerHandler('click');\n                                }, 0);\n                            } else {\n                                $scope.resetQuery();\n                                $scope.cancelRequest();\n                                element.click();\n                            }\n                        }\n                    }\n                });\n            });\n\n            $scope.navigateSearchResult = function(keyCode) {\n                $scope.results[$scope.selectedIndex].selected = false;\n                switch(keyCode) {\n                    case KeyCodes.KEY_UP:\n                        $scope.selectedIndex--;\n                        break;\n                    case KeyCodes.KEY_DOWN:\n                        $scope.selectedIndex++;\n                        break;\n                    default:\n                        break;\n                }\n                if ($scope.selectedIndex < 1) {\n                    $scope.selectedIndex = 1;\n                }\n                if ($scope.selectedIndex >= $scope.results.length) {\n                    $scope.selectedIndex = $scope.results.length - 1;\n                }\n                if ($scope.results[$scope.selectedIndex].type === Types.Group) {\n                    $scope.navigateSearchResult(keyCode); // Skip group element\n                } else {\n                    $scope.results[$scope.selectedIndex].selected = true;\n                }\n            };\n\n            $scope.resetQuery = function() {\n                $scope.query = '';\n                $scope.results = [];\n                $scope.performSearchExecuted = false;\n                if ($scope.performSearchHandle) {\n                    $scope.performSearchHandle.$cancelRequest();\n                }\n            };\n\n            $scope.cancelRequest = function() {\n                if ($scope.performSearchHandle) {\n                    $scope.performSearchHandle.$cancelRequest();\n                }\n                $scope.showLoadingIndicator = false;\n                $timeout.cancel($scope.showLoadingIndicatorPromise);\n            };\n\n            // Ensure there is no difference between selected and mouseover\n            $scope.select = function(index) {\n                var selectIndex = index || 1;\n                if ($scope.selectedIndex >= 1) {\n                    $scope.results[$scope.selectedIndex].selected = false;\n                }\n                $scope.selectedIndex = selectIndex;\n                $scope.results[$scope.selectedIndex].selected = true;\n            };\n\n            $scope.onQueryChange = function() {\n                if ($scope.query.length == 0) {\n                    $scope.resetQuery();\n                    return;\n                }\n                if ($scope.query.length < 3) {\n                    return;\n                }\n\n                // Stop any previous loading\n                $timeout.cancel($scope.performSearchPromise);\n                $scope.results = [];\n                $scope.performSearchExecuted = false;\n\n                // Start timeout before actually searching, this will allow for not invoking when the user\n                // is still typing. Fiddle with $scope.loadingDelay to make it resolve faster\n                $scope.performSearchPromise = $timeout(function() {\n                    // Stop any previously started delay\n                    $timeout.cancel($scope.showLoadingIndicatorPromise);\n\n                    // Kick of loading indicator\n                    $scope.showLoadingIndicatorPromise = $timeout(function() {\n                        $scope.showLoadingIndicator = true;\n                    }, $scope.showLoadingIndicatorDelay);\n\n                    // Cancel any previous request\n                    if ($scope.performSearchHandle) {\n                        $scope.performSearchHandle.$cancelRequest();\n                    }\n\n                    // Kick of the search\n                    $scope.error = undefined;\n                    $scope.performSearchHandle = SearchResource.query({'_s' : $scope.query},\n                        function(data) {\n                            $scope.cancelRequest();\n                            $scope.performSearchExecuted = true;\n\n                            var results = [];\n                            data.forEach(function(eachResult) {\n                                // Create the header\n                                results.push({\n                                        context: eachResult.context.name,\n                                        // Make the label have an s at the end if it has multiple items\n                                        label: eachResult.results.length > 1 ? eachResult.context.name + 's' : eachResult.context.name,\n                                        type: Types.Group,\n                                        count: eachResult.results.length,\n                                        more: eachResult.more\n                                    }\n                                );\n\n                                eachResult.results.forEach(function(item) {\n                                    item.type = Types.Item;\n                                    results.push(item);\n                                });\n\n                                if (eachResult.more === true) {\n                                    var showMoreElement = {\n                                        context: eachResult.context.name,\n                                        count: eachResult.results.length,\n                                        type: Types.More,\n                                        loadMore: function() {\n                                            $scope.error = undefined;\n                                            SearchResource.query({'_s': $scope.query, '_l': this.count + 10, '_c' : this.context}, function(response) {\n                                                var endIndex = $scope.results.indexOf(showMoreElement);\n\n                                                // The result is context focused, so there is only one search result anyways\n                                                var searchResult = response[0];\n                                                var results = searchResult.results.slice(endIndex - 1); // Remove first elements, as they are already being showed\n                                                results.forEach(function(item, i) {\n                                                    // Add item\n                                                    item.type = Types.Item;\n                                                    $scope.results.splice(endIndex + i, 0, item);\n                                                    showMoreElement.count++;\n                                                });\n                                                // Toggle Selection\n                                                showMoreElement.selected = false;\n                                                $scope.results[$scope.selectedIndex].selected = true;\n\n                                                // Hide element\n                                                if (searchResult.more === false) {\n                                                    $scope.results.splice($scope.results.indexOf(showMoreElement), 1);\n                                                }\n                                            }, function(response) {\n                                                $scope.performSearchExecuted = true;\n                                                globalErrorHandling($scope, response);\n                                            });\n                                        },\n                                        selected: false\n                                    };\n                                    results.push(showMoreElement);\n                                }\n                            });\n                            $scope.results = results;\n                            if ($scope.results.length != 0) {\n                                $scope.selectedIndex = 1;\n                                $scope.results[$scope.selectedIndex].selected = true;\n                            }\n                        },\n                        function(response) {\n                            if (response.status >= 0) {\n                                $scope.performSearchExecuted = true;\n                                globalErrorHandling($scope, response);\n                                $scope.cancelRequest();\n                            } else {\n                                // Request cancelled\n                            }\n                        }\n                    );\n                }, $scope.performSearchDelay);\n            };\n        }])\n    ;\n}());\n","// Module\nvar code = \"<span> <style>.search-result{max-height:700px;min-width:280px;max-width:60%;position:absolute;top:100%;z-index:100000;overflow:auto;border:#343a40 solid 1px}.search-result .list-group-item{padding:.25rem .75rem;font-size:90%}.search-result .list-group-item:last-child{border-bottom-right-radius:0;border-bottom-left-radius:0}.search-bar .form-control{border:none;outline:0;box-shadow:none;border-radius:1rem;padding:0}.search-bar .input-group-text{border-top-left-radius:1rem;border-bottom-left-radius:1rem;background-color:#fff;border-color:#fff}.search-result .list-group-item:hover{background-color:#e9ecef}.selected{background-color:#e9ecef}</style> <form id=\\\"onms-search-form\\\" autocomplete=\\\"off\\\" novalidate class=\\\"form-inline\\\"> <input autocomplete=\\\"false\\\" name=\\\"hidden\\\" type=\\\"text\\\" style=\\\"display:none\\\"> <div class=\\\"input-group search-bar\\\"> <div class=\\\"input-group-prepend\\\"> <div class=\\\"input-group-text\\\"><i class=\\\"fa fa-search\\\"></i></div> </div> <label class=\\\"form-control\\\"> <input id=\\\"onms-search-query\\\" ng-change=\\\"onQueryChange()\\\" ng-focus=\\\"input.focus=true\\\" ng-blur=\\\"input.focus=false\\\" ng-model=\\\"query\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Search...\\\" aria-label=\\\"Search\\\"> <small class=\\\"text-muted mr-4 quick-search-chevron\\\" ng-show=\\\"!input.focus\\\"> <span></span> <span></span> </small> </label> <div ng-if=\\\"showLoadingIndicator\\\" class=\\\"btn btn-secondary rounded-0\\\"> <div class=\\\"spinner-border spinner-border-sm text-white\\\" role=\\\"status\\\"></div> <span class=\\\"sr-only\\\">Loading...</span> </div> <div ng-if=\\\"performSearchExecuted === true && !showLoadingIndicator\\\" class=\\\"input-group-append\\\"> <button class=\\\"btn btn-secondary\\\" type=\\\"button\\\" title=\\\"Reset Search\\\" ng-click=\\\"resetQuery()\\\"><i class=\\\"fa fa-times\\\"></i></button> </div> <div ng-if=\\\"showLoadingIndicator\\\" class=\\\"input-group-append\\\"> <button class=\\\"btn btn-secondary\\\" type=\\\"button\\\" title=\\\"Cancel Request\\\" ng-click=\\\"cancelRequest()\\\"><i class=\\\"fa fa-times\\\"></i></button> </div> </div> <div ng-if=\\\"performSearchExecuted === true\\\" class=\\\"bg-dark search-result rounded-bottom\\\" id=\\\"onms-search-result\\\"> <div class=\\\"list-group\\\" ng-if=\\\"results.length > 0\\\"> <div id=\\\"onms-search-result-item-{{$index}}\\\" ng-repeat-start=\\\"item in results track by $index\\\" ng-if=\\\"item.type === 'Group'\\\" class=\\\"list-group-item bg-dark text-grey border-0 pl-2\\\"> <span ng-if=\\\"!item.t\\\">{{item.label}}</span> </div> <a id=\\\"onms-search-result-item-{{$index}}\\\" ng-class=\\\"{'selected': item.selected}\\\" ng-if=\\\"item.type === 'More'\\\" ng-click=\\\"item.loadMore()\\\" class=\\\"list-group-item list-group-item-action\\\" href ng-mouseover=\\\"select($index)\\\">more...</a> <a id=\\\"onms-search-result-item-{{$index}}\\\" ng-class=\\\"{'selected': item.selected}\\\" ng-repeat-end ng-if=\\\"item.type === 'Item'\\\" href=\\\"{{item.url}}\\\" class=\\\"list-group-item list-group-item-action\\\" ng-mouseover=\\\"select($index)\\\" ng-click=\\\"resetQuery()\\\"> <h6 class=\\\"mb-0\\\"><i class=\\\"{{item.icon}}\\\" ng-if=\\\"item.icon\\\">&nbsp;</i>{{item.label}} <i style=\\\"-webkit-transform:scaleY(-1);transform:scaleY(-1)\\\" class=\\\"fa fa-reply pull-right\\\" ng-if=\\\"item.selected\\\"></i></h6> <small class=\\\"mr-4\\\" ng-class=\\\"{'text-muted': !item.selected}\\\" ng-repeat=\\\"match in item.matches\\\">{{match.label}}: {{match.value}}</small> <br ng-if=\\\"item.info !== ''\\\"> <small class=\\\"mr-4\\\" ng-class=\\\"{'text-muted': !item.selected}\\\" ng-if=\\\"item.info !== ''\\\">{{item.info}}</small> </a> </div> <div ng-if=\\\"!error && results.length === 0\\\" class=\\\"text-grey\\\"> <span>No Results found</span> </div> <div ng-if=\\\"error\\\" class=\\\"alert alert-danger mx-2 my-2\\\"> <span>{{error}}</span> </div> </div> </form> </span> \";\n// Exports\nvar _module_exports = code;;\nvar path = '/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-central-search/quicksearch.html';\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, _module_exports) }]);\nmodule.exports = path;","console.log('init: jquery-js'); // eslint-disable-line no-console\n\nconst jQuery = require('jquery');\nrequire('jquery-migrate');\n\nmodule.exports = jQuery;\n","const angular = require('vendor/angular-js');\nconst search = require('apps/search');\nconst centralSearch = require('apps/onms-central-search');\n\nconst MODULE_NAME = 'onms.default.apps';\n\nangular.module(MODULE_NAME, [ 'onms.central.search', 'onms-search' ]);\n","// Module\nvar code = \"<div> <div class=\\\"jumbotron\\\"> <p> Nominatim is a search engine for OpenStreetMap data. It allows to look up the coordinates for a given address (forward search). </p> <p> For more information visit the <a href=\\\"https://wiki.openstreetmap.org/wiki/Nominatim\\\" target=\\\"_blank\\\">Nominatim Wiki Page</a>. </p> <p> Please note, that all usage of the Nominatim Service must follow the <a href=\\\"https://operations.osmfoundation.org/policies/nominatim/\\\" target=\\\"_blank\\\">Nominatim Usage Policy</a>. </p> </div> <form class=\\\"form\\\" name=\\\"form\\\"> <div class=\\\"form-group\\\"> <label for=\\\"nominatimEmail\\\">Email</label> <input id=\\\"nominatimEmail\\\" name=\\\"nominatimEmail\\\" class=\\\"form-control\\\" type=\\\"email\\\" ng-required=\\\"true\\\" ng-model=\\\"geocoder.config.email\\\" ng-class=\\\"{ 'is-invalid' : form.nominatimEmail.$invalid || configError.email }\\\"> <p id=\\\"configError.email\\\" class=\\\"invalid-feedback\\\">{{configError.email || \\\"Please provide a valid email address\\\"}}</p> </div> <div class=\\\"form-group\\\"> <label for=\\\"nominatimUserAgent\\\">User Agent</label> <input id=\\\"nominatimUserAgent\\\" name=\\\"nominatimUserAgent\\\" class=\\\"form-control\\\" type=\\\"text\\\" ng-model=\\\"geocoder.config.userAgent\\\" ng-change=\\\"validateFieldsManually()\\\" ng-class=\\\"{ 'is-invalid' : form.nominatimUserAgent.$invalid || configError.userAgent }\\\"> <p id=\\\"configError.userAgent\\\" class=\\\"invalid-feedback\\\">{{configError.userAgent || \\\"User Agent or Referer must be set\\\"}}</p> </div> <div class=\\\"form-group\\\"> <label for=\\\"nominatimReferer\\\">Referer</label> <input id=\\\"nominatimReferer\\\" name=\\\"nominatimReferer\\\" class=\\\"form-control\\\" type=\\\"text\\\" ng-model=\\\"geocoder.config.referer\\\" ng-change=\\\"validateFieldsManually()\\\" ng-class=\\\"{ 'is-invalid' : form.nominatimReferer.$invalid || configError.referer }\\\"> <p id=\\\"configError.referer\\\" class=\\\"invalid-feedback\\\">{{configError.referer || \\\"User Agent or Referer must be set\\\"}}</p> </div> <div class=\\\"form-group\\\"> <label style=\\\"width:180px\\\" for=\\\"nominatimAcceptUsageTerms\\\">Accept <a href=\\\"https://operations.osmfoundation.org/policies/nominatim/\\\" target=\\\"_blank\\\">Usage Terms <i class=\\\"fa fa-share-square-o\\\"></i></a></label> <toggle id=\\\"nominatimAcceptUsageTerms\\\" name=\\\"nominatimAcceptUsageTerms\\\" on=\\\"Yes\\\" off=\\\"No\\\" size=\\\"btn-sm\\\" width=\\\"51px\\\" ng-model=\\\"geocoder.config.acceptUsageTerms\\\" ng-class=\\\"{ 'is-invalid' : form.nominatimAcceptUsageTerms.$invalid || geocoder.config.acceptUsageTerms === false || configError.acceptUsageTerms }\\\"></toggle> <p id=\\\"configError.acceptUsageTerms\\\" class=\\\"invalid-feedback\\\">{{configError.acceptUsageTerms || \\\"Please accept the usage terms\\\"}}</p> </div> <div class=\\\"form-group\\\"> <label style=\\\"width:180px\\\" for=\\\"nominatimSystemProxy\\\">Use System Proxy</label> <toggle id=\\\"nominatimSystemProxy\\\" name=\\\"nominatimSystemProxy\\\" on=\\\"Yes\\\" off=\\\"No\\\" size=\\\"btn-sm\\\" width=\\\"51px\\\" ng-model=\\\"geocoder.config.useSystemProxy\\\" ng-class=\\\"{ 'is-invalid' : form.nominatimSystemProxy.$invalid || configError.useSystemProxy }\\\"></toggle> <p id=\\\"configError.useSystemProxy\\\" class=\\\"invalid-feedback\\\">{{configError.useSystemProxy}}</p> </div> <p class=\\\"text-warning\\\" ng-if=\\\"form.$dirty\\\">You have unsaved changes</p> <button id=\\\"saveButton\\\" class=\\\"btn btn-primary\\\" type=\\\"button\\\" ng-click=\\\"save()\\\" ng-disabled=\\\"!form.$dirty || form.$invalid || validateFieldsManually() !== true\\\"><i class=\\\"fa fa-save\\\"></i> Save</button> </form> </div>\";\n// Exports\nvar _module_exports = code;;\nvar path = '/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-geoservice/views/config/nominatim.html';\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, _module_exports) }]);\nmodule.exports = path;","// Module\nvar code = \"<div> <form class=\\\"form\\\" name=\\\"form\\\"> <div class=\\\"jumbotron\\\"> <p> The Google Geocoding API is a service that provides geocoding and reverse geocoding of addresses. </p> <p> For more information refer to the <a href=\\\"https://developers.google.com/maps/documentation/geocoding/start\\\" target=\\\"_blank\\\">official documentation</a>. </p> </div> <div class=\\\"form-group\\\"> <div class=\\\"form-check\\\"> <input class=\\\"form-check-input\\\" type=\\\"checkbox\\\" id=\\\"googleClientIdAuthentication\\\" name=\\\"googleClientIdAuthentication\\\" ng-model=\\\"geocoder.config.useEnterpriseCredentials\\\"> <label class=\\\"form-check-label\\\" for=\\\"googleClientIdAuthentication\\\"> Use clientId and signature to authenticate </label> </div> </div> <div class=\\\"form-group\\\" ng-if=\\\"!geocoder.config.useEnterpriseCredentials\\\"> <label for=\\\"googleApiKey\\\">API Key</label> <input id=\\\"googleApiKey\\\" name=\\\"googleApiKey\\\" class=\\\"form-control\\\" type=\\\"text\\\" ng-required=\\\"true\\\" ng-model=\\\"geocoder.config.apiKey\\\" ng-class=\\\"{ 'is-invalid' : form.googleApiKey.$invalid || configError.apiKey }\\\"> <p id=\\\"configError.apiKey\\\" class=\\\"invalid-feedback\\\">{{configError.apiKey || \\\"Please provide a value\\\"}}</p> </div> <div class=\\\"form-group\\\" ng-if=\\\"geocoder.config.useEnterpriseCredentials\\\"> <label for=\\\"googleClientId\\\">Client ID</label> <input id=\\\"googleClientId\\\" name=\\\"googleClientId\\\" class=\\\"form-control\\\" type=\\\"text\\\" ng-required=\\\"true\\\" ng-model=\\\"geocoder.config.clientId\\\" ng-class=\\\"{ 'is-invalid' : form.googleClientId.$invalid || configError.clientId }\\\"> <p id=\\\"configError.clientId\\\" class=\\\"invalid-feedback\\\">{{configError.clientId || \\\"Please provide a value\\\"}}</p> </div> <div class=\\\"form-group\\\" ng-if=\\\"geocoder.config.useEnterpriseCredentials\\\"> <label for=\\\"googleClientKey\\\">Signature</label> <input id=\\\"googleClientKey\\\" name=\\\"googleClientKey\\\" class=\\\"form-control\\\" type=\\\"text\\\" ng-required=\\\"true\\\" ng-model=\\\"geocoder.config.signature\\\" ng-class=\\\"{ 'is-invalid' : form.googleClientKey.$invalid || configError.signature }\\\"> <p id=\\\"configError.signature\\\" class=\\\"invalid-feedback\\\">{{configError.signature || \\\"Please provide a value\\\"}}</p> </div> <div class=\\\"form-group\\\"> <label for=\\\"googleTimeout\\\">Timeout (ms)</label> <input id=\\\"googleTimeout\\\" name=\\\"googleTimeout\\\" min=\\\"0\\\" class=\\\"form-control\\\" type=\\\"number\\\" ng-model=\\\"geocoder.config.timeout\\\" ng-class=\\\"{ 'is-invalid' : form.googleTimeout.$invalid || configError.timeout }\\\"> <p id=\\\"configError.timeout\\\" class=\\\"invalid-feedback\\\">{{configError.timeout || \\\"Timeout must be &gt;= 0\\\"}}</p> </div> <div class=\\\"form-group\\\"> <label class=\\\"mr-2\\\" for=\\\"googleSystemProxy\\\">Use System Proxy</label> <toggle id=\\\"googleSystemProxy\\\" name=\\\"googleSystemProxy\\\" ng-model=\\\"geocoder.config.useSystemProxy\\\" on=\\\"Yes\\\" off=\\\"No\\\" size=\\\"btn-sm\\\" width=\\\"51px\\\" ng-class=\\\"{ 'is-invalid' : form.googleSystemProxy.$invalid || configError.useSystemProxy }\\\"></toggle> <p id=\\\"configError.useSystemProxy\\\" class=\\\"invalid-feedback\\\">{{configError.useSystemProxy}}</p> </div> <p class=\\\"text-warning\\\" ng-if=\\\"form.$dirty\\\">You have unsaved changes</p> <button id=\\\"saveButton\\\" class=\\\"btn btn-primary\\\" type=\\\"button\\\" ng-click=\\\"save()\\\" ng-disabled=\\\"!form.$dirty || form.$invalid || validateFieldsManually() !== true\\\"><i class=\\\"fa fa-save\\\"></i> Save</button> </form> </div>\";\n// Exports\nvar _module_exports = code;;\nvar path = '/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-geoservice/views/config/google.html';\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, _module_exports) }]);\nmodule.exports = path;","// Module\nvar code = \"<div> <div class=\\\"jumbotron\\\"> <p> In order to use Mapquest, you must register and sign up for an API Key. </p> <p> For more information visit the <a href=\\\"https://developer.mapquest.com/documentation/geocoding-api/\\\" target=\\\"_blank\\\">Mapquest Geocoding API Page</a>. </p> </div> <form class=\\\"form\\\" name=\\\"form\\\"> <div class=\\\"form-group\\\"> <label for=\\\"mapquestApiKey\\\">API Key</label> <input id=\\\"mapquestApiKey\\\" name=\\\"mapquestApiKey\\\" class=\\\"form-control\\\" type=\\\"text\\\" ng-required=\\\"true\\\" ng-model=\\\"geocoder.config.apiKey\\\" ng-class=\\\"{ 'is-invalid' : form.mapquestApiKey.$invalid || configError.apiKey }\\\"> <p id=\\\"configError.apiKey\\\" class=\\\"invalid-feedback\\\">{{configError.apiKey || \\\"Please provide a value\\\"}}</p> </div> <div class=\\\"form-group\\\"> <label for=\\\"mapquestSystemProxy\\\" class=\\\"mr-2\\\">Use System Proxy</label> <toggle id=\\\"mapquestSystemProxy\\\" name=\\\"mapquestSystemProxy\\\" ng-model=\\\"geocoder.config.useSystemProxy\\\" on=\\\"Yes\\\" off=\\\"No\\\" size=\\\"btn-sm\\\" width=\\\"51px\\\" ng-class=\\\"{ 'is-invalid' : form.mapquestSystemProxy.$invalid || configError.useSystemProxy }\\\"></toggle> <p id=\\\"configError.useSystemProxy\\\" class=\\\"invalid-feedback\\\">{{configError.useSystemProxy}}</p> </div> <p class=\\\"text-warning\\\" ng-if=\\\"form.$dirty\\\">You have unsaved changes</p> <button id=\\\"saveButton\\\" class=\\\"btn btn-primary\\\" type=\\\"button\\\" ng-click=\\\"save()\\\" ng-disabled=\\\"!form.$dirty || form.$invalid || validateFieldsManually() !== true\\\"><i class=\\\"fa fa-save\\\"></i> Save</button> </form> </div>\";\n// Exports\nvar _module_exports = code;;\nvar path = '/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-geoservice/views/config/mapquest.html';\nwindow.angular.module('ng').run(['$templateCache', function(c) { c.put(path, _module_exports) }]);\nmodule.exports = path;","console.log('init: moment-js'); // eslint-disable-line no-console\n\nconst moment = require('moment');\nrequire('moment-timezone');\nrequire('@rangerrick/moment-javaformat');\n\nmodule.exports = moment;"],"sourceRoot":""}