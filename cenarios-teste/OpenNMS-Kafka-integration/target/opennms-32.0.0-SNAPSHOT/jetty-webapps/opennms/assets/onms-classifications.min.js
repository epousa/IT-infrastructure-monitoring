!function(e,o){if("object"==typeof exports&&"object"==typeof module)module.exports=o();else if("function"==typeof define&&define.amd)define([],o);else{var t=o();for(var s in t)("object"==typeof exports?exports:e)[s]=t[s]}}(window,(function(){return(window.webpackJsonp=window.webpackJsonp||[]).push([[40,2,8,25,35,39,43,49,52,65,71],{10:function(e,exports,o){"use strict";var t,s=(t=o(70))&&t.__esModule?t:{default:t};var angular=o(3),r=o(22);angular.module("onms.http",["ui.bootstrap"]).factory("InterceptorService",["$q","$rootScope",function(e,o){return{responseError:function(t){var r,a;401===t.status&&(t.config&&t.config.url&&((0,s.default)(r=t.config.url).call(r,"rest/")||(0,s.default)(a=t.config.url).call(a,"api/v2/"))&&(console.error("Login Required",t,t.headers),o.$emit("loginRequired")));return 403===t.status&&o.$emit("permissionDenied"),e.reject(t)}}}]).config(["$locationProvider",function(e){e.hashPrefix("")}]).config(["$httpProvider",function(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.interceptors.push("InterceptorService")}]).run(["$rootScope","$uibModal",function(e,o){e.$on("loginRequired",(function(){var e=document.getElementsByTagName("base");e&&e.length>0&&e[0].href?document.headerLogoutForm.submit():console.warn("Login is required, but cannot forward to login page due to missing base tag.")})),e.$on("permissionDenied",(function(){o.open({templateUrl:r,controller:["$scope","$uibModalInstance",function($scope,e){$scope.reload=function(){e.dismiss(),window.location.reload()}}],size:"",backdrop:"static",keyboard:!1})}))}]),e.exports=angular},1010:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-classifications/views/index.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div class="row"> <div class="" ng-class="{\'col-md-12\': isClassificationCollapsed, \'col-md-9\': !isClassificationCollapsed}"> <ul id="tabs" class="nav nav-tabs"> <li role="presentation" class="nav-item"> <a ui-sref-active="active" ui-sref="classifications.config" data-name="settings" class="nav-link">Settings</a> </li> <li role="presentation" ng-repeat="group in groups" class="nav-item"> <a ui-sref-active="active" ui-sref="classifications.group({\'id\': group.id, \'group\': group})" title="{{group.description}}" data-name="{{group.name}}" class="nav-link"> {{group.name | capitalize}} Rules <span class="badge badge-primary" title="{{group.ruleCount}} defined rules">{{group.ruleCount}}</span> </a> </li> <button id="action.classification.toggle" class="btn btn-secondary mr-3" style="position:absolute;right:0;z-index:900" ng-click="isClassificationCollapsed = !isClassificationCollapsed" title="{{isClassificationCollapsed ? \'Test classification\' : \'Collapse classification panel\'}}"> <i class="fa" ng-class="{\'fa-magic\': isClassificationCollapsed, \'fa-caret-right\': !isClassificationCollapsed}"></i> </button> </ul> <div class="card border-top-0" ui-view> </div> </div> <div id="classification-tab" class="col-md-3 collapse" uib-collapse="isClassificationCollapsed"> <div> <ul class="nav nav-tabs"> <li role="presentation" class="nav-item"> <a class="nav-link active">Test Classification</a> </li> </ul> </div> <div class="card border-top-0"> <div class="card-default card-body"> <form name="classifyForm"> <div class="form-group"> <label class="col-form-label" for="classify-protocol">Protocol</label> <input class="form-control" type="text" autocomplete="off" id="classify-protocol" name="classify-protocol" ng-model="classificationRequest.protocol" placeholder="A valid RFC specified IP protocol, e.g. TCP, UDP" typeahead-min-length="0" uib-typeahead="protocol.keyword for protocol in protocols | filter:$viewValue" typeahead-editable="false" ng-class="{ \'is-invalid\' : ruleForm[\'classify-protocol\'].$invalid || classifyError.protocol }"> <p id="classifyError.protocol" ng-show="classifyError.protocol" class="form-text text-muted">{{classifyError.protocol}}</p> </div> <div class="form-group"> <label class="col-form-label" for="classify-exporterAddress">Exporter Address</label> <input class="form-control" type="text" id="classify-exporterAddress" name="classify-exporterAddress" placeholder="e.g. 10.0.0.1" ng-model="classificationRequest.exporterAddress" ng-class="{ \'is-invalid\' : ruleForm[\'classify-exporterAddress\'].$invalid || classifyError.exporterAddress }"> <p id="classifyError.exporterAddress" ng-show="classifyError.exporterAddress" class="invalid-feedback">{{classifyError.exporterAddress}}</p> </div> <div class="form-row"> <div class="form-group col-md-8 col-sm-8 col-xs-8"> <label class="col-form-label" for="classify-srcAddress">Source Address</label> <input class="form-control" type="text" id="classify-srcAddress" name="classify-srcAddress" placeholder="e.g. 127.0.0.1" ng-model="classificationRequest.srcAddress" ng-class="{ \'is-invalid\' : ruleForm[\'classify-srcAddress\'].$invalid || classifyError.srcAddress }"> <p id="classifyError.srcAddress" ng-show="classifyError.srcAddress" class="invalid-feedback">{{classifyError.srcAddress}}</p> </div> <div class="form-group col-md-4 col-sm-4 col-xs-4"> <label class="col-form-label" for="classify-srcPort">Port</label> <input class="form-control" type="text" id="classify-srcPort" name="classify-srcPort" placeholder="e.g. 55252" ng-model="classificationRequest.srcPort" ng-class="{ \'is-invalid\' : ruleForm[\'classify-srcPort\'].$invalid || classifyError.srcPort }"> <p id="classifyError.srcPort" ng-show="classifyError.srcPort" class="invalid-feedback">{{classifyError.srcPort}}</p> </div> </div> <div class="form-row"> <div class="form-group col-md-8 col-sm-8 col-xs-8"> <label class="col-form-label" for="classify-dstAddress">Destination Address</label> <input class="form-control" type="text" id="classify-dstAddress" name="classify-dstAddress" placeholder="e.g. 127.0.0.1" ng-model="classificationRequest.dstAddress" ng-class="{ \'is-invalid\' : ruleForm[\'classify-dstAddress\'].$invalid || classifyError.dstAddress }"> <p id="classifyError.dstAddress" ng-show="classifyError.dstAddress" class="invalid-feedback">{{classifyError.dstAddress}}</p> </div> <div class="form-group col-md-4 col-sm-4 col-xs-4"> <label class="col-form-label" for="classify-dstPort">Port</label> <input class="form-control" type="text" id="classify-dstPort" name="classify-dstPort" placeholder="e.g. 80" ng-model="classificationRequest.dstPort" ng-class="{ \'is-invalid\' : ruleForm[\'classify-dstPort\'].$invalid || classifyError.dstPort }"> <p id="classifyError.dstPort" ng-show="classifyError.dstPort" class="invalid-feedback">{{classifyError.dstPort}}</p> </div> </div> <div class="badge badge-secondary" ng-show="classificationResponse"> <span id="classification-response" title="Based on the current set of rules, the given flow would be mapped to">{{classificationResponse}}</span> </div> <div class="alert alert-danger" ng-show="classifyError.entity"> <span id="classification-error">{{classifyError.entity}}</span> </div> <div class="form-group"> <button type="submit" class="btn btn-primary pull-right" id="classification-submit" ng-click="classify(classificationRequest)" ng-disabled="classifyForm.$invalid || !fullyDefined()">Classify</button> </div> </form> </div> </div> </div> </div> ')}]),e.exports=o},1011:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-classifications/views/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div class="card-body"> <div class="btn-toolbar pull-right mb-2"> <div class="btn-group ml-2" role="group"> <button id="action.refresh" class="btn btn-secondary" ng-click="refresh()" title="Refresh list"><i class="fa fa-refresh"></i></button> </div> <div class="btn-group ml-2" role="group"> <button id="action.addGroup" class="btn btn-secondary" ng-click="addGroup()" title="Add new classification group"><i class="fa fa-plus"></i></button> </div> </div> <div ng-show="groups.length == 0">No groups defined.</div> <pagination model="query" ng-show="groups.length > 0" position="bottom" on-change="refresh"> <table class="table table-striped"> <thead> <tr class="d-flex"> <th class="col-md-1 text-nowrap">Position</th> <th class="col-md-3 text-nowrap">Name</th> <th class="col-md-5 text-nowrap">Description</th> <th class="col-md-1 text-nowrap">Editable</th> <th class="col-md-1 text-nowrap">Enabled</th> <th class="col-md-1 text-nowrap">Actions</th> </tr> </thead> <tbody ng-model="groups" ui-sortable="sortableGroups"> <tr class="d-flex" ng-repeat="group in groups" data-row="{{group.name}}" ng-class="{\'unsortable\': group[\'readOnly\']}"> <td class="col-md-1 text-nowrap"> <i class="fa fa-bars text-muted" style="padding-right:1em" ng-style="{\'visibility\': !group[\'readOnly\'] ? \'visible\' : \'hidden\'}"></i> {{group[\'position\']}}</td> <td class="col-md-3 text-nowrap">{{group[\'name\']}}</td> <td class="col-md-5 text-nowrap">{{group[\'description\']}}</td> <td class="col-md-1 text-nowrap">{{!group[\'readOnly\']}}</td> <td class="col-md-1 text-nowrap"> <toggle id="action.{{group.name}}.toggle" size="btn-sm" ng-model="group[\'enabled\']" ng-change="updateGroup(group)"></toggle> </td> <td class="col-md-1 text-nowrap"> <div class="pull-right"> <button id="action.{{group.position}}.edit" class="btn btn-sm btn-secondary" ng-click="editGroup(group)" title="edit group" ng-show="!group.readOnly"><i class="fa fa-edit"></i></button> <button id="action.{{group.position}}.delete" class="btn btn-sm btn-secondary" mwl-confirm title="delete group" message="Do you want to delete group \'{{group.name}}\' with {{group.ruleCount}} rule(s)?" on-confirm="deleteGroup(group)" placement="left" confirm-button-type="danger" cancel-button-type="secondary" confirm-text="Yes" cancel-text="No" ng-show="!group.readOnly"><i class="fa fa-trash-o"></i></button> </div> </td> </tr> </tbody> </table> </pagination> </div> ')}]),e.exports=o},1012:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-classifications/views/group.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div> <style>.wrapped{white-space:pre}.text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap!important}</style> <div class="card-body"> <div class="btn-toolbar pull-right mb-2" role="toolbar"> <div class="input-group" role="group" ng-show="group.ruleCount > 0"> <div class="input-group-prepend"> <span class="input-group-text"><i class="fa fa-search"></i></span> </div> <input type="text" id="action.search" ng-model="query.search" ng-change="refresh()" placeholder="search..." class="form-control"> <div class="input-group-append"> <button class="btn btn-secondary" title="Clear search" ng-click="clearSearch()" ng-show="query.search"><i class="fa fa-close"></i></button> </div> </div> <div class="btn-group ml-4" role="group"> <button id="action.refresh" class="btn btn-secondary" ng-click="refreshAll()" title="Refresh list"><i class="fa fa-refresh"></i></button> </div> <div class="btn-group ml-2" role="group" ng-show="!group.readOnly"> <button id="action.addRule" class="btn btn-secondary" ng-click="addRule(group)" title="Add new classification rule"><i class="fa fa-plus"></i></button> <button ng-if="rules.length > 0" id="action.deleteAll" class="btn btn-secondary" mwl-confirm title="Delete rules" message="Do you want to delete all {{group.name}} rules?" on-confirm="deleteAllRules()" placement="left" confirm-button-type="danger" cancel-button-type="secondary" confirm-text="Yes" cancel-text="No"><i class="fa fa-trash-o"></i></button> </div> <div class="btn-group ml-2" role="group" ng-show="!group.readOnly"> <button id="action.importCSV" class="btn btn-secondary" ng-click="importRules()" title="Import classification rules from CSV"><i class="fa fa-upload"></i></button> <button id="action.exportCSV" class="btn btn-secondary" ng-click="showExportRulesDialog()" title="Export classification rules as CSV"> <i class="fa fa-download"></i> </button> </div> </div> <h5 class="pt-2">{{group.description}} <span class="badge badge-secondary" ng-if="group.readOnly">read-only</span></h5> <div class="text-center mt-4" ng-show="rules.length == 0"><pre>No rules defined.</pre></div> <pagination model="query" ng-show="rules.length > 0" position="bottom" on-change="refresh"> <table class="table table-striped"> <thead> <tr class="d-flex"> <th class="col-md-1 text-nowrap"> <a ng-click="changeOrderBy(\'position\')">Position</a> <i ng-show="query.orderBy === \'position\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'position\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th class="col-md-1 text-nowrap"> <a ng-click="changeOrderBy(\'name\')">Application</a> <i ng-show="query.orderBy === \'name\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'name\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th class="col-md-1 text-nowrap"> <a ng-click="changeOrderBy(\'protocol\')">Protocol</a> <i ng-show="query.orderBy === \'protocol\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'protocol\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th class="col-md-2 text-nowrap"> <a ng-click="changeOrderBy(\'srcAddress\')">Src. Address</a> <i ng-show="query.orderBy === \'srcAddress\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'srcAddress\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th class="col-md-1 text-nowrap"> <a ng-click="changeOrderBy(\'srcPort\')">Src. Port</a> <i ng-show="query.orderBy === \'srcPort\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'srcPort\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th class="col-md-2 text-nowrap"> <a ng-click="changeOrderBy(\'dstAddress\')">Dst. Address</a> <i ng-show="query.orderBy === \'dstAddress\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'dstAddress\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th class="col-md-1 text-nowrap"> <a ng-click="changeOrderBy(\'dstPort\')">Dst. Port</a> <i ng-show="query.orderBy === \'dstPort\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'dstPort\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th ng-class="{\'col-md-1\': group.readOnly === false, \'col-md-2\': group.readOnly === true}" class="text-nowrap"> <a ng-click="changeOrderBy(\'exporterFilter\')">Exporter Filter</a> <i ng-show="query.orderBy === \'exporterFilter\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'exporterFilter\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th class="col-md-1 text-nowrap"> <a ng-click="changeOrderBy(\'omnidirectional\')">Omnidirectional</a> <i ng-show="query.orderBy === \'omnidirectional\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'omnidirectional\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th class="col-md-1" ng-if="group.readOnly === false"> Actions </th> </tr> </thead> <tbody ng-model="rules" ui-sortable="sortableRules"> <tr ng-repeat="rule in rules" class="d-flex"> <td class="col-md-1 text-nowrap"> <i class="fa fa-bars text-muted" ng-show="!group.readOnly && query.orderBy === \'position\' && query.order === \'asc\'" style="padding-right:1em"></i>{{rule[\'position\']}} </td> <td class="col-md-1 text-nowrap">{{rule[\'name\']}}</td> <td class="col-md-1 text-nowrap"> <span ng-repeat="protocol in rule.protocols" class="badge badge-secondary mr-2">{{protocol}}</span> </td> <td class="col-md-2 wrapped">{{splitRule(rule[\'srcAddress\'])}}</td> <td class="col-md-1 wrapped">{{splitRule(rule[\'srcPort\'])}}</td> <td class="col-md-2 wrapped">{{splitRule(rule[\'dstAddress\'])}}</td> <td class="col-md-1 wrapped">{{splitRule(rule[\'dstPort\'])}}</td> <td ng-class="{\'col-md-1\': group.readOnly === false, \'col-md-2\': group.readOnly === true}" class="text-ellipsis"> <span title="{{rule[\'exporterFilter\']}}">{{rule[\'exporterFilter\']}}</span> </td> <td class="col-md-1 text-nowrap"><span class="fa fa-exchange" ng-if="rule[\'omnidirectional\'] === true" aria-hidden="true"></span></td> <td class="col-md-1" ng-if="group.readOnly === false"> <div class="pull-right"> <button id="action.{{rule.position}}.edit" class="btn btn-sm btn-secondary" ng-click="editRule(rule, group)" title="edit rule"><i class="fa fa-edit"></i></button> <button id="action.{{rule.position}}.delete" class="btn btn-sm btn-secondary" ng-click="deleteRule(rule)" title="delete rule"><i class="fa fa-trash-o"></i></button> </div> </td> </tr> </tbody> </table> </pagination> </div> </div>')}]),e.exports=o},1013:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-classifications/views/modals/new-rule-modal.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div id="ruleModal"> <div class="modal-header"> <h5 class="modal-title" ng-show="classification.id === undefined">Create Classification Rule</h5> <h5 class="modal-title" ng-show="classification.id !== undefined">Edit Classification Rule</h5> </div> <div class="modal-body"> <form name="ruleForm" novalidate> <div class="form-group"> <div ng-show="error.entity" class="form-text text-danger">{{error.entity}}</div> </div> <div class="form-group form-row"> <label class="col-form-label" for="rule.group">Group</label> <select class="form-control custom-select" ng-options="group as group.name for group in selectableGroups track by group.id" ng-model="classification.group" ng-disabled="classification.id === undefined" id="rule.group"></select> </div> <div class="form-group form-row"> <label class="col-form-label" for="rule.position">Position</label> <button class="btn btn-link" uib-popover-html="\'<div>Rules on low positions will be evaluated first:<br>position 0 -&gt; position 1 -&gt; position 2 -&gt; ...</div>\'" popover-trigger="\'outsideClick\'"><i class="fa fa-question-circle"></i></button> <input class="form-control" id="rule.position" name="position" placeholder="{{maxPosition}}" type="number" min="0" max="{{maxPosition}}" step="1" pattern="[0-9]*" ng-model="classification.position" ng-class="{ \'is-invalid\' : ruleForm.position.$invalid || error.position }"> <div ng-show="ruleForm.position.$invalid" class="invalid-feedback">Position must be between 0 and {{maxPosition}}.</div> </div> <div class="form-group form-row"> <label class="col-form-label" for="rule.name">Application Name</label> <input class="form-control" type="text" id="rule.name" name="name" placeholder="HTTP" ng-model="classification.name" ng-class="{ \'is-invalid\' : ruleForm.name.$invalid || error.name }" required> <div ng-show="ruleForm.name.$invalid" class="invalid-feedback">The name is required.</div> <div ng-show="error.name" class="invalid-feedback">{{error.name}}</div> </div> <div class="form-row"> <div class="form-group col-md-8"> <label class="col-form-label" for="rule.srcAddress">Source IP Address</label> <input class="form-control" type="text" id="rule.srcAddress" name="srcAddress" placeholder="127.0.0.1,10.0.0.0/24,10.0.0.0-10.255.255.255" ng-model="classification.srcAddress" ng-class="{ \'is-invalid\' : ruleForm.srcAddress.$invalid || error.srcAddress}"> <div ng-show="error.srcAddress" class="invalid-feedback">{{error.srcAddress}}</div> </div> <div class="form-group col-md-4"> <label class="col-form-label" for="rule.srcPort">Source Port</label> <input class="form-control" type="text" id="rule.srcPort" name="srcPort" placeholder="80,8080" ng-model="classification.srcPort" ng-class="{ \'is-invalid\' : ruleForm.srcPort.$invalid || error.srcPort }"> <div ng-show="error.srcPort" class="invalid-feedback">{{error.srcPort}}</div> </div> </div> <div class="form-row"> <div class="form-group col-md-8"> <label class="col-form-label" for="rule.dstAddress">Destination IP Address</label> <input class="form-control" type="text" id="rule.dstAddress" name="dstAddress" placeholder="127.0.0.1,10.0.0.0/24,10.0.0.0-10.255.255.255" ng-model="classification.dstAddress" ng-class="{ \'is-invalid\' : ruleForm.dstAddress.$invalid || error.dstAddress}"> <div ng-show="error.dstAddress" class="invalid-feedback">{{error.dstAddress}}</div> </div> <div class="form-group col-md-4"> <label class="col-form-label" for="rule.dstPort">Destination Port</label> <input class="form-control" type="text" id="rule.dstPort" name="dstPort" placeholder="80,8080" ng-model="classification.dstPort" ng-class="{ \'is-invalid\' : ruleForm.dstPort.$invalid || error.dstPort }"> <div ng-show="error.dstPort" class="invalid-feedback">{{error.dstPort}}</div> </div> </div> <div class="form-group"> <label class="col-form-label" for="rule.omnidirectional">Omnidirectional</label> <div class="form-check"> <input class="form-check-input" type="checkbox" id="rule.omnidirectional" name="omnidirectional" ng-model="classification.omnidirectional" ng-class="{ \'is-invalid\' : ruleForm.omnidirectional.$invalid || error.omnidirectional }"> <label class="form-check-label" for="rule.omnidirectional">Enable matching independent of the flow direction</label> <div ng-show="error.omnidirectional" class="invalid-feedback">{{error.omnidirectional}}</div> </div> </div> <div class="form-group form-row"> <label class="col-form-label" for="rule.exporterFilter">Exporter Filter</label> <button class="btn btn-link" uib-popover-html="\'<div>The rule is only applied if the exporter of the flow matches the defined <a href=https://docs.opennms.com/horizon/latest/reference/configuration/filters/filters.html target=_blank>filter</a>.</div>\'" popover-trigger="\'outsideClick\'"><i class="fa fa-question-circle"></i></button> <input class="form-control" type="text" id="rule.exporterFilter" name="exporterFilter" placeholder="categoryName == \'Exporters\' | ipAddr == \'10.0.0.1\'" ng-model="classification.exporterFilter" ng-class="{ \'is-invalid\' : ruleForm.exporterFilter.$invalid || error.exporterFilter }"> <div ng-show="error.exporterFilter" class="invalid-feedback">{{error.exporterFilter}}</div> </div> <div class="form-group form-row"> <label class="col-form-label" for="rule.protocol">IP Protocol</label> <input class="form-control" type="text" id="rule.protocol" name="protocol" ng-model="currentSelection" placeholder="tcp" typeahead-on-select="insertProtocol($item)" typeahead-min-length="0" uib-typeahead="protocol.keyword for protocol in protocols | filter:$viewValue" typeahead-editable="false" ng-class="{ \'is-invalid\' : ruleForm.protocol.$invalid || error.protocol }"> <span ng-repeat="protocol in selectedProtocols" class="badge badge-secondary mt-2 mr-2"> {{protocol.keyword | uppercase}} <a href class="text-danger" name="remove-protocol" ng-click="removeProtocol(protocol)"><i class="fa fa-remove" title="remove protocol"></i></a> </span> <div ng-show="error.protocol" class="invalid-feedback">{{error.protocol}}</div> </div> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" id="save-rule" ng-click="save()" ng-disabled="ruleForm.$invalid">{{buttonName}}</button> <button type="button" class="btn btn-secondary" id="cancel-rule" ng-click="cancel()">Cancel</button> </div> </div> ')}]),e.exports=o},1014:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-classifications/views/modals/new-group-modal.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div id="groupModal"> <div class="modal-header"> <h5 class="modal-title" ng-show="group.id === undefined">Create Classification Group</h5> <h5 class="modal-title" ng-show="group.id !== undefined">Edit Classification Group</h5> </div> <div class="modal-body"> <form name="groupForm" novalidate> <div class="form-group"> <div ng-show="error.entity" class="form-text text-danger">{{error.entity}}</div> </div> <div class="form-group form-row"> <label class="col-form-label" for="group.position">Position</label> <button class="btn btn-link" uib-popover-html="\'<div>Groups on low positions will be evaluated first:<br>position 0 -&gt; position 1 -&gt; position 2 -&gt; ...</div>\'" popover-trigger="\'outsideClick\'"><i class="fa fa-question-circle"></i></button> <input class="form-control" id="group.position" name="position" placeholder="{{maxPosition}}" type="number" min="0" max="{{maxPosition}}" step="1" pattern="[0-9]*" ng-model="group.position" ng-class="{ \'is-invalid\' : groupForm.position.$invalid || error.position }"> <div ng-show="groupForm.position.$invalid" class="invalid-feedback">Position must be between 0 and {{maxPosition}}.</div> </div> <div class="form-group form-row"> <label class="col-form-label" for="group.name">Group Name</label> <input class="form-control" type="text" id="group.name" name="name" placeholder="my classification group" ng-model="group.name" ng-class="{ \'is-invalid\' : groupForm.name.$invalid || error.name }" required> <div ng-show="groupForm.name.$invalid" class="invalid-feedback">The name is required.</div> <div ng-show="error.name" class="invalid-feedback">{{error.name}}</div> </div> <div class="form-group form-row"> <label class="col-form-label" for="group.description">Group Description</label> <input class="form-control" type="text" id="group.description" name="description" placeholder="my description" ng-model="group.description" ng-class="{ \'is-invalid\' : groupForm.description.$invalid || error.description }" required> <div ng-show="error.description" class="invalid-feedback">{{error.description}}</div> </div> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" id="save-group" ng-click="save()" ng-disabled="groupForm.$invalid">{{buttonName}}</button> <button type="button" class="btn btn-secondary" id="cancel-group" ng-click="cancel()">Cancel</button> </div> </div> ')}]),e.exports=o},1015:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-classifications/views/modals/import-modal.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div> <div class="modal-header"> <h5 class="modal-title">Import Classification Rules</h5> </div> <div class="modal-body"> <form class="form"> <div class="form-group form-row"> <label class="col-sm-3 col-form-label">Group</label> <div class="col-sm-9"> <p class="form-control-plaintext">{{group.name}}</p> </div> </div> <div class="form-group form-row"> <label class="col-sm-3 col-form-label" for="importFile">Select file to import</label> <div class="col-sm-9"> <div class="input-group"> <span class="input-group-prepend"> <button ng-click="openFileDialogue()" class="btn btn-secondary" type="button">Choose</button> </span> <input ng-click="openFileDialogue()" type="text" id="importFile" class="form-control" placeholder="Choose a file..." ng-model="fileToUpload.name"> <span class="input-group-append"> <button class="btn btn-secondary" type="button" ng-click="resetInput()">Reset</button> </span> </div> </div> </div> <div class="form-group form-row"> <div class="col-sm-offset-3 col-sm-9"> <div class="checkbox"> <label> <input type="checkbox" ng-model="containsHeader"> Contains header </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="deleteExistingRules"> Delete existing rules </label> </div> </div> </div> <input id="fileToImport" type="file" style="visibility:hidden;display:none" onchange="angular.element(this).scope().setFile(this)"> </form> <div class="alert alert-danger" ng-show="error"> {{error}} </div> <div ng-show="failedRows.length > 0"> <pagination model="pagination" position="bottom" on-change="navigateWithinErrors"> <table class="table table-bordered table-striped"> <tbody> <tr class="d-flex"> <th class="col-md-1">Row Index</th> <th class="col-md-11">Error Message</th> </tr> <tr class="d-flex" ng-repeat="failedRow in failedRows"> <td class="col-md-1">{{failedRow[\'index\']}}</td> <td class="col-md-11">{{failedRow[\'message\']}}</td> </tr> </tbody> </table> </pagination> </div> </div> <div class="modal-footer"> <div style="display:inline" title="Please confirm deletion"> <button type="button" class="btn btn-primary" ng-click="uploadFile()" ng-show="fileToUpload" title="Upload Rule">Upload</button> </div> <button type="button" class="btn btn-secondary" ng-click="$dismiss(\'cancelled by user\')">Cancel</button> </div> </div>')}]),e.exports=o},1016:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-classifications/views/modals/export-modal.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div id="exportModal"> <div class="modal-header"> <h5 class="modal-title">Export Classification Rules for Group: {{group.name}}</h5> </div> <div class="modal-body"> <form name="exportGroupForm"> <div class="form-group"> <div class="form-group"> <label class="col-form-label" for="export.requestedFileName">File Name</label> <input class="form-control" type="text" id="export.requestedFileName" name="requestedFileName" value="{{group.id}}_rules.csv" ng-model="export.requestedFileName" ng-pattern="/^[a-zA-Z1-9_ .-]{1,}$/" required ng-class="{ \'is-invalid\' : exportGroupForm.requestedFileName.$invalid }"> <p ng-show="exportGroupForm.requestedFileName.$invalid" class="invalid-feedback"> A valid file name is required, allowed characters: [a-zA-Z1-9_ .-]</p> </div> </div> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="exportGroup()" ng-disabled="exportGroupForm.$invalid">Export</button> <button type="button" class="btn btn-secondary" ng-click="$dismiss(\'cancelled by user\')">Cancel</button> </div> </div>')}]),e.exports=o},12:function(e,exports,o){"use strict";console.log("init: bootstrap-js");var jQuery=o(5);o(8),o(41),e.exports=jQuery},128:function(e,exports,o){"use strict";o(48),o(150),o(14),o(149);var t,s,r=u(o(107)),a=u(o(11)),i=u(o(29)),l=u(o(49)),n=u(o(245)),c=u(o(16)),d=u(o(103));function u(e){return e&&e.__esModule?e:{default:e}}var p="onms.elementList";window.ISO_8601_DATE_FORMAT="yyyy-MM-ddTHH:mm:ss.sssZ",window.ISO_8601_DATE_FORMAT_WITHOUT_MILLIS="yyyy-MM-ddTHH:mm:ssZ";var angular=o(3);o(5);o(12);var f=o(129),m=o(130),g=o(131),h=function(e){return"string"==typeof e?e.replace("!","%21").replace("$","%24").replace("'","%27").replace("(","%28").replace(")","%29").replace("+","%2B").replace(",","%2C").replace(";","%3B").replace("=","%3D"):e},v=function(e){for(var o=!0,t="",s=0;s<e.length;s++){switch(o||(t+=";"),t+=e[s].property,e[s].operator){case"EQ":t+="==";break;case"NE":t+="!=";break;case"LT":t+="=lt=";break;case"LE":t+="=le=";break;case"GT":t+="=gt=";break;case"GE":t+="=ge="}t+=h(e[s].value),o=!1}return t},y=function(e){for(var o=e.split(";"),t=[],s=[],r=0;r<o.length;r++){var i,l,n,c,d,u;(0,a.default)(i=o[r]).call(i,"==")>0?(t=o[r].split("=="),s.push({property:t[0],operator:"EQ",value:t[1]})):(0,a.default)(l=o[r]).call(l,"!=")>0?(t=o[r].split("!="),s.push({property:t[0],operator:"NE",value:t[1]})):(0,a.default)(n=o[r]).call(n,"=lt=")>0?(t=o[r].split("=lt="),s.push({property:t[0],operator:"LT",value:t[1]})):(0,a.default)(c=o[r]).call(c,"=le=")>0?(t=o[r].split("=le="),s.push({property:t[0],operator:"LE",value:t[1]})):(0,a.default)(d=o[r]).call(d,"=gt=")>0?(t=o[r].split("=gt="),s.push({property:t[0],operator:"GT",value:t[1]})):(0,a.default)(u=o[r]).call(u,"=ge=")>0&&(t=o[r].split("=ge="),s.push({property:t[0],operator:"GE",value:t[1]}))}return s},b=function(e,o,t){var s,r=e;return o<0?(r=0,s=0):s=Math.floor(o/t)*t,r=(r=r<0?0:r)>s?s:r,r=Math.floor(r/t)*t};(0,i.default)(t=(0,i.default)(s=angular.module("onmsListFilters",[])).call(s,"operator",(function(){return function(e,o){var t="string"==typeof o&&(0,a.default)(o).call(o,"*")>-1;switch(e){case"EQ":return t?"is like":"equals";case"NE":return t?"is not like":"does not equal";case"LT":return"is less than";case"LE":return"is less than or equal";case"GT":return"is greater than";case"GE":return"is greater than or equal";default:return e}}}))).call(t,"isNotEmpty",(function(){return function(e){return e&&("string"!=typeof e||""!==(0,l.default)(e).call(e))}})),angular.module(p,[]).config(["$locationProvider",function(e){e.hashPrefix(""),e.html5Mode({enabled:!0,rewriteLinks:!1})}]).directive("onmsListEditInPlace",(function(){return{controller:["$scope",function($scope){$scope.editing=!1,$scope.originalValue=angular.copy($scope.value),$scope.edit=function(){$scope.editing=!0},$scope.unedit=function(){$scope.editing=!1},$scope.onKeyup=function(e){27===e.keyCode&&$scope.cancel()},$scope.submit=function(){$scope.onSubmit(),$scope.originalValue=$scope.value,$scope.unedit()},$scope.cancel=function(){$scope.value=$scope.originalValue,$scope.unedit()}}],scope:{item:"=",value:"=",valueType:"=",step:"=",onSubmit:"&onSubmit"},templateUrl:f,transclude:!0}})).directive("onmsListEditListInPlace",["$window",function(e){return{controller:["$scope",function($scope){$scope.editing=!1,$scope.edit=function(){$scope.editing=!0},$scope.unedit=function(){$scope.newValue=null,$scope.editing=!1},$scope.onKeyup=function(e){switch(e.keyCode){case 13:$scope.add((0,n.default)($scope),$scope.newValue);break;case 27:$scope.unedit()}},$scope.confirmAndRemove=function(o,t){e.confirm('Are you sure you want to remove "'+t+'"?')&&((0,c.default)(o).call(o,(0,a.default)(o).call(o,t),1),$scope.onEdit())},$scope.add=function(e,o){e.push(o),(0,d.default)(e).call(e),$scope.onEdit(),$scope.unedit()}}],scope:{values:"=",valueType:"=",step:"=",onEdit:"&onEdit"},templateUrl:m,transclude:!0}}]).directive("onmsListEditMapInPlace",["$window",function(e){return{controller:["$scope",function($scope){$scope.editing=!1,$scope.edit=function(){$scope.editing=!0},$scope.unedit=function(){$scope.newKey=null,$scope.newValue=null,$scope.editing=!1},$scope.onKeyup=function(e){switch(e.keyCode){case 13:$scope.add((0,n.default)($scope),$scope.newKey,$scope.newValue);break;case 27:$scope.unedit()}},$scope.confirmAndRemove=function(o,t){e.confirm('Are you sure you want to remove "'+t+'"?')&&(delete o[t],$scope.onEdit())},$scope.add=function(e,o,t){e[o]=t,$scope.onEdit(),$scope.unedit()}}],scope:{values:"=",keyType:"=",valueType:"=",step:"=",onEdit:"&onEdit"},templateUrl:g,transclude:!0}}]).controller("ListCtrl",["$scope","$location","$window","$log","$filter",function($scope,e,o,t,s){t.debug("ListCtrl initializing..."),$scope.defaults={_s:"",searchClauses:[],limit:20,offset:0,orderBy:"",order:"asc"};var r=void 0===e.search().limit?$scope.defaults.limit:Number(e.search().limit)>0?Number(e.search().limit):$scope.defaults.limit;$scope.query={lastOffset:0,maxOffset:0,searchParam:void 0===e.search()._s?$scope.defaults._s:e.search()._s,searchClauses:void 0===e.search()._s?$scope.defaults.searchClauses:y(e.search()._s),limit:r,newLimit:r,offset:void 0===e.search().offset?$scope.defaults.offset:Number(e.search().offset)>0?b(Number(e.search().offset),Number.MAX_VALUE,r):$scope.defaults.offset,orderBy:void 0===e.search().orderBy?$scope.defaults.orderBy:e.search().orderBy,order:void 0===e.search().order?$scope.defaults.order:"asc"===e.search().order?"asc":"desc"},$scope.$watch("query",(function(){var o=angular.copy($scope.query);delete o.searchClauses,delete o.newLimit,delete o.lastOffset,delete o.maxOffset,o._s=""===o.searchParam?null:o.searchParam,delete o.searchParam,o.limit!==$scope.defaults.limit&&""!==o.limit||delete o.limit,o.offset!==$scope.defaults.offset&&""!==o.offset||delete o.offset,o.orderBy!==$scope.defaults.orderBy&&""!==o.orderBy||delete o.orderBy,o.order!==$scope.defaults.order&&""!==o.order||delete o.order,o._s!==$scope.defaults._s&&""!==o._s||delete o._s,e.search(o)}),!0),$scope.addSearchClause=function(e){angular.isDate(e.value)&&(e.value=s("date")(new Date(e.value),ISO_8601_DATE_FORMAT)),$scope.getSearchClause(e)||($scope.query.searchClauses.push(angular.copy(e)),$scope.query.searchParam=v($scope.query.searchClauses),$scope.refresh())},$scope.getSearchClause=function(e){for(var o=0;o<$scope.query.searchClauses.length;o++)if($scope.clauseEquals(e,$scope.query.searchClauses[o]))return $scope.query.searchClauses[o];return null},$scope.clauseEquals=function(e,o){return e.property===o.property&&e.operator===o.operator&&e.value===o.value},$scope.addEpochTimestampSearchClause=function(e){e.value=s("date")(e.value,ISO_8601_DATE_FORMAT),$scope.addSearchClause(e)},$scope.removeSearchClause=function(e){var o,t;(0,c.default)(o=$scope.query.searchClauses).call(o,(0,a.default)(t=$scope.query.searchClauses).call(t,e),1),$scope.query.searchParam=v($scope.query.searchClauses),$scope.refresh()},$scope.removeSearchClauses=function(e){for(var o=0;o<e.length;o++){var t,s,r=(0,a.default)(t=$scope.query.searchClauses).call(t,e[o]);if(r>=0)(0,c.default)(s=$scope.query.searchClauses).call(s,r,1)}$scope.query.searchParam=v($scope.query.searchClauses),$scope.refresh()},$scope.replaceSearchClause=function(e,o){angular.isDate(o.value)&&(o.value=s("date")(new Date(o.value),ISO_8601_DATE_FORMAT));var t=$scope.getSearchClause(e),r=$scope.getSearchClause(o);t?r?$scope.removeSearchClause(e):(t.property=o.property,t.operator=o.operator,t.value=o.value,$scope.query.searchParam=v($scope.query.searchClauses),$scope.refresh()):r||$scope.addSearchClause(o)},$scope.clearSearch=function(){$scope.query.searchClauses.length>0&&($scope.query.searchClauses=[],$scope.query.searchParam="",$scope.refresh())},$scope.changeOrderBy=function(e){$scope.query.orderBy===e?$scope.query.order="asc"===$scope.query.order?"desc":"asc":($scope.query.orderBy=e,$scope.query.order=$scope.defaults.order),$scope.refresh()},$scope.setOffset=function(e){var o=b(e,$scope.query.maxOffset,$scope.query.limit);$scope.query.offset!==o&&($scope.query.offset=o,$scope.refresh())},$scope.setLimit=function(e){e<1?$scope.query.newLimit=$scope.query.limit:$scope.query.limit!==e&&($scope.query.limit=e,$scope.query.offset=b($scope.query.offset,$scope.query.maxOffset,$scope.query.limit),$scope.refresh())},$scope.refresh=function(){t.warn("You need to override $scope.$parent.refresh() in your controller")},$scope.update=function(){t.warn("You need to override $scope.$parent.update() in your controller")},$scope.deleteItem=function(e){t.warn("You need to override $scope.$parent.deleteItem() in your controller")},t.debug("ListCtrl initialized")}]).run(["$rootScope","$log",function(e,o){o.debug("Finished initializing "+p)}]),e.exports={appendTransform:function(e,o){var t=angular.isArray(e)?e:[e];return(0,r.default)(t).call(t,o)},toFiql:v,fromFiql:y,parseContentRange:function(e){if(!e)return{start:0,end:0,total:0};var o=/items\s+?(\d+)\s*-\s*(\d+)\s*\/\s*(\d+)/;return{start:Number(e.replace(o,"$1")),end:Number(e.replace(o,"$2")),total:Number(e.replace(o,"$3"))}},escapeSearchValue:h,normalizeOffset:b}},129:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editInPlace.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<form class="form-inline" ng-submit="submit()" style="margin:0"> <input ng-show="editing" ng-keyup="onKeyup($event)" type="{{valueType}}" step="{{step}}" ng-model="value"> <span style="line-height:24px" ng-hide="editing" ng-click="edit()">{{value}}&nbsp;</span> <a href style="text-decoration:none" ng-click="edit()" ng-hide="editing"><i class="fa fa-edit fa-lg"></i></a> <a href style="text-decoration:none" ng-click="submit()" ng-show="editing"><i class="fa fa-check fa-lg"></i></a> <a href style="text-decoration:none" ng-click="cancel()" ng-show="editing"><i class="fa fa-close fa-lg"></i></a> <span ng-transclude></span> </form> ')}]),e.exports=o},130:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editListInPlace.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<span> <span ng-repeat="value in values"> <button class="btn btn-sm btn-secondary" ng-click="confirmAndRemove(values, value)" style="margin-bottom:3px;margin-right:3px"> {{value}}&nbsp;<i class="fa fa-close"></i> </button> </span> <span style="line-height:24px" ng-hide="editing"> <a href style="text-decoration:none" ng-click="edit()"><i class="fa fa-edit fa-lg"></i></a>&nbsp; </span> <span ng-show="editing" class="text-nowrap"> <input type="{{valueType}}" ng-keyup="onKeyup($event)" ng-model="newValue"> <a href style="text-decoration:none" ng-click="add(values, newValue)"><i class="fa fa-plus fa-lg"></i></a> <a href style="text-decoration:none" ng-click="unedit()"><i class="fa fa-close fa-lg"></i></a> </span> <span ng-transclude></span> </span>')}]),e.exports=o},131:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editMapInPlace.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<span> <span ng-repeat="(key,value) in values"> <button class="btn btn-sm btn-secondary" ng-click="confirmAndRemove(values, key)" style="margin-bottom:3px;margin-right:3px"> <b>{{key}}:</b> {{value}}&nbsp;<i class="fa fa-close"></i> </button> </span> <span style="line-height:24px" ng-hide="editing"> <a href style="text-decoration:none" ng-click="edit()"><i class="fa fa-edit fa-lg"></i></a>&nbsp; </span> <span ng-show="editing" class="text-nowrap"> <input type="{{keyType}}" ng-keyup="onKeyup($event)" ng-model="newKey"> <input type="{{valueType}}" ng-keyup="onKeyup($event)" ng-model="newValue"> <a href style="text-decoration:none" ng-click="add(values, newKey, newValue)"><i class="fa fa-plus fa-lg"></i></a> <a href style="text-decoration:none" ng-click="unedit()"><i class="fa fa-close fa-lg"></i></a> </span> <span ng-transclude></span> </span>')}]),e.exports=o},206:function(e,exports,o){"use strict";var angular=o(3),t=o(207);angular.module("onms.pagination",["ui.bootstrap"]).directive("pagination",(function(){return{restrict:"E",scope:{model:"=model",position:"@position",onChangeCallback:"=onChange"},link:function(e,o,t){if(void 0===e.model)throw new Error("No model defined.");if(void 0===e.model.page)throw new Error("No attribute model.page defined");if(void 0===e.model.totalItems)throw new Error("No attribute model.totalItems defined");if(void 0===e.model.limit)throw new Error("No attribute model.limit defined");var s=e.model.page;e.onChange=function(){s!==e.model.page&&(s=e.model.page,e.onChangeCallback&&e.onChangeCallback())}},transclude:!0,templateUrl:t}}))},207:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/lib/onms-pagination/pagination-toolbar.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div> <div ng-transclude ng-if="position === \'bottom\'"></div> <div class="row"> <div class="col-md-4 col-lg-6 col-sm-12" ng-show="(model.totalItems / model.limit) > 1"> <div style="margin:0" uib-pagination ng-model="model.page" total-items="model.totalItems" items-per-page="model.limit" rotate="true" boundary-links="true" max-size="5" boundary-link-numbers="true" ng-change="onChange()"> </div> </div> <div class="col-md-8 col-lg-6 col-sm-12 mt-4"> <pre class="pull-right" ng-show="model.totalItems == 0">No items found.</pre> <pre class="pull-right" ng-show="model.totalItems > 0">{{model.totalItems / model.page === 1\n            ? "Item " + (model.offset + 1)\n            : "Items " + ((model.page - 1) * model.limit + 1) + " - " + (model.page * model.limit &gt; model.totalItems ? model.totalItems : model.page * model.limit)}} ({{model.totalItems}} total)</pre> </div> </div> <div ng-transclude ng-if="position === \'top\' || position === undefined"></div> </div>')}]),e.exports=o},22:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/lib/onms-http/403-permission-denied.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<span> <div class="modal-header"> <h3><i class="fa fa-exclamation-triangle text-warning"></i> Permission Denied</h3> </div> <div class="modal-body"> <h5> You are not allowed to perform the requested action. </h5> <p class="text-muted"> This is not supposed to happen. Please reload the page and contact your administrator if this occurs more often. </p> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="reload()">Reload</button> </div> </span>')}]),e.exports=o},26:function(e,exports,o){"use strict";var t=o(15),s=o(17),r=o(18);t(exports,"__esModule",{value:!0}),exports.default=void 0,o(14);var a,i=(a=o(21))&&a.__esModule?a:{default:a};function l(e){return l="function"==typeof s&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof s&&e.constructor===s&&e!==s.prototype?"symbol":typeof e},l(e)}function n(e,o){for(var s=0;s<o.length;s++){var r=o[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),t(e,(a=r.key,n=void 0,n=function(e,o){if("object"!==l(e)||null===e)return e;var t=e[i.default];if(void 0!==t){var s=t.call(e,o||"default");if("object"!==l(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(a,"string"),"symbol"===l(n)?n:String(n)),r)}var a,n}var c=function(){function e(){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e)}var o,s,r;return o=e,r=[{key:"getBaseHref",value:function(){var e=document.getElementsByTagName("base")[0];return e?e.href:""}},{key:"setLocation",value:function(o){window&&window.location&&(window.location.href=e.getBaseHref()+o)}},{key:"toggle",value:function(e,o){var t=document.getElementsByName(o);for(var s in t)t.hasOwnProperty(s)&&(t[s].checked=e)}}],(s=null)&&n(o.prototype,s),r&&n(o,r),t(o,"prototype",{writable:!1}),e}();exports.default=c},292:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-classifications/views/modals/popover.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div class="popover px-2 py-2" ng-class="[vm.$attrs.placement || vm.defaults.placement, \'bs-popover-\' + (vm.$attrs.placement || vm.defaults.placement), vm.$attrs.popoverClass || vm.defaults.popoverClass, {fade: vm.animation}]"> <div class="popover-arrow arrow" style="top:50px"></div> <h3 class="popover-title" ng-bind-html="vm.$attrs.title"></h3> <div class="popover-content"> <p ng-bind-html="vm.$attrs.message"></p> <div class="row"> <div class="col-sm-6" ng-if="!vm.$attrs.hideConfirmButton && !vm.defaults.hideConfirmButton" ng-class="{\'col-sm-offset-3\': vm.$attrs.hideCancelButton || vm.defaults.hideCancelButton}"> <button class="btn btn-block confirm-button" ng-class="\'btn-\' + (vm.$attrs.confirmButtonType || vm.defaults.confirmButtonType)" ng-click="vm.onConfirm(); vm.hidePopover()" ng-bind-html="vm.$attrs.confirmText || vm.defaults.confirmText"> </button> </div> <div class="col-sm-6" ng-if="!vm.$attrs.hideCancelButton && !vm.defaults.hideCancelButton" ng-class="{\'col-sm-offset-3\': vm.$attrs.hideConfirmButton || vm.defaults.hideConfirmButton}"> <button class="btn btn-block cancel-button" ng-class="\'btn-\' + (vm.$attrs.cancelButtonType || vm.defaults.cancelButtonType)" ng-click="vm.onCancel(); vm.hidePopover()" ng-bind-html="vm.$attrs.cancelText || vm.defaults.cancelText"> </button> </div> </div> </div> </div> ')}]),e.exports=o},3:function(e,exports,o){"use strict";o(5);var angular=o(40);o(53),o(54),o(55),o(56),o(51),o(57),o(58),o(59),o(60),o(12),o(61),o(62),console.log("init: angular-js "+angular.version.full),e.exports=window.angular=angular},42:function(e,exports,o){"use strict";var t,s=(t=o(26))&&t.__esModule?t:{default:t};var angular=o(3);o(10);var r=o(43),a=o(44);angular.module("onms-search",["onms.http","ui.bootstrap"]).config(["$locationProvider",function(e){e.hashPrefix("")}]).directive("onmsSearchNodes",(function(){return{restrict:"E",transclude:!0,templateUrl:a,controller:"NodeSearchCtrl"}})).directive("onmsSearchKsc",(function(){return{restrict:"E",transclude:!0,templateUrl:r,controller:"KscSearchCtrl"}})).controller("NodeSearchCtrl",["$scope","$window","$http",function($scope,e,o){$scope.getNodes=function(e){return o({url:"rest/nodes",method:"GET",params:{label:e,comparator:"contains"}}).then((function(e){return e.data.node}))},$scope.goToChooseResources=function(o){e.location.href=s.default.getBaseHref()+"graph/chooseresource.jsp?node="+o.id}}]).controller("KscSearchCtrl",["$scope","$window","$http","$filter",function($scope,e,o,t){$scope.getKscReports=function(e){return o({url:"rest/ksc",method:"GET"}).then((function(o){return t("filter")(o.data.kscReport,e)}))},$scope.goToKscReport=function(o){e.location.href=s.default.getBaseHref()+"KSC/customView.htm?type=custom&report="+o.id}}])},43:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/search/template.ksc.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div class="form-group"> <div class="input-group"> <input type="text" class="form-control" ng-model="asyncKsc" placeholder="Type the KSC report name" uib-typeahead="ksc as ksc.label for ksc in getKscReports($viewValue)" typeahead-editable="false" typeahead-loading="kscLoadingNodes" typeahead-no-results="kscNoResults" typeahead-min-length="1" typeahead-on-select="goToKscReport($item)"> <div class="input-group-append"> <span class="input-group-text"><i class="fa fa-search"></i></span> </div> </div> <i ng-show="kscLoadingNodes" class="fa fa-refresh"></i> <p class="form-text text-muted" ng-show="kscNoResults"> <i class="fa fa-remove"></i> No Results Found </p> </div> ')}]),e.exports=o},44:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/search/template.nodes.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<div class="form-group"> <div class="input-group"> <input type="text" class="form-control" ng-model="asyncNode" placeholder="Type the node label" uib-typeahead="node as node.label for node in getNodes($viewValue)" typeahead-editable="false" typeahead-loading="nodeLoadingNodes" typeahead-no-results="nodeNoResults" typeahead-min-length="1" typeahead-on-select="goToChooseResources($item)"> <div class="input-group-append"> <span class="input-group-text"><i class="fa fa-search"></i></span> </div> </div> <i ng-show="nodeLoadingNodes" class="fa fa-refresh"></i> <p class="form-text text-muted" ng-show="nodeNoResults"> <i class="fa fa-remove"></i> No Results Found </p> </div> ')}]),e.exports=o},45:function(e,exports,o){"use strict";o(13);var t=l(o(69)),s=l(o(9)),r=l(o(11)),a=l(o(46)),i=l(o(16));function l(e){return e&&e.__esModule?e:{default:e}}var angular=o(3);o(10),o(90),o(91),o(80);var n=o(47),c=function(e,o){o.data?e.error=o.data:e.error="An unexpected error occurred while handling the request"};angular.module("onms.central.search",["angular-loading-bar","ngResource","ui.router","onms.http"]).config(["$locationProvider",function(e){e.hashPrefix("")}]).directive("onmsCentralSearch",(function(){return{restrict:"E",transclude:!1,templateUrl:n,controller:"QuickSearchController"}})).factory("SearchResource",["$resource",function(e){return e("api/v2/search",{},{query:{method:"GET",isArray:!0,cancellable:!0}})}]).controller("QuickSearchController",["$scope","SearchResource","$timeout","$document",function($scope,e,o,l){var n=13,d=16,u=27,p=38,f=40,m="Group",g="Item",h="More";$scope.query="",$scope.results={},$scope.performSearchExecuted=!1,$scope.showLoadingIndicator=!1,$scope.showLoadingIndicatorDelay=250,$scope.performSearchDelay=500,$scope.performSearchPromise=void 0,$scope.performSearchHandle=void 0,$scope.showLoadingIndicatorPromise=void 0,$scope.shiftLastPressed=void 0,$scope.selectedIndex=0,(0,t.default)(l).call(l,"mousedown",(function(e){var t=$("#onms-search-form").has(e.target).length>0,s=$("#onms-search-form").is(e.target);t||s||o((function(){$scope.resetQuery(),$scope.cancelRequest()}))})),(0,t.default)(l).call(l,"keyup",(function(e){o((function(){e.keyCode===d&&new Date-$scope.shiftLastPressed<=350?(angular.element("#onms-search-query").focus(),angular.element("#onms-search-query").select(),$scope.shiftLastPressed=void 0):e.keyCode===d&&($scope.shiftLastPressed=new Date),e.keyCode===u&&($scope.resetQuery(),$scope.cancelRequest())}))})),(0,t.default)(l).call(l,"keydown",(function(e){o((function(){if($scope.results.length>0){var t=document.getElementById("onms-search-result-item-"+$scope.selectedIndex);if(e.keyCode===p||e.keyCode===f){$scope.navigateSearchResult(e.keyCode);var s=document.getElementById("onms-search-result"),r=s.clientHeight,a=t.clientHeight,i=t.offsetTop;i+a+25>=r+s.scrollTop&&(s.scrollTop=i),0!==s.scrollTop&&s.scrollTop>i-a&&(s.scrollTop=i-a)}e.keyCode===n&&($scope.results[$scope.selectedIndex].type===h?o((function(){angular.element(t).triggerHandler("click")}),0):($scope.resetQuery(),$scope.cancelRequest(),t.click()))}}))})),$scope.navigateSearchResult=function(e){switch($scope.results[$scope.selectedIndex].selected=!1,e){case p:$scope.selectedIndex--;break;case f:$scope.selectedIndex++}$scope.selectedIndex<1&&($scope.selectedIndex=1),$scope.selectedIndex>=$scope.results.length&&($scope.selectedIndex=$scope.results.length-1),$scope.results[$scope.selectedIndex].type===m?$scope.navigateSearchResult(e):$scope.results[$scope.selectedIndex].selected=!0},$scope.resetQuery=function(){$scope.query="",$scope.results=[],$scope.performSearchExecuted=!1,$scope.performSearchHandle&&$scope.performSearchHandle.$cancelRequest()},$scope.cancelRequest=function(){$scope.performSearchHandle&&$scope.performSearchHandle.$cancelRequest(),$scope.showLoadingIndicator=!1,o.cancel($scope.showLoadingIndicatorPromise)},$scope.select=function(e){var o=e||1;$scope.selectedIndex>=1&&($scope.results[$scope.selectedIndex].selected=!1),$scope.selectedIndex=o,$scope.results[$scope.selectedIndex].selected=!0},$scope.onQueryChange=function(){0!=$scope.query.length?$scope.query.length<3||(o.cancel($scope.performSearchPromise),$scope.results=[],$scope.performSearchExecuted=!1,$scope.performSearchPromise=o((function(){o.cancel($scope.showLoadingIndicatorPromise),$scope.showLoadingIndicatorPromise=o((function(){$scope.showLoadingIndicator=!0}),$scope.showLoadingIndicatorDelay),$scope.performSearchHandle&&$scope.performSearchHandle.$cancelRequest(),$scope.error=void 0,$scope.performSearchHandle=e.query({_s:$scope.query},(function(o){$scope.cancelRequest(),$scope.performSearchExecuted=!0;var t=[];(0,s.default)(o).call(o,(function(o){var l;if(t.push({context:o.context.name,label:o.results.length>1?o.context.name+"s":o.context.name,type:m,count:o.results.length,more:o.more}),(0,s.default)(l=o.results).call(l,(function(e){e.type=g,t.push(e)})),!0===o.more){var n={context:o.context.name,count:o.results.length,type:h,loadMore:function(){$scope.error=void 0,e.query({_s:$scope.query,_l:this.count+10,_c:this.context},(function(e){var o,t,l,c,d=(0,r.default)(o=$scope.results).call(o,n),u=e[0],p=(0,a.default)(t=u.results).call(t,d-1);(0,s.default)(p).call(p,(function(e,o){var t;e.type=g,(0,i.default)(t=$scope.results).call(t,d+o,0,e),n.count++})),n.selected=!1,$scope.results[$scope.selectedIndex].selected=!0,!1===u.more&&(0,i.default)(l=$scope.results).call(l,(0,r.default)(c=$scope.results).call(c,n),1)}),(function(e){$scope.performSearchExecuted=!0,c($scope,e)}))},selected:!1};t.push(n)}})),$scope.results=t,0!=$scope.results.length&&($scope.selectedIndex=1,$scope.results[$scope.selectedIndex].selected=!0)}),(function(e){e.status>=0&&($scope.performSearchExecuted=!0,c($scope,e),$scope.cancelRequest())}))}),$scope.performSearchDelay)):$scope.resetQuery()}}])},47:function(e,exports){var o="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-central-search/quicksearch.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(o,'<span> <style>.search-result{max-height:700px;min-width:280px;max-width:60%;position:absolute;top:100%;z-index:100000;overflow:auto;border:#343a40 solid 1px}.search-result .list-group-item{padding:.25rem .75rem;font-size:90%}.search-result .list-group-item:last-child{border-bottom-right-radius:0;border-bottom-left-radius:0}.search-bar .form-control{border:none;outline:0;box-shadow:none;border-radius:1rem;padding:0}.search-bar .input-group-text{border-top-left-radius:1rem;border-bottom-left-radius:1rem;background-color:#fff;border-color:#fff}.search-result .list-group-item:hover{background-color:#e9ecef}.selected{background-color:#e9ecef}</style> <form id="onms-search-form" autocomplete="off" novalidate class="form-inline"> <input autocomplete="false" name="hidden" type="text" style="display:none"> <div class="input-group search-bar"> <div class="input-group-prepend"> <div class="input-group-text"><i class="fa fa-search"></i></div> </div> <label class="form-control"> <input id="onms-search-query" ng-change="onQueryChange()" ng-focus="input.focus=true" ng-blur="input.focus=false" ng-model="query" type="text" class="form-control" placeholder="Search..." aria-label="Search"> <small class="text-muted mr-4 quick-search-chevron" ng-show="!input.focus"> <span></span> <span></span> </small> </label> <div ng-if="showLoadingIndicator" class="btn btn-secondary rounded-0"> <div class="spinner-border spinner-border-sm text-white" role="status"></div> <span class="sr-only">Loading...</span> </div> <div ng-if="performSearchExecuted === true && !showLoadingIndicator" class="input-group-append"> <button class="btn btn-secondary" type="button" title="Reset Search" ng-click="resetQuery()"><i class="fa fa-times"></i></button> </div> <div ng-if="showLoadingIndicator" class="input-group-append"> <button class="btn btn-secondary" type="button" title="Cancel Request" ng-click="cancelRequest()"><i class="fa fa-times"></i></button> </div> </div> <div ng-if="performSearchExecuted === true" class="bg-dark search-result rounded-bottom" id="onms-search-result"> <div class="list-group" ng-if="results.length > 0"> <div id="onms-search-result-item-{{$index}}" ng-repeat-start="item in results track by $index" ng-if="item.type === \'Group\'" class="list-group-item bg-dark text-grey border-0 pl-2"> <span ng-if="!item.t">{{item.label}}</span> </div> <a id="onms-search-result-item-{{$index}}" ng-class="{\'selected\': item.selected}" ng-if="item.type === \'More\'" ng-click="item.loadMore()" class="list-group-item list-group-item-action" href ng-mouseover="select($index)">more...</a> <a id="onms-search-result-item-{{$index}}" ng-class="{\'selected\': item.selected}" ng-repeat-end ng-if="item.type === \'Item\'" href="{{item.url}}" class="list-group-item list-group-item-action" ng-mouseover="select($index)" ng-click="resetQuery()"> <h6 class="mb-0"><i class="{{item.icon}}" ng-if="item.icon">&nbsp;</i>{{item.label}} <i style="-webkit-transform:scaleY(-1);transform:scaleY(-1)" class="fa fa-reply pull-right" ng-if="item.selected"></i></h6> <small class="mr-4" ng-class="{\'text-muted\': !item.selected}" ng-repeat="match in item.matches">{{match.label}}: {{match.value}}</small> <br ng-if="item.info !== \'\'"> <small class="mr-4" ng-class="{\'text-muted\': !item.selected}" ng-if="item.info !== \'\'">{{item.info}}</small> </a> </div> <div ng-if="!error && results.length === 0" class="text-grey"> <span>No Results found</span> </div> <div ng-if="error" class="alert alert-danger mx-2 my-2"> <span>{{error}}</span> </div> </div> </form> </span> ')}]),e.exports=o},5:function(e,exports,o){"use strict";console.log("init: jquery-js");var jQuery=o(7);o(28),e.exports=jQuery},63:function(e,exports,o){"use strict";var angular=o(3);o(42),o(45);angular.module("onms.default.apps",["onms.central.search","onms-search"])},8:function(e,exports,o){"use strict";console.log("init: moment-js");var t=o(1);o(35),o(36),e.exports=t},991:function(e,exports,o){"use strict";o(48),o(149),o(13);var t=m(o(29)),s=m(o(103)),r=m(o(285)),a=m(o(992)),i=m(o(246)),l=m(o(46)),n=m(o(1005)),c=m(o(82)),d=m(o(49)),u=m(o(97)),p=m(o(11)),f=m(o(16));function m(e){return e&&e.__esModule?e:{default:e}}var angular=o(3),g=o(128);o(206),o(10),o(63),o(450),o(90),o(91),o(80),o(1009);var h,v=o(1010),y=o(1011),b=o(1012),w=o(1013),x=o(1014),C=o(1015),q=o(1016),k=o(292),P=function(e,$scope){if(e&&e.data){var o=e.data;$scope.error={},$scope.error[o.context]=o.message}};(0,t.default)(h=angular.module("onms.classifications",["angular-loading-bar","ngResource","ui.router","ui.bootstrap","ui.checkbox","ui.toggle","ui.sortable","onms.http","onms.elementList","mwl.confirm","onms.pagination","onms.default.apps"]).run(["confirmationPopoverDefaults",function(e){e.templateUrl=k}]).config(["$locationProvider",function(e){e.hashPrefix("!"),e.html5Mode(!1)}]).config(["$stateProvider","$urlRouterProvider",function(e,o){e.state("classifications",{url:"/classifications",controller:"ClassificationController",templateUrl:v}).state("classifications.config",{templateUrl:y,url:"/config",controller:"ClassificationConfigController"}).state("classifications.group",{templateUrl:b,url:"/:id",controller:"ClassificationGroupController"}),o.otherwise("classifications/config")}])).call(h,"capitalize",(function(){return function(e){return e?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():""}})).factory("ClassificationService",["$resource",function(e){return e("rest/classifications/",{},{classify:{method:"POST",url:"rest/classifications/classify"}})}]).factory("ClassificationGroupService",["$resource",function(e){return e("rest/classifications/groups/:id",{id:"@id"},{get:{method:"GET"},update:{method:"PUT"},query:{method:"GET",isArray:!0},delete:{method:"DELETE"}})}]).factory("ClassificationRuleService",["$resource",function(e){return e("rest/classifications/:id",{id:"@id"},{get:{method:"GET"},save:{method:"POST"},update:{method:"PUT"},query:{method:"GET",isArray:!0},delete:{method:"DELETE"}})}]).factory("ProtocolService",["$resource",function(e){return e("rest/classifications/protocols")}]).controller("ClassificationController",["$scope","$state","ClassificationService","ClassificationGroupService","ProtocolService",function($scope,e,o,a,i){$scope.groups=[],$scope.classificationRequest={},$scope.classificationResponse=void 0,$scope.isClassificationCollapsed=!0,$scope.error=void 0,$scope.classify=function(e){o.classify(e,(function(e){$scope.classifyError=void 0,$scope.classificationResponse=void 0===e.classification?"No mapping found":e.classification}),(function(e){$scope.classificationResponse=void 0,400===e.status&&e.data&&e.data.context&&e.data.message?($scope.classifyError={},$scope.classifyError[e.data.context]=e.data.message):$scope.classifyError.entity="Cannot perform the request."}))},$scope.refreshTabs=function(o){return a.query({limit:1e3,orderBy:"position"},(function(a){var i,l;$scope.groups=(0,t.default)(a).call(a,(function(e){return!0===e.enabled})),$scope.groups=(0,s.default)(i=$scope.groups).call(i,(function(e,o){return o.position-e.position})),$scope.groups=(0,r.default)(l=$scope.groups).call(l),o&&0!==$scope.groups.length&&e.go("classifications.group",{id:$scope.groups[0].id})}))},$scope.loadProtocols=function(){i.query((function(e,o){$scope.protocols=e}))},$scope.fullyDefined=function(){return $scope.classificationRequest&&$scope.classificationRequest.protocol&&$scope.classificationRequest.dstPort&&$scope.classificationRequest.dstAddress&&$scope.classificationRequest.srcPort&&$scope.classificationRequest.srcAddress&&$scope.classificationRequest.exporterAddress},$scope.toggleClassificationMode=function(){$scope.classificationMode="simple"===$scope.classificationMode?"complex":"simple"},$scope.loadProtocols(),$scope.refreshTabs(!0)}]).controller("ClassificationConfigController",["$scope","$rootScope","$uibModal","$location","$log","ClassificationGroupService",function($scope,e,o,t,s,r){$scope.groups=[],$scope.query={page:1,limit:20,totalItems:0},$scope.updateGroup=function(e){e.$update({},(function(){$scope.refreshTabs(),$scope.refresh()}))},$scope.deleteGroup=function(e){e.$delete().then((function(){$scope.refreshTabs(),$scope.refresh()}))};var a=function(e){return o.open({backdrop:!1,controller:"GroupModalController",templateUrl:x,size:"lg",resolve:{group:function(){return e},groups:function(){return $scope.groups},groupsTotalAmount:function(){return $scope.query.totalItems}}})};$scope.editGroup=function(e){a(e).closed.then((function(){$scope.refreshTabs(),$scope.refresh()}),(function(){$scope.refresh()}))},$scope.addGroup=function(e){a(e).closed.then((function(){$scope.refreshTabs(),$scope.refresh()}))},$scope.refresh=function(){var e=$scope.query||{};r.query({limit:20,offset:(e.page-1)*e.limit||0,orderBy:"position",order:"asc"},(function(e,o){$scope.groups=e;var t=g.parseContentRange(o("Content-Range"));$scope.query.totalItems=t.total}))},$scope.sortableGroups={start:function(e,o){angular.element(o.item).data("oldIndex",o.item.index())},stop:function(e,o){var t=angular.element(o.item).data().oldIndex,s=o.item.index();if(t!==s){var a,i=$scope.query||{},l=(i.page-1)*i.limit||0,n=$scope.groups[s];if(s-1<0)a=l;else{var c=$scope.groups[s-1];a=s>t?c.position:c.position+1}n.position=a,r.update(n,(function(){$scope.refreshTabs(),$scope.refresh()}),(function(e){P(e,$scope)}))}},items:"tr:not(.unsortable)"},$scope.refresh()}]).controller("ClassificationGroupController",["$scope","$stateParams","$uibModal","$log","$http","$window","ClassificationRuleService","ClassificationGroupService",function($scope,e,o,t,s,r,i,l){$scope.rules=[],$scope.query={page:1,limit:20,totalItems:0,orderBy:"position",order:"asc",groups:[e.id],search:void 0},$scope.splitRule=function(e){return e?(0,a.default)(e).call(e,",","\n"):e},$scope.findGroup=function(e){return l.get({id:e},(function(e){$scope.group=e,$scope.refresh()}))},$scope.showExportRulesDialog=function(){o.open({backdrop:!1,controller:"ClassificationExportController",templateUrl:q,resolve:{group:function(){return $scope.group}}}).result.then((function(){$scope.refreshTabs(),$scope.refresh()}))},$scope.refresh=function(){var e=$scope.query||{},o=!$scope.group.readOnly&&"position"===$scope.query.orderBy&&"asc"===$scope.query.order,t=angular.element(".ui-sortable");return!0===o?t.sortable("enable"):t.sortable("disable"),i.query({limit:e.limit||20,offset:(e.page-1)*e.limit||0,orderBy:e.orderBy,order:e.order,groupFilter:e.groups||[],query:e.search},(function(e,o){$scope.rules=e;var t=g.parseContentRange(o("Content-Range"));$scope.query.totalItems=t.total}))},$scope.refreshGroup=function(){for(var e=0;e<$scope.groups.length;e++){var o=$scope.groups[e];if(o.id===$scope.group.id)return void($scope.group=o)}},$scope.refreshAll=function(){$scope.refreshTabs().$promise.then((function(){$scope.refreshGroup(),$scope.refresh()}))},$scope.changeOrderBy=function(e){$scope.query.orderBy===e?$scope.query.order="asc"===$scope.query.order?"desc":"asc":($scope.query.orderBy=e,$scope.query.order="asc"),$scope.refresh()},$scope.deleteRule=function(e){e.$delete().then((function(){$scope.refreshAll()}))},$scope.deleteAllRules=function(){i.delete({groupId:$scope.group.id},(function(){$scope.refreshAll()}))};var n=function(e,t){return o.open({backdrop:!1,controller:"ClassificationModalController",templateUrl:w,size:"lg",resolve:{classification:function(){return e},group:function(){return t},groups:function(){return $scope.groups}}})};$scope.editRule=function(e){n(e,e.group).closed.then((function(){$scope.refreshAll()}),(function(){$scope.refresh()}))},$scope.addRule=function(e){n(null,e).closed.then((function(){$scope.refreshAll()}))},$scope.sortableRules={start:function(e,o){angular.element(o.item).data("oldIndex",o.item.index())},stop:function(e,o){var t=angular.element(o.item).data().oldIndex,s=o.item.index();if(t!==s){var r,a=$scope.query||{},l=(a.page-1)*a.limit||0,n=$scope.rules[s];if(s-1<0)r=l;else{var c=$scope.rules[s-1];r=s>t?c.position:c.position+1}n.position=r,i.update(n,(function(){$scope.refreshAll()}),(function(e){P(e,$scope)}))}}},$scope.importRules=function(){o.open({size:"lg",backdrop:!1,controller:"ClassificationImportController",templateUrl:C,resolve:{group:function(){return $scope.group}}}).closed.then((function(){$scope.refreshAll()}))},$scope.clearSearch=function(){$scope.query.search=void 0,$scope.refresh()},$scope.findGroup(e.id)}]).controller("ClassificationImportController",["$scope","$http","$uibModalInstance","group",function($scope,e,o,t){$scope.group=t,$scope.setFile=function(e){$scope.$apply((function(o){o.fileToUpload=e.files[0]}))},$scope.openFileDialogue=function(){(0,i.default)((function(){document.getElementById("fileToImport").click()}),0)},$scope.resetInput=function(){$scope.fileToUpload=void 0,$scope.error=void 0,$scope.failedRows=[],$scope.containsHeader=!0,$scope.deleteExistingRules=!1,$scope.pagination={page:1,totalItems:0,limit:5}},$scope.navigateWithinErrors=function(){var e,o=$scope.pagination.limit,t=($scope.pagination.page-1)*o,s=Math.min(t+o,$scope.errors.length);$scope.failedRows=(0,l.default)(e=$scope.errors).call(e,t,s)},$scope.uploadFile=function(){var s=new FileReader;s.onload=function(r){$scope.error=void 0,$scope.errors=[],$scope.failedRows=[],e({url:"rest/classifications/groups/"+t.id,method:"POST",data:s.result,params:{hasHeader:$scope.containsHeader,deleteExistingRules:$scope.deleteExistingRules},headers:{"Content-Type":"text/comma-separated-values"}}).then((function(){o.close()}),(function(e){var o=e.data,t=e.status;if(500===t&&($scope.error="An unexpected error occurred."),400===t){if(o.error)return void($scope.error=o.error.message);if(o.errors){$scope.error="The rules could not be imported. Please fix the errors shown below and retry.";for(var s=(0,n.default)(o.errors),r=0;r<s.length;r++){var a=s[r],i=$scope.containsHeader?(0,c.default)(a,10)+1:a;$scope.errors.push({index:i,message:o.errors[a].message})}$scope.pagination.totalItems=$scope.errors.length,$scope.navigateWithinErrors()}}}))},s.readAsText($scope.fileToUpload)},$scope.resetInput()}]).controller("ClassificationExportController",["$scope","$http","$uibModalInstance","group","$window",function($scope,e,o,t,s){$scope.group=t,$scope.export={},$scope.export.requestedFileName=t.name+"_rules.csv",$scope.exportGroup=function(){var e,t=(0,d.default)(e=$scope.export.requestedFileName).call(e);s.location="rest/classifications/groups/"+$scope.group.id+"?filename="+t+"&format=csv",o.close()}}]).controller("ClassificationModalController",["$scope","$uibModalInstance","ProtocolService","ClassificationRuleService","classification","group","groups",function($scope,e,o,s,r,a,i){var l;$scope.classification=r||{group:a},$scope.protocols=[],$scope.currentSelection=void 0,$scope.selectedProtocols=[],$scope.buttonName=$scope.classification.id?"Update":"Create",$scope.group=a,$scope.maxPosition=null===r?a.ruleCount:a.ruleCount-1,$scope.selectableGroups=(0,t.default)(i).call(i,(function(e){return!1===e.readOnly})),$scope.save=function(){var o,t=function(){e.close()},r=function(e){P(e,$scope)};$scope.classification.protocols=(o=$scope.selectedProtocols,(0,u.default)(o).call(o,(function(e){return e.keyword}))),$scope.classification.id?s.update($scope.classification,t,r):s.save($scope.classification,t,r)},$scope.cancel=function(){e.dismiss("Cancelled by User")},$scope.insertProtocol=function(e){var o;e&&-1===(0,p.default)(o=$scope.selectedProtocols).call(o,e)&&($scope.currentSelection="",$scope.selectedProtocols.push(e))},$scope.removeProtocol=function(e){var o,t,s=(0,p.default)(o=$scope.selectedProtocols).call(o,e);-1!==s&&(0,f.default)(t=$scope.selectedProtocols).call(t,s,1)},$scope.loadProtocols=function(){o.query((function(e,o){$scope.protocols=e}))},$scope.classification.id&&($scope.selectedProtocols=(l=$scope.classification.protocols,(0,u.default)(l).call(l,(function(e){return{keyword:e}})))),$scope.loadProtocols()}]).controller("GroupModalController",["$scope","$uibModalInstance","ClassificationGroupService","group","groups","groupsTotalAmount",function($scope,e,o,t,s,r){$scope.group=t||{enabled:!0},$scope.currentSelection=void 0,$scope.buttonName=$scope.group.id?"Update":"Create",$scope.groups=s,$scope.groupsTotalAmount=r,$scope.maxPosition=void 0===t?r-1:r-2,$scope.save=function(){var t=function(){e.close()},s=function(e){P(e,$scope)};$scope.group.id?o.update($scope.group,t,s):o.save($scope.group,t,s)},$scope.cancel=function(){e.dismiss("Cancelled by User")}}])}},[[991,0]]])}));
//# sourceMappingURL=onms-classifications.min.js.map