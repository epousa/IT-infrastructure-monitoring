{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/main/assets/js/apps/notifications/index.js","webpack:///./src/main/assets/js/vendor/jquery-js.js","webpack:///./src/main/assets/modules/lib/util/index.js"],"names":["_setTimeout2","_interopRequireDefault","require","_util","_jqueryJs","obj","__esModule","default","$","window","notificationSocket","connect","WebSocket","Util","getBaseHref","replace","onclose","event","close","onmessage","message","JSON","parse","data","notification","Notification","head","body","icon","badge","tag","id","permission","requestPermission","then","console","log","jQuery","module","exports","_classCallCheck","_createClass","key","value","base","document","getElementsByTagName","href","setLocation","url","location","toggle","booleanValue","elementName","checkboxes","getElementsByName","index","hasOwnProperty","checked"],"mappings":"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","file":"notifications.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn ","/**\n * @copyright 2016-2019 The OpenNMS Group, Inc.\n */\n\n'use strict';\n\nimport Util from 'lib/util';\nimport $ from 'vendor/jquery-js';\n\n$(function() {\n    if ('Notification' in window) {\n        let notificationSocket = null;\n\n        let connect = function () {\n            notificationSocket = new WebSocket((Util.getBaseHref() + 'notification/stream').replace(/^http/, 'ws'));\n\n            notificationSocket.onclose = function (event) {\n                notificationSocket.close();\n                notificationSocket = null;\n\n                setTimeout(connect, 1000);\n            };\n\n            notificationSocket.onmessage = function (event) {\n                let message = JSON.parse(event.data);\n                let notification = new Notification(message.head, {\n                    body: message.body,\n                    icon: Util.getBaseHref() + 'images/o-512.png',\n                    badge: Util.getBaseHref() + 'favicon.ico',\n                    tag: 'opennms:notification:' + message.id\n                });\n            };\n        };\n\n        if (Notification.permission === 'granted') {\n            connect();\n        } else if (Notification.permission !== 'denied') {\n            Notification.requestPermission()\n                .then(function (permission) {\n                    if (permission === 'granted') {\n                        connect();\n                    }\n                });\n        }\n    }\n});\n","console.log('init: jquery-js'); // eslint-disable-line no-console\n\nconst jQuery = require('jquery');\nrequire('jquery-migrate');\n\nmodule.exports = jQuery;\n","export default class Util {\n\tstatic getBaseHref() {\n\t\tconst base = document.getElementsByTagName('base')[0];\n\t\tif (base) {\n\t\t\treturn base.href;\n\t\t}\n\t\treturn '';\n\t}\n\tstatic setLocation(url) {\n\t\tif (window && window.location) {\n\t\t\twindow.location.href = Util.getBaseHref() + url;\n\t\t}\n\t}\n\tstatic toggle(booleanValue, elementName) {\n\t\tvar checkboxes = document.getElementsByName(elementName);\n\t\tfor (var index in checkboxes) {\n\t\t\tif (checkboxes.hasOwnProperty(index)) {\n\t\t\t\tcheckboxes[index].checked = booleanValue;\n\t\t\t}\n\t\t}\n\t}\n}"],"sourceRoot":""}