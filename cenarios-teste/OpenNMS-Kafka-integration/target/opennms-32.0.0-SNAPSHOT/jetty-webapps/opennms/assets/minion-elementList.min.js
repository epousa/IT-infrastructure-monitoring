!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var r in a)("object"==typeof exports?exports:e)[r]=a[r]}}(window,(function(){return(window.webpackJsonp=window.webpackJsonp||[]).push([[34,2,8,25,35,41,49],{10:function(e,exports,t){"use strict";var a,r=(a=t(70))&&a.__esModule?a:{default:a};var angular=t(3),o=t(22);angular.module("onms.http",["ui.bootstrap"]).factory("InterceptorService",["$q","$rootScope",function(e,t){return{responseError:function(a){var o,n;401===a.status&&(a.config&&a.config.url&&((0,r.default)(o=a.config.url).call(o,"rest/")||(0,r.default)(n=a.config.url).call(n,"api/v2/"))&&(console.error("Login Required",a,a.headers),t.$emit("loginRequired")));return 403===a.status&&t.$emit("permissionDenied"),e.reject(a)}}}]).config(["$locationProvider",function(e){e.hashPrefix("")}]).config(["$httpProvider",function(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.interceptors.push("InterceptorService")}]).run(["$rootScope","$uibModal",function(e,t){e.$on("loginRequired",(function(){var e=document.getElementsByTagName("base");e&&e.length>0&&e[0].href?document.headerLogoutForm.submit():console.warn("Login is required, but cannot forward to login page due to missing base tag.")})),e.$on("permissionDenied",(function(){t.open({templateUrl:o,controller:["$scope","$uibModalInstance",function($scope,e){$scope.reload=function(){e.dismiss(),window.location.reload()}}],size:"",backdrop:"static",keyboard:!1})}))}]),e.exports=angular},1017:function(e,exports,t){"use strict";t(109),t(210),t(293),t(158);var a,r,o=s(t(29)),n=s(t(97));function s(e){return e&&e.__esModule?e:{default:e}}var i="onms.elementList.minion",angular=t(3),l=t(128);t(451),t(136);var u=t(1018);(0,o.default)(a=(0,o.default)(r=angular.module("minionListFilters",["onmsListFilters","onmsDateFormatter"]).directive("onmsMinionList",(function(){return{restrict:"E",transclude:!0,templateUrl:u}}))).call(r,"property",(function(){return function(e){switch(e){case"id":return"ID";case"label":return"Label";case"location":return"Location";case"type":return"Type";case"status":return"Status";case"lastUpdated":return"Last updated";case"version":return"Version";default:return e}}}))).call(a,"value",(function(e){return function(t,a){return"lastUpdated"===a?e("onmsDate")(t):t}})),angular.module(i,["onms.restResources","onms.elementList","minionListFilters","onmsDateFormatter"]).config(["$locationProvider",function(e){e.hashPrefix("")}]).controller("MinionListCtrl",["$scope","$http","$location","$window","$log","$filter","DateFormatterService","minionFactory",function($scope,e,t,a,r,o,s,i){r.debug("MinionListCtrl initializing..."),$scope.minionNodes={},$scope.getLink=function(e){if(e&&$scope.minionNodes[e.id+"\0"+e.location])return"element/node.jsp?node="+$scope.minionNodes[e.id+"\0"+e.location].id},$scope.$parent.defaults.orderBy="label",$scope.$parent.query.orderBy="label",$scope.$parent.refresh=function(){s.formatter.finally((function(){i.query({_s:$scope.$parent.query.searchParam,limit:$scope.$parent.query.limit,offset:$scope.$parent.query.offset,orderBy:$scope.$parent.query.orderBy,order:$scope.$parent.query.order},(function(t,a){if($scope.$parent.items=t,t&&t.length>0){var r="("+(0,n.default)(t).call(t,(function(e){return"foreignId=="+e.id})).join(",")+")";e.get("api/v2/nodes",{params:{_s:r}}).then((function(e){var t,a={};if(e&&e.data&&e.data.node){angular.isArray(e.data.node)||(e.data.node=[e.data.node]);for(var r=0;r<e.data.node.length;r++)a[(t=e.data.node[r]).foreignId+"\0"+t.location]=t;$scope.minionNodes=a}}))}var o=l.parseContentRange(a("Content-Range"));$scope.$parent.query.lastOffset=o.end,$scope.$parent.query.maxOffset=o.total-1,$scope.$parent.setOffset(o.start)}),(function(e){switch(e.status){case 404:$scope.$parent.items=[],$scope.$parent.query.lastOffset=0,$scope.$parent.query.maxOffset=-1,$scope.$parent.setOffset(0);break;case 401:case 403:a.location.href=t.absUrl()}}))}))},$scope.$parent.deleteItem=function(e){var t=i.get({id:e.id},(function(){a.confirm('Are you sure you want to remove minion "'+e.id+'"?')&&t.$delete({id:e.id},(function(){var t=$scope.$watch("items",(function(){for(var a=0;a<$scope.items.length;a++)if($scope.items[a].id===e.id)return void $scope.refresh();t()}))}),(function(t){a.alert('Deletion of minion "'+e.id+'" failed.')}))}),(function(e){404===e.status&&$scope.refresh()}))},$scope.$parent.update=function(e){var t=i.get({id:e.id},(function(){t.label=e.label,t.location=e.location,t.properties=e.properties,t.$update({},(function(){""!==$scope.$parent.query.searchParam&&$scope.$parent.refresh()}))}),(function(e){r.debug(e)}))},$scope.$parent.refresh(),r.debug("MinionListCtrl initialized")}]).run(["$rootScope","$log",function(e,t){t.debug("Finished initializing "+i)}]),angular.element(document).ready((function(){console.log("Bootstrapping "+i),angular.bootstrap(document,[i])}))},1018:function(e,exports){var t="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/minion-elementList/main.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(t,'<div ng-controller="ListCtrl"> <div ng-controller="MinionListCtrl"> <div id="filterModal" class="modal fade" tabindex="-1"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-body"> <label>Add Filter:</label> <form class="form-inline" onSubmit="$(\'#filterModal\').modal(\'hide\')" ng-submit="addSearchClause(clause)"> <div class="form-group"> <select class="form-control custom-select" ng-model="clause.property" ng-init="clause.property = \'id\'"> <option value="id">ID</option> <option value="label">Label</option> <option value="location">Location</option> <option value="status">Status</option> <option value="version">Version</option> <option value="lastUpdated">Last Updated</option> </select> <select class="form-control custom-select" ng-model="clause.operator" ng-init="clause.operator = \'EQ\'"> <option value="EQ">=</option> <option value="NE">!=</option> <option value="LT">&lt;</option> <option value="LE">&lt;=</option> <option value="GT">&gt;</option> <option value="GE">&gt;=</option> </select> <input class="form-control" type="text" ng-model="clause.value" ng-if="clause.property !== \'lastUpdated\'"> <input class="form-control" type="datetime-local" ng-model="clause.value" ng-if="clause.property === \'lastUpdated\'"> </div> <button class="btn btn-secondary" type="submit">Submit</button> </form> </div> </div> </div> </div> <div id="helpModal" class="modal fade" tabindex="-1"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-body"> <h3>Help</h3> <h4>Filtering</h4> <p> Click on the <i class="fa fa-search-plus"></i> icon to filter the list. You can match a portion of a value by using the * character as a wildcard value. Click on the <i class="fa fa-ban"> icon to clear all filters.</i> </p> <h4>Filter by Example</h4> <p> You can click on the <i class="fa fa-plus-square-o"></i> icon next to a value to only show rows that contain that value. If you click on the <i class="fa fa-minus-square-o"></i> icon, it will remove rows with that value from the results. For timestamp values, clicking on the <i class="fa fa-toggle-left"></i> icon will show timestamps newer than the specified value and clicking on the <i class="fa fa-toggle-right"></i> icon will show timestamps older than the value. </p> <h4>Sorting</h4> <p>Click on a column header to sort by that column. Click the same column again to reverse the sort order.</p> <h4>Items per Page</h4> <p>You can change the number of items per page by entering a numeric value in the <i class="fa fa-th-list"></i> box.</p> </div> </div> </div> </div> <div class="well well-sm"> <span class="h5" style="line-height:2.8"> Filters&nbsp;&nbsp; <a href onClick="$(\'#filterModal\').modal()"><i class="fa fa-search-plus fa-lg"></i></a> &nbsp; <a href onClick="$(\'#helpModal\').modal()"><i class="fa fa-question-circle fa-lg"></i></a> &nbsp; <a href ng-click="clearSearch()"><i class="fa fa-ban fa-lg"></i></a> &nbsp; </span> <span ng-hide="query.searchClauses.length == 0"> <span ng-repeat="clause in query.searchClauses"> <div class="btn-group" style="margin:3px"> <button class="btn btn-primary" ng-click="removeSearchClause(clause)"> {{clause.property | property}} {{clause.operator | operator : clause.value}} {{clause.value | value : clause.property}} &nbsp; <i class="fa fa-close"></i> </button> </div> </span> </span> </div> <div> <div class=""> <button type="button" role="button" class="btn btn-secondary {{(query.offset-query.limit) &lt; 0 ? \'disabled\' : \'\'}}" ng-click="setOffset(0)"> <i class="fa fa-backward"></i>&nbsp;&nbsp;First </button> <button type="button" role="button" class="btn btn-secondary ml-2 {{(query.offset-query.limit) &lt; 0 ? \'disabled\' : \'\'}}" ng-click="setOffset(query.offset-query.limit)"> <i class="fa fa-play fa-flip-horizontal"></i>&nbsp;&nbsp;Previous </button> <div class="btn-group"> <a class="btn btn-secondary" ng-click="setOffset(query.offset-(3*query.limit))" ng-hide="(query.offset-(3*query.limit)) &lt; 0" style="width:5em"> {{(query.offset/query.limit) - 2}} </a> <a class="btn btn-secondary" ng-click="setOffset(query.offset-(2*query.limit))" ng-hide="(query.offset-(2*query.limit)) &lt; 0" style="width:5em"> {{(query.offset/query.limit) - 1}} </a> <a class="btn btn-secondary" ng-click="setOffset(query.offset-query.limit)" ng-hide="(query.offset-query.limit) &lt; 0" style="width:5em"> {{query.offset/query.limit}} </a> <a class="btn btn-secondary active" ng-show="query.maxOffset &gt; 0" style="width:5em"> {{(query.offset/query.limit) + 1}} </a> <a class="btn btn-secondary" ng-click="setOffset(query.offset+query.limit)" ng-hide="(query.offset+query.limit) &gt; query.maxOffset" style="width:5em"> {{(query.offset/query.limit) + 2}} </a> <a class="btn btn-secondary" ng-click="setOffset(query.offset+(2*query.limit))" ng-hide="query.offset+(2*query.limit) &gt; query.maxOffset" style="width:5em"> {{(query.offset/query.limit) + 3}} </a> <a class="btn btn-secondary" ng-click="setOffset(query.offset+(3*query.limit))" ng-hide="query.offset+(3*query.limit) &gt; query.maxOffset" style="width:5em"> {{(query.offset/query.limit) + 4}} </a> </div> <div class="pull-right"> <form class="form-inline" ng-submit="setLimit(query.newLimit)"> <div class="input-group" style="margin-left:10px"> <div class="input-group-prepend"> <span class="input-group-text"><i class="fa fa-th-list"></i></span> </div> <input class="form-control" type="number" ng-model="query.newLimit"> </div> <button type="button" role="button" class="btn btn-secondary mx-2 {{(query.offset+query.limit) &gt; query.maxOffset ? \'disabled\' : \'\'}}" ng-click="setOffset(query.offset + query.limit)"> Next&nbsp;&nbsp;<i class="fa fa-play"></i> </button> <button type="button" role="button" class="btn btn-secondary {{(query.offset+query.limit) &gt; query.maxOffset ? \'disabled\' : \'\'}}" ng-click="setOffset(1000000000)"> Last&nbsp;&nbsp;<i class="fa fa-forward"></i> </button> </form> </div> <h5 class="pull-right col-form-label" ng-show="query.maxOffset &lt; 0">No items found.</h5> <h5 class="pull-right col-form-label" ng-show="query.maxOffset &gt;= 0">{{query.offset === query.lastOffset ? "Item " + (query.offset + 1) : "Items " + (query.offset + 1) + " - " + (query.lastOffset + 1)}} ({{query.maxOffset + 1}} total)</h5> </div> </div> <br> <div class="card"> <table class="table table-bordered table-striped" style="font-size:100%"> <tbody> <tr> <th> <a href ng-click="changeOrderBy(\'id\')">ID</a> <i ng-show="query.orderBy === \'id\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'id\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th> <a href ng-click="changeOrderBy(\'label\')">Label</a> <i ng-show="query.orderBy === \'label\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'label\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th> <a href ng-click="changeOrderBy(\'location\')">Location</a> <i ng-show="query.orderBy === \'location\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'location\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th> <a href ng-click="changeOrderBy(\'type\')">Type</a> <i ng-show="query.orderBy === \'type\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'type\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th> <a href ng-click="changeOrderBy(\'status\')">Status</a> <i ng-show="query.orderBy === \'status\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'status\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th> <a href ng-click="changeOrderBy(\'version\')">Version</a> <i ng-show="query.orderBy === \'version\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'version\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th> <a href ng-click="changeOrderBy(\'date\')">Last Updated</a> <i ng-show="query.orderBy === \'date\' &amp;&amp; query.order === \'asc\'" class="fa fa-sort-asc"></i> <i ng-show="query.orderBy === \'date\' &amp;&amp; query.order === \'desc\'" class="fa fa-sort-desc"></i> </th> <th> Properties </th> <th> Actions </th> </tr> <tr ng-repeat="item in items"> <td class="text-nowrap" style="line-height:24px"> <span ng-if="getLink(item)"> <a href="{{getLink(item)}}">{{item.id}}</a> </span> <span ng-if="!getLink(item)"> {{item.id}} </span> <a href style="text-decoration:none" ng-click="addSearchClause({property:\'id\',operator:\'EQ\',value:item.id})"><i class="fa fa-plus-square-o fa-lg"></i></a> <a href style="text-decoration:none" ng-click="addSearchClause({property:\'id\',operator:\'NE\',value:item.id})"><i class="fa fa-minus-square-o fa-lg"></i></a> </td> <td class="text-nowrap"> <onms-list-edit-in-place item="item" value="item.label" value-type="\'text\'" on-submit="update(item)"> <a href style="text-decoration:none" ng-click="addSearchClause({property:\'label\',operator:\'EQ\',value:item.label})"><i class="fa fa-plus-square-o fa-lg"></i></a> <a href style="text-decoration:none" ng-click="addSearchClause({property:\'label\',operator:\'NE\',value:item.label})"><i class="fa fa-minus-square-o fa-lg"></i></a> </onms-list-edit-in-place> </td> <td class="text-nowrap"> {{item.location}} <a href style="text-decoration:none" ng-click="addSearchClause({property:\'location\',operator:\'EQ\',value:item.location})"><i class="fa fa-plus-square-o fa-lg"></i></a> <a href style="text-decoration:none" ng-click="addSearchClause({property:\'location\',operator:\'NE\',value:item.location})"><i class="fa fa-minus-square-o fa-lg"></i></a> </td> <td class="text-nowrap" style="line-height:24px"> {{item.type}} <a href style="text-decoration:none" ng-click="addSearchClause({property:\'type\',operator:\'EQ\',value:item.type})"><i class="fa fa-plus-square-o fa-lg"></i></a> <a href style="text-decoration:none" ng-click="addSearchClause({property:\'type\',operator:\'NE\',value:item.type})"><i class="fa fa-minus-square-o fa-lg"></i></a> </td> <td class="text-nowrap" style="line-height:24px"> <span ng-show="item.status !== null"> {{item.status}} <a href style="text-decoration:none" ng-click="addSearchClause({property:\'status\',operator:\'EQ\',value:item.status})"><i class="fa fa-plus-square-o fa-lg"></i></a> <a href style="text-decoration:none" ng-click="addSearchClause({property:\'status\',operator:\'NE\',value:item.status})"><i class="fa fa-minus-square-o fa-lg"></i></a> </span> </td> <td class="text-nowrap" style="line-height:24px"> <span ng-show="item.version !== null"> {{item.version}} <a href style="text-decoration:none" ng-click="addSearchClause({property:\'version\',operator:\'EQ\',value:item.version})"><i class="fa fa-plus-square-o fa-lg"></i></a> <a href style="text-decoration:none" ng-click="addSearchClause({property:\'version\',operator:\'NE\',value:item.version})"><i class="fa fa-minus-square-o fa-lg"></i></a> </span> </td> <td class="text-nowrap" style="line-height:24px"> <span ng-show="item.date !== null"> {{item.date | onmsDate}} <a href style="text-decoration:none" ng-click="addEpochTimestampSearchClause({property:\'lastUpdated\',operator:\'GE\',value:item.date})"><i class="fa fa-toggle-left fa-lg"></i></a> <a href style="text-decoration:none" ng-click="addEpochTimestampSearchClause({property:\'lastUpdated\',operator:\'LE\',value:item.date})"><i class="fa fa-toggle-right fa-lg"></i></a> </span> </td> <td> <onms-list-edit-map-in-place values="item.properties" value-type="\'text\'" on-edit="update(item)"></onms-list-edit-map-in-place> </td> <td> <a href style="text-decoration:none" ng-click="deleteItem(item)"><i class="fa fa-trash fa-lg"></i></a> </td> </tr> </tbody> </table> </div> </div> </div> ')}]),e.exports=t},12:function(e,exports,t){"use strict";console.log("init: bootstrap-js");var jQuery=t(5);t(8),t(41),e.exports=jQuery},128:function(e,exports,t){"use strict";t(48),t(150),t(14),t(149);var a,r,o=d(t(107)),n=d(t(11)),s=d(t(29)),i=d(t(49)),l=d(t(245)),u=d(t(16)),c=d(t(103));function d(e){return e&&e.__esModule?e:{default:e}}var f="onms.elementList";window.ISO_8601_DATE_FORMAT="yyyy-MM-ddTHH:mm:ss.sssZ",window.ISO_8601_DATE_FORMAT_WITHOUT_MILLIS="yyyy-MM-ddTHH:mm:ssZ";var angular=t(3);t(5);t(12);var p=t(129),m=t(130),y=t(131),h=function(e){return"string"==typeof e?e.replace("!","%21").replace("$","%24").replace("'","%27").replace("(","%28").replace(")","%29").replace("+","%2B").replace(",","%2C").replace(";","%3B").replace("=","%3D"):e},g=function(e){for(var t=!0,a="",r=0;r<e.length;r++){switch(t||(a+=";"),a+=e[r].property,e[r].operator){case"EQ":a+="==";break;case"NE":a+="!=";break;case"LT":a+="=lt=";break;case"LE":a+="=le=";break;case"GT":a+="=gt=";break;case"GE":a+="=ge="}a+=h(e[r].value),t=!1}return a},v=function(e){for(var t=e.split(";"),a=[],r=[],o=0;o<t.length;o++){var s,i,l,u,c,d;(0,n.default)(s=t[o]).call(s,"==")>0?(a=t[o].split("=="),r.push({property:a[0],operator:"EQ",value:a[1]})):(0,n.default)(i=t[o]).call(i,"!=")>0?(a=t[o].split("!="),r.push({property:a[0],operator:"NE",value:a[1]})):(0,n.default)(l=t[o]).call(l,"=lt=")>0?(a=t[o].split("=lt="),r.push({property:a[0],operator:"LT",value:a[1]})):(0,n.default)(u=t[o]).call(u,"=le=")>0?(a=t[o].split("=le="),r.push({property:a[0],operator:"LE",value:a[1]})):(0,n.default)(c=t[o]).call(c,"=gt=")>0?(a=t[o].split("=gt="),r.push({property:a[0],operator:"GT",value:a[1]})):(0,n.default)(d=t[o]).call(d,"=ge=")>0&&(a=t[o].split("=ge="),r.push({property:a[0],operator:"GE",value:a[1]}))}return r},q=function(e,t,a){var r,o=e;return t<0?(o=0,r=0):r=Math.floor(t/a)*a,o=(o=o<0?0:o)>r?r:o,o=Math.floor(o/a)*a};(0,s.default)(a=(0,s.default)(r=angular.module("onmsListFilters",[])).call(r,"operator",(function(){return function(e,t){var a="string"==typeof t&&(0,n.default)(t).call(t,"*")>-1;switch(e){case"EQ":return a?"is like":"equals";case"NE":return a?"is not like":"does not equal";case"LT":return"is less than";case"LE":return"is less than or equal";case"GT":return"is greater than";case"GE":return"is greater than or equal";default:return e}}}))).call(a,"isNotEmpty",(function(){return function(e){return e&&("string"!=typeof e||""!==(0,i.default)(e).call(e))}})),angular.module(f,[]).config(["$locationProvider",function(e){e.hashPrefix(""),e.html5Mode({enabled:!0,rewriteLinks:!1})}]).directive("onmsListEditInPlace",(function(){return{controller:["$scope",function($scope){$scope.editing=!1,$scope.originalValue=angular.copy($scope.value),$scope.edit=function(){$scope.editing=!0},$scope.unedit=function(){$scope.editing=!1},$scope.onKeyup=function(e){27===e.keyCode&&$scope.cancel()},$scope.submit=function(){$scope.onSubmit(),$scope.originalValue=$scope.value,$scope.unedit()},$scope.cancel=function(){$scope.value=$scope.originalValue,$scope.unedit()}}],scope:{item:"=",value:"=",valueType:"=",step:"=",onSubmit:"&onSubmit"},templateUrl:p,transclude:!0}})).directive("onmsListEditListInPlace",["$window",function(e){return{controller:["$scope",function($scope){$scope.editing=!1,$scope.edit=function(){$scope.editing=!0},$scope.unedit=function(){$scope.newValue=null,$scope.editing=!1},$scope.onKeyup=function(e){switch(e.keyCode){case 13:$scope.add((0,l.default)($scope),$scope.newValue);break;case 27:$scope.unedit()}},$scope.confirmAndRemove=function(t,a){e.confirm('Are you sure you want to remove "'+a+'"?')&&((0,u.default)(t).call(t,(0,n.default)(t).call(t,a),1),$scope.onEdit())},$scope.add=function(e,t){e.push(t),(0,c.default)(e).call(e),$scope.onEdit(),$scope.unedit()}}],scope:{values:"=",valueType:"=",step:"=",onEdit:"&onEdit"},templateUrl:m,transclude:!0}}]).directive("onmsListEditMapInPlace",["$window",function(e){return{controller:["$scope",function($scope){$scope.editing=!1,$scope.edit=function(){$scope.editing=!0},$scope.unedit=function(){$scope.newKey=null,$scope.newValue=null,$scope.editing=!1},$scope.onKeyup=function(e){switch(e.keyCode){case 13:$scope.add((0,l.default)($scope),$scope.newKey,$scope.newValue);break;case 27:$scope.unedit()}},$scope.confirmAndRemove=function(t,a){e.confirm('Are you sure you want to remove "'+a+'"?')&&(delete t[a],$scope.onEdit())},$scope.add=function(e,t,a){e[t]=a,$scope.onEdit(),$scope.unedit()}}],scope:{values:"=",keyType:"=",valueType:"=",step:"=",onEdit:"&onEdit"},templateUrl:y,transclude:!0}}]).controller("ListCtrl",["$scope","$location","$window","$log","$filter",function($scope,e,t,a,r){a.debug("ListCtrl initializing..."),$scope.defaults={_s:"",searchClauses:[],limit:20,offset:0,orderBy:"",order:"asc"};var o=void 0===e.search().limit?$scope.defaults.limit:Number(e.search().limit)>0?Number(e.search().limit):$scope.defaults.limit;$scope.query={lastOffset:0,maxOffset:0,searchParam:void 0===e.search()._s?$scope.defaults._s:e.search()._s,searchClauses:void 0===e.search()._s?$scope.defaults.searchClauses:v(e.search()._s),limit:o,newLimit:o,offset:void 0===e.search().offset?$scope.defaults.offset:Number(e.search().offset)>0?q(Number(e.search().offset),Number.MAX_VALUE,o):$scope.defaults.offset,orderBy:void 0===e.search().orderBy?$scope.defaults.orderBy:e.search().orderBy,order:void 0===e.search().order?$scope.defaults.order:"asc"===e.search().order?"asc":"desc"},$scope.$watch("query",(function(){var t=angular.copy($scope.query);delete t.searchClauses,delete t.newLimit,delete t.lastOffset,delete t.maxOffset,t._s=""===t.searchParam?null:t.searchParam,delete t.searchParam,t.limit!==$scope.defaults.limit&&""!==t.limit||delete t.limit,t.offset!==$scope.defaults.offset&&""!==t.offset||delete t.offset,t.orderBy!==$scope.defaults.orderBy&&""!==t.orderBy||delete t.orderBy,t.order!==$scope.defaults.order&&""!==t.order||delete t.order,t._s!==$scope.defaults._s&&""!==t._s||delete t._s,e.search(t)}),!0),$scope.addSearchClause=function(e){angular.isDate(e.value)&&(e.value=r("date")(new Date(e.value),ISO_8601_DATE_FORMAT)),$scope.getSearchClause(e)||($scope.query.searchClauses.push(angular.copy(e)),$scope.query.searchParam=g($scope.query.searchClauses),$scope.refresh())},$scope.getSearchClause=function(e){for(var t=0;t<$scope.query.searchClauses.length;t++)if($scope.clauseEquals(e,$scope.query.searchClauses[t]))return $scope.query.searchClauses[t];return null},$scope.clauseEquals=function(e,t){return e.property===t.property&&e.operator===t.operator&&e.value===t.value},$scope.addEpochTimestampSearchClause=function(e){e.value=r("date")(e.value,ISO_8601_DATE_FORMAT),$scope.addSearchClause(e)},$scope.removeSearchClause=function(e){var t,a;(0,u.default)(t=$scope.query.searchClauses).call(t,(0,n.default)(a=$scope.query.searchClauses).call(a,e),1),$scope.query.searchParam=g($scope.query.searchClauses),$scope.refresh()},$scope.removeSearchClauses=function(e){for(var t=0;t<e.length;t++){var a,r,o=(0,n.default)(a=$scope.query.searchClauses).call(a,e[t]);if(o>=0)(0,u.default)(r=$scope.query.searchClauses).call(r,o,1)}$scope.query.searchParam=g($scope.query.searchClauses),$scope.refresh()},$scope.replaceSearchClause=function(e,t){angular.isDate(t.value)&&(t.value=r("date")(new Date(t.value),ISO_8601_DATE_FORMAT));var a=$scope.getSearchClause(e),o=$scope.getSearchClause(t);a?o?$scope.removeSearchClause(e):(a.property=t.property,a.operator=t.operator,a.value=t.value,$scope.query.searchParam=g($scope.query.searchClauses),$scope.refresh()):o||$scope.addSearchClause(t)},$scope.clearSearch=function(){$scope.query.searchClauses.length>0&&($scope.query.searchClauses=[],$scope.query.searchParam="",$scope.refresh())},$scope.changeOrderBy=function(e){$scope.query.orderBy===e?$scope.query.order="asc"===$scope.query.order?"desc":"asc":($scope.query.orderBy=e,$scope.query.order=$scope.defaults.order),$scope.refresh()},$scope.setOffset=function(e){var t=q(e,$scope.query.maxOffset,$scope.query.limit);$scope.query.offset!==t&&($scope.query.offset=t,$scope.refresh())},$scope.setLimit=function(e){e<1?$scope.query.newLimit=$scope.query.limit:$scope.query.limit!==e&&($scope.query.limit=e,$scope.query.offset=q($scope.query.offset,$scope.query.maxOffset,$scope.query.limit),$scope.refresh())},$scope.refresh=function(){a.warn("You need to override $scope.$parent.refresh() in your controller")},$scope.update=function(){a.warn("You need to override $scope.$parent.update() in your controller")},$scope.deleteItem=function(e){a.warn("You need to override $scope.$parent.deleteItem() in your controller")},a.debug("ListCtrl initialized")}]).run(["$rootScope","$log",function(e,t){t.debug("Finished initializing "+f)}]),e.exports={appendTransform:function(e,t){var a=angular.isArray(e)?e:[e];return(0,o.default)(a).call(a,t)},toFiql:g,fromFiql:v,parseContentRange:function(e){if(!e)return{start:0,end:0,total:0};var t=/items\s+?(\d+)\s*-\s*(\d+)\s*\/\s*(\d+)/;return{start:Number(e.replace(t,"$1")),end:Number(e.replace(t,"$2")),total:Number(e.replace(t,"$3"))}},escapeSearchValue:h,normalizeOffset:q}},129:function(e,exports){var t="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editInPlace.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(t,'<form class="form-inline" ng-submit="submit()" style="margin:0"> <input ng-show="editing" ng-keyup="onKeyup($event)" type="{{valueType}}" step="{{step}}" ng-model="value"> <span style="line-height:24px" ng-hide="editing" ng-click="edit()">{{value}}&nbsp;</span> <a href style="text-decoration:none" ng-click="edit()" ng-hide="editing"><i class="fa fa-edit fa-lg"></i></a> <a href style="text-decoration:none" ng-click="submit()" ng-show="editing"><i class="fa fa-check fa-lg"></i></a> <a href style="text-decoration:none" ng-click="cancel()" ng-show="editing"><i class="fa fa-close fa-lg"></i></a> <span ng-transclude></span> </form> ')}]),e.exports=t},130:function(e,exports){var t="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editListInPlace.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(t,'<span> <span ng-repeat="value in values"> <button class="btn btn-sm btn-secondary" ng-click="confirmAndRemove(values, value)" style="margin-bottom:3px;margin-right:3px"> {{value}}&nbsp;<i class="fa fa-close"></i> </button> </span> <span style="line-height:24px" ng-hide="editing"> <a href style="text-decoration:none" ng-click="edit()"><i class="fa fa-edit fa-lg"></i></a>&nbsp; </span> <span ng-show="editing" class="text-nowrap"> <input type="{{valueType}}" ng-keyup="onKeyup($event)" ng-model="newValue"> <a href style="text-decoration:none" ng-click="add(values, newValue)"><i class="fa fa-plus fa-lg"></i></a> <a href style="text-decoration:none" ng-click="unedit()"><i class="fa fa-close fa-lg"></i></a> </span> <span ng-transclude></span> </span>')}]),e.exports=t},131:function(e,exports){var t="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/apps/onms-elementList/templates/angular-onms-elementList-editMapInPlace.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(t,'<span> <span ng-repeat="(key,value) in values"> <button class="btn btn-sm btn-secondary" ng-click="confirmAndRemove(values, key)" style="margin-bottom:3px;margin-right:3px"> <b>{{key}}:</b> {{value}}&nbsp;<i class="fa fa-close"></i> </button> </span> <span style="line-height:24px" ng-hide="editing"> <a href style="text-decoration:none" ng-click="edit()"><i class="fa fa-edit fa-lg"></i></a>&nbsp; </span> <span ng-show="editing" class="text-nowrap"> <input type="{{keyType}}" ng-keyup="onKeyup($event)" ng-model="newKey"> <input type="{{valueType}}" ng-keyup="onKeyup($event)" ng-model="newValue"> <a href style="text-decoration:none" ng-click="add(values, newKey, newValue)"><i class="fa fa-plus fa-lg"></i></a> <a href style="text-decoration:none" ng-click="unedit()"><i class="fa fa-close fa-lg"></i></a> </span> <span ng-transclude></span> </span>')}]),e.exports=t},136:function(e,exports,t){"use strict";var a,r=(a=t(29))&&a.__esModule?a:{default:a};var o,angular=t(3),n=t(8);function s(){}s.prototype.init=function(e){var t=this,a="yyyy-MM-dd'T'HH:mm:ssxxx";window._onmsZoneId=void 0;var r=new XMLHttpRequest;r.onreadystatechange=function(){try{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status){var o=JSON.parse(r.responseText);o.datetimeformatConfig&&o.datetimeformatConfig.datetimeformat?(window._onmsDateTimeFormat=o.datetimeformatConfig.datetimeformat||a,window._onmsZoneId=o.datetimeformatConfig.zoneId):(console.log("Error: datetimeformatConfig property not found:",o),window._onmsDateTimeFormat=a)}else console.log("Error: failed to request format info: "+r.status+" "+r.statusText),window._onmsDateTimeFormat=a;e(t,r.status)}}catch(o){console.log("Error: failed to request format info: ",o),window._onmsDateTimeFormat=a,e(t,r.status)}},r.open("GET","rest/info"),r.setRequestHeader("Accept","application/json"),r.send()},s.prototype.assertInitialized=function(){if(!window._onmsDateTimeFormat)throw console.log("OnmsDateFormatter.init() must complete before using!"),new Error("OnmsDateFormatter.init() must complete before using!")},s.prototype.getZoneId=function(){return this.assertInitialized(),this._zoneId||(window._onmsZoneId?this._zoneId=window._onmsZoneId:(console.warn("No zone ID specified from the server; guessing based on browser."),this._zoneId=n.tz.guess())),this._zoneId},s.prototype.format=function(e){if(this.assertInitialized(),null==e)return e;var t=this.getZoneId();return n.tz(e,t).formatJavaDTF(window._onmsDateTimeFormat)},function(){if("undefined"==typeof jest){var e=new s;e.init((function(){window._onmsFormatter=e}))}else console.log("Running in a test environment. Skipping automatic initialization.")}(),window.angular?(angular.module("onmsDateFormatter",["ng"]).factory("DateFormatterService",["$interval","$q",function(e,t){console.log("Initializing DateFormatterService");var a=t.defer(),r=0,o=e((function(){window._onmsFormatter&&(console.log("Global formatter found: "+window._onmsDateTimeFormat),a.resolve(window._onmsFormatter),e.cancel(o)),r++>300&&(console.log("DateFormatterService: giving up waiting for global formatter."),e.cancel(o))}),100);return{raw:window._onmsFormatter,formatter:a.promise,format:function(e){return a.promise.then((function(t){return t.format(e)}))}}}]),(0,r.default)(o=angular.module("onmsDateFormatter")).call(o,"onmsDate",["$filter","DateFormatterService",function(e,t){return function(t,a){var r;return null!=(r=window._onmsFormatter?window._onmsFormatter.format(t):e("date")(t,"yyyy-MM-ddTHH:mm:ss.sssZ"))?r:a}}]),angular.module("onmsDateFormatter").directive("onmsDate",["DateFormatterService",function(e){return{restrict:"E",compile:function(t){e.format(t.text()).then((function(e){t.replaceWith(e)})).catch((function(e){console.error("Failed to format "+t.text(),e)}))}}}])):console.log("Angular not found.  Not initializing OnmsDateFormatter Angular components."),e.exports=s},22:function(e,exports){var t="/home/epousa/dev/opennms/core/web-assets/src/main/assets/js/lib/onms-http/403-permission-denied.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(t,'<span> <div class="modal-header"> <h3><i class="fa fa-exclamation-triangle text-warning"></i> Permission Denied</h3> </div> <div class="modal-body"> <h5> You are not allowed to perform the requested action. </h5> <p class="text-muted"> This is not supposed to happen. Please reload the page and contact your administrator if this occurs more often. </p> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="reload()">Reload</button> </div> </span>')}]),e.exports=t},3:function(e,exports,t){"use strict";t(5);var angular=t(40);t(53),t(54),t(55),t(56),t(51),t(57),t(58),t(59),t(60),t(12),t(61),t(62),console.log("init: angular-js "+angular.version.full),e.exports=window.angular=angular},451:function(e,exports,t){"use strict";var a,r=(a=t(107))&&a.__esModule?a:{default:a};var angular=t(3);t(10);var o=function(e,t){var a=angular.isArray(e)?e:[e];return(0,r.default)(a).call(a,t)},n=function(e,t,a,r){return 204===a?[]:angular.isArray(e[r])?e[r]:[e[r]]};angular.module("onms.restResources",["onms.http","ngResource"]).factory("alarmFactory",["$resource","$log","$http","$location",function(e,t,a,r){return e("api/v2/alarms/:id",{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"alarm")}))},update:{method:"PUT"},queryProperties:{url:"api/v2/alarms/properties",method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"searchProperty")}))},queryPropertyValues:{url:"api/v2/alarms/properties/:id",method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"value")}))}})}]).factory("eventFactory",["$resource","$log","$http","$location",function(e,t,a,r){return e("api/v2/events/:id",{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"event")}))},update:{method:"PUT"},queryProperties:{url:"api/v2/events/properties",method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"searchProperty")}))},queryPropertyValues:{url:"api/v2/events/properties/:id",method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"value")}))}})}]).factory("minionFactory",["$resource","$log","$http","$location",function(e,t,a,r){return e("api/v2/minions/:id",{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"minion")}))},update:{method:"PUT"}})}]).factory("monitoringLocationFactory",["$resource","$log","$http","$location",function(e,t,a,r){return e("api/v2/monitoringLocations/:id",{},{query:{method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"location")}))},update:{method:"PUT"}})}]).factory("nodeFactory",["$resource","$log","$http","$location",function(e,t,a,r){return e("api/v2/nodes/:id",{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"node")}))},update:{method:"PUT"},queryProperties:{url:"api/v2/nodes/properties",method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"searchProperty")}))},queryPropertyValues:{url:"api/v2/nodes/properties/:id",method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"value")}))}})}]).factory("notificationFactory",["$resource","$log","$http","$location",function(e,t,a,r){return e("api/v2/notifications/:id",{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"notification")}))},update:{method:"PUT"},queryProperties:{url:"api/v2/notifications/properties",method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"searchProperty")}))},queryPropertyValues:{url:"api/v2/notifications/properties/:id",method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"value")}))}})}]).factory("outageFactory",["$resource","$log","$http","$location",function(e,t,a,r){return e("api/v2/outages/:id",{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"outage")}))},update:{method:"PUT"},queryProperties:{url:"api/v2/outages/properties",method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"searchProperty")}))},queryPropertyValues:{url:"api/v2/outages/properties/:id",method:"GET",isArray:!0,transformResponse:o(a.defaults.transformResponse,(function(e,t,a){return n(e,0,a,"value")}))}})}])},5:function(e,exports,t){"use strict";console.log("init: jquery-js");var jQuery=t(7);t(28),e.exports=jQuery},8:function(e,exports,t){"use strict";console.log("init: moment-js");var a=t(1);t(35),t(36),e.exports=a}},[[1017,0]]])}));
//# sourceMappingURL=minion-elementList.min.js.map