{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/main/assets/modules/lib/loader/index.ts"],"names":["root","factory","exports","module","define","amd","a","i","window","OnmsLoader","prefix","extension","_classCallCheck","_defineProperty","_set","default","this","mappings","key","value","_len","arguments","length","modules","Array","_key","console","log","fragment","document","createDocumentFragment","_i","_modules","loaded","debug","el","createElement","src","async","appendChild","error","body","name","check","onready","_this","retry","undefined","nextRetry","Math","round","_setTimeout2","waitFor"],"mappings":"CAAA,SAA2CA,EAAMC,GAChD,GAAsB,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,SACb,GAAqB,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,OACP,CACJ,IAAIK,EAAIL,IACR,IAAI,IAAIM,KAAKD,GAAuB,iBAAZJ,QAAuBA,QAAUF,GAAMO,GAAKD,EAAEC,IAPxE,CASGC,QAAQ,WACX,O,shCCVA,IAEqBC,EAAU,WAM7B,SAAAA,EAAmBC,EAAiBC,I,4FAAoBC,CAAA,KAAAH,GAAAI,EAAA,cALxC,oBAAkBA,EAAA,iBACf,cAAYA,EAAA,cACd,IAAAC,EAAAC,SAAiBF,EAAA,wBAI5BH,IACFM,KAAKN,OAASA,GAEZC,IACFK,KAAKL,UAAYA,GAGnBK,KAAKC,SAAW,CACd,UAAaD,KAAKN,OAAS,eAAiBM,KAAKL,UACjD,UAAaK,KAAKN,OAAS,eAAiBM,KAAKL,UACjD,GAAMK,KAAKN,OAAS,QAAUM,KAAKL,UACnC,KAAQK,KAAKN,OAAS,UAAYM,KAAKL,UACvC,OAAUK,KAAKN,OAAS,SAAWM,KAAKL,UACxC,OAAUK,KAAKN,OAAS,YAAcM,KAAKL,UAC3C,eAAgBK,KAAKN,OAAS,eAAiBM,KAAKL,UACpD,OAAUK,KAAKN,OAAS,YAAcM,KAAKL,UAC3C,YAAaK,KAAKN,OAAS,eAAiBM,KAAKL,UACjD,QAAWK,KAAKN,OAAS,aAAeM,KAAKL,UAC7C,SAAYK,KAAKN,OAAS,WAAaM,KAAKL,UAC5C,aAAcK,KAAKN,OAAS,aAAeM,KAAKL,UAEhD,OAAUK,KAAKN,OAAS,SAAWM,KAAKL,W,UAyC3C,O,EAvCAF,E,EAAA,EAAAS,IAAA,OAAAC,MAED,WAAkC,QAAAC,EAAAC,UAAAC,OAAnBC,EAAO,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAPF,EAAOE,GAAAJ,UAAAI,GACpBC,QAAQC,IAAI,uBAAyBJ,EAAQD,OAAS,aAGtD,IADA,IAAMM,EAAWC,SAASC,yBAC1BC,EAAA,EAAAC,EAAqBT,EAAOQ,EAAAC,EAAAV,OAAAS,IAAE,CAAzB,IAAM5B,EAAM6B,EAAAD,GACf,GAAIf,KAAKiB,OAAO9B,GACduB,QAAQC,IAAI,wBAA0BxB,EAAS,0BAE/C,GAAIa,KAAKC,SAASd,GAAS,CACzBuB,QAAQQ,MAAM,uBAAyB/B,GACvC,IAAMgC,EAAKN,SAASO,cAAc,UAClCD,EAAGE,IAAMrB,KAAKC,SAASd,GACvBgC,EAAGG,OAAQ,EACXV,EAASW,YAAYJ,GACrBnB,KAAKiB,OAAO9B,IAAU,OAEtBuB,QAAQc,MAAM,sCAAwCrC,EAAS,MAIrE0B,SAASY,KAAKF,YAAYX,GAC1BF,QAAQC,IAAI,0CACb,CAAAT,IAAA,UAAAC,MAED,SAAeuB,EAAcC,EAAsBC,GAAiC,IAAAC,EAAA,KAAZC,EAAKzB,UAAAC,OAAA,QAAAyB,IAAA1B,UAAA,GAAAA,UAAA,GAAG,GAC9E,GAAIsB,IACFjB,QAAQC,IAAI,eAAiBe,EAAO,cACpCE,SACK,GAAIE,EAAQ,IAAO,CACxB,IAAME,EAAYC,KAAKC,MAAc,IAARJ,GAC7BpB,QAAQC,IAAI,eAAiBe,EAAO,kCAAoCM,EAAY,QACpF,EAAAG,EAAApC,UAAW,WACT8B,EAAKO,QAAQV,EAAMC,EAAOC,EAASI,KAClCA,QAEHtB,QAAQC,IAAI,4BAA8Be,M,6DAE7CjC,EArE4B,GAqE5BP,QAAAa,QAAAN,I","file":"loader.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn ","/* eslint no-console: 0 */\n\nexport default class OnmsLoader {\n  public prefix = '/opennms/assets/';\n  public extension = '.vaadin.js';\n  private loaded = new Set<string>();\n  private mappings: object;\n\n  public constructor(prefix?: string, extension?: string) {\n    if (prefix) {\n      this.prefix = prefix;\n    }\n    if (extension) {\n      this.extension = extension;\n    }\n\n    this.mappings = {\n      'backshift': this.prefix + 'backshift-js' + this.extension,\n      'bootstrap': this.prefix + 'bootstrap-js' + this.extension,\n      'd3': this.prefix + 'd3-js' + this.extension,\n      'flot': this.prefix + 'flot-js' + this.extension,\n      'global': this.prefix + 'global' + this.extension,\n      'holder': this.prefix + 'holder-js' + this.extension,\n      'ionicons-css': this.prefix + 'ionicons-css' + this.extension,\n      'jquery': this.prefix + 'jquery-js' + this.extension,\n      'jquery-ui': this.prefix + 'jquery-ui-js' + this.extension,\n      'leaflet': this.prefix + 'leaflet-js' + this.extension,\n      'manifest': this.prefix + 'manifest' + this.extension,\n      'onms-graph': this.prefix + 'onms-graph' + this.extension,\n//      'openlayers': this.prefix + 'legacy/openlayers-2.10/OpenLayers.js',\n      'vendor': this.prefix + 'vendor' + this.extension,\n    };\n  }\n\n  public load(...modules: string[]) {\n    console.log('OnmsLoader: loading ' + modules.length + ' modules.');\n\n    const fragment = document.createDocumentFragment();\n    for (const module of modules) {\n      if (this.loaded[module]) {\n        console.log('OnmsLoader: skipping ' + module + ' (already loaded)');\n      } else {\n        if (this.mappings[module]) {\n          console.debug('OnmsLoader: loading ' + module);\n          const el = document.createElement('script');\n          el.src = this.mappings[module];\n          el.async = false;\n          fragment.appendChild(el);\n          this.loaded[module] = true;\n        } else {\n          console.error('OnmsLoader: no mapping for module \"' + module + '\"!');\n        }\n      }\n    }\n    document.body.appendChild(fragment);\n    console.log('OnmsLoader: finished loading modules');\n  }\n\n  public waitFor(name: string, check: () => boolean, onready: () => void, retry = 50) {\n    if (check()) {\n      console.log('OnmsLoader: ' + name + ' is ready.');\n      onready();\n    } else if (retry < 10000) {\n      const nextRetry = Math.round(retry * 1.5);\n      console.log('OnmsLoader: ' + name + ' is not ready. Trying again in ' + nextRetry + 'ms.');\n      setTimeout(() => {\n        this.waitFor(name, check, onready, nextRetry);\n      }, nextRetry);\n    } else {\n      console.log('OnmsLoader: giving up on ' + name);\n    }\n  }\n}\n"],"sourceRoot":""}